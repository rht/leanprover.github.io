---
layout: archive
title: Zulip Chat Archive
permalink: archive/113489newmembers/52075noobquestions.html
---

<h2>Stream: <a href="http://127.0.0.1:4000/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions.html">noob question(s)</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="148007940"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148007940" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148007940">(Nov 20 2018 at 00:46)</a>:</h4>
<p>What's the command to make Lean automatically derive <code>decidable_eq</code> for some custom inductive type?</p>



<a name="148007958"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148007958" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148007958">(Nov 20 2018 at 00:47)</a>:</h4>
<p>@[derive decidable_eq]</p>



<a name="148007972"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148007972" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148007972">(Nov 20 2018 at 00:47)</a>:</h4>
<p>ah I should've thought of that, thanks! :)</p>



<a name="148013728"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148013728" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148013728">(Nov 20 2018 at 03:18)</a>:</h4>
<p>Hm, when I add</p>
<div class="codehilite"><pre><span></span><span class="kn">open</span> <span class="n">classical</span>
<span class="n">local</span> <span class="n">attribute</span> <span class="o">[</span><span class="kn">instance</span><span class="o">]</span> <span class="n">prop_decidable</span>
</pre></div>


<p>to a file, definitions below it which used to pass now fail with:</p>
<div class="codehilite"><pre><span></span><span class="n">equation</span> <span class="n">compiler</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">bytecode</span> <span class="n">for</span> <span class="err">&#39;</span><span class="n">subst</span><span class="bp">._</span><span class="n">main&#39;</span>
<span class="n">nested</span> <span class="n">exception</span> <span class="n">message</span><span class="o">:</span>
<span class="n">code</span> <span class="n">generation</span> <span class="n">failed</span><span class="o">,</span> <span class="n">VM</span> <span class="n">does</span> <span class="n">not</span> <span class="k">have</span> <span class="n">code</span> <span class="n">for</span> <span class="err">&#39;</span><span class="n">classical</span><span class="bp">.</span><span class="n">choice&#39;</span>
</pre></div>


<p>Why might this be?</p>
<p>Is it basically because <code>classical</code> makes things uncomputable? If so, maybe Lean should detect that <code>classical</code> is not used in a particular case and still compile the definition?</p>



<a name="148013848"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148013848" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148013848">(Nov 20 2018 at 03:21)</a>:</h4>
<p>Try <code>[instance, priority 0]</code>. Otherwise it uses classical decidability even when there's proper decidability.</p>



<a name="148013915"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148013915" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148013915">(Nov 20 2018 at 03:23)</a>:</h4>
<p>Ah indeed, thanks Chris!</p>



<a name="148024166"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148024166" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148024166">(Nov 20 2018 at 08:22)</a>:</h4>
<p>This trips lots of people up! I wonder where people are learning this trick? Not putting priority 0 can trip you up later in quite a confusing way</p>



<a name="148024213"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148024213" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148024213">(Nov 20 2018 at 08:23)</a>:</h4>
<p><span class="user-mention" data-user-id="110865">@Jeremy Avigad</span>  needs to fix the very bottom of <a href="https://leanprover.github.io/theorem_proving_in_lean/axioms_and_computation.html" target="_blank" title="https://leanprover.github.io/theorem_proving_in_lean/axioms_and_computation.html">https://leanprover.github.io/theorem_proving_in_lean/axioms_and_computation.html</a></p>



<a name="148024215"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148024215" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148024215">(Nov 20 2018 at 08:23)</a>:</h4>
<p>I think Lean shows an error message when it can't find an instance for <code>decidable</code>, and that error message does not include setting the priority. It would be very helpful if it did.</p>



<a name="148024219"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148024219" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148024219">(Nov 20 2018 at 08:23)</a>:</h4>
<p>and <a href="https://leanprover.github.io/theorem_proving_in_lean/type_classes.html" target="_blank" title="https://leanprover.github.io/theorem_proving_in_lean/type_classes.html">https://leanprover.github.io/theorem_proving_in_lean/type_classes.html</a></p>



<a name="148044684"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148044684" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeremy Avigad <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148044684">(Nov 20 2018 at 15:03)</a>:</h4>
<p>I'm on it -- I'll do it tomorrow.</p>



<a name="148049459"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148049459" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148049459">(Nov 20 2018 at 16:08)</a>:</h4>
<p>Thanks!</p>



<a name="148049511"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148049511" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148049511">(Nov 20 2018 at 16:09)</a>:</h4>
<p>how about <em>not</em> using <code>classical.dec</code></p>



<a name="148049651"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148049651" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148049651">(Nov 20 2018 at 16:10)</a>:</h4>
<p>Let's just agree to not not use it</p>



<a name="148049677"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148049677" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148049677">(Nov 20 2018 at 16:11)</a>:</h4>
<p>that doesn't mean we <em>use</em> it :P</p>



<a name="148049697"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148049697" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148049697">(Nov 20 2018 at 16:11)</a>:</h4>
<p>You may have missed Reid's point</p>



<a name="148049698"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148049698" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148049698">(Nov 20 2018 at 16:11)</a>:</h4>
<p>It doesn't mean <em>you</em> use it</p>



<a name="148074938"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148074938" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148074938">(Nov 20 2018 at 22:59)</a>:</h4>
<p>Is it possible to make Lean display the values of constant variables in the tactic state? E.g. if i have <code>lst: list nat</code> which is also empty, it would be nice to see that it's empty.</p>



<a name="148075021"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148075021" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148075021">(Nov 20 2018 at 23:01)</a>:</h4>
<p>either this doesn't make sense, or <code>subst lst</code></p>



<a name="148075182"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148075182" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148075182">(Nov 20 2018 at 23:04)</a>:</h4>
<p>Hm I should elaborate, maybe I'm misunderstanding how <code>induction</code> works. Say I have a hypothesis <code>h: InductiveFoo list.nil</code>, where <code>InductiveFoo: list nat -&gt; Prop</code>. So then running <code>induction h</code> creates cases for all the constructors of <code>InductiveFoo</code>, which take the list as an input, say <code>lst</code>. But the <code>lst</code> is empty, so it'd be nice to see that in the state.</p>



<a name="148075295"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148075295" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148075295">(Nov 20 2018 at 23:06)</a>:</h4>
<p>you can't because it's forgotten</p>



<a name="148075309"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148075309" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148075309">(Nov 20 2018 at 23:06)</a>:</h4>
<p>you might want to <code>generalize_hyp</code></p>



<a name="148075886"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148075886" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148075886">(Nov 20 2018 at 23:16)</a>:</h4>
<p>Thanks!</p>



<a name="148115433"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148115433" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148115433">(Nov 21 2018 at 15:03)</a>:</h4>
<p>Perhaps it would be useful to have a reference sheet for translating from Coq to Lean tactics?</p>



<a name="148115539"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148115539" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148115539">(Nov 21 2018 at 15:05)</a>:</h4>
<p>I recall such a thing being made at one point. Maybe it's in mathlib docs?</p>



<a name="148115560"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148115560" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148115560">(Nov 21 2018 at 15:05)</a>:</h4>
<p><a href="https://github.com/jldodds/coq-lean-cheatsheet" target="_blank" title="https://github.com/jldodds/coq-lean-cheatsheet">https://github.com/jldodds/coq-lean-cheatsheet</a></p>



<a name="148115566"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148115566" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148115566">(Nov 21 2018 at 15:05)</a>:</h4>
<p>Note the date though, it'll need updating.</p>



<a name="148115644"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148115644" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148115644">(Nov 21 2018 at 15:06)</a>:</h4>
<p>Oh, nice!</p>



<a name="148119720"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148119720" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148119720">(Nov 21 2018 at 16:06)</a>:</h4>
<p>Is there a general tactic for showing <code>false</code> by "this term could not have been constructed"? E.g.</p>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="n">Foo</span><span class="o">:</span> <span class="kt">Prop</span> <span class="bp">→</span> <span class="kt">Prop</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">FooT</span><span class="o">:</span> <span class="n">Foo</span> <span class="n">true</span> <span class="n">true</span>
<span class="bp">|</span> <span class="n">FooF</span><span class="o">:</span> <span class="n">Foo</span> <span class="n">false</span> <span class="n">false</span>

<span class="c1">-- This term could not have been constructed</span>
<span class="kn">lemma</span> <span class="n">impossible</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">Foo</span> <span class="n">true</span> <span class="n">false</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">false</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">sorry</span>
</pre></div>



<a name="148120085"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148120085" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148120085">(Nov 21 2018 at 16:11)</a>:</h4>
<p><code>cases</code></p>



<a name="148120091"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148120091" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148120091">(Nov 21 2018 at 16:11)</a>:</h4>
<p>also empty match</p>



<a name="148120098"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148120098" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148120098">(Nov 21 2018 at 16:11)</a>:</h4>
<div class="codehilite"><pre><span></span>lemma impossible : Foo true false → false.
</pre></div>



<a name="148120175"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148120175" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148120175">(Nov 21 2018 at 16:12)</a>:</h4>
<p>You have to make <code>Foo : bool -&gt; bool -&gt; Prop</code> for that.</p>



<a name="148120216"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148120216" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148120216">(Nov 21 2018 at 16:13)</a>:</h4>
<p>Yeah, for <code>Prop -&gt; Prop -&gt; Prop</code> both of these fail, but that wasn't actually my problem, so thanks!</p>



<a name="148120406"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148120406" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148120406">(Nov 21 2018 at 16:16)</a>:</h4>
<p>It seems that variations on this topic comes up again and again. We should really find a way to document that</p>



<a name="148134832"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148134832" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148134832">(Nov 21 2018 at 20:17)</a>:</h4>
<p>That would be nice :) I was also surprised to see that more often than not <code>contradiction</code> fails when <code>cases h</code> works. Description: <code>The contradiction tactic attempts to find in the current local context an hypothesis that is equivalent to an empty inductive type (e.g. false)</code>. I thought a hypothesis that cannot be constructed is exactly that, but maybe I'm misunderstanding it?</p>



<a name="148147233"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148147233" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148147233">(Nov 22 2018 at 01:12)</a>:</h4>
<p>Is it possible to reserve some notation for an inductive type and then use it while defining the type, like in Coq? I tried this,  but the parser seems to fail:</p>
<div class="codehilite"><pre><span></span><span class="n">reserve</span> <span class="kn">infix</span> <span class="bp">`</span><span class="err">∋</span><span class="bp">`</span><span class="o">:</span><span class="mi">50</span>

<span class="kn">inductive</span> <span class="n">Typeof</span><span class="o">:</span> <span class="n">list</span> <span class="n">Tp</span> <span class="bp">→</span> <span class="n">Tp</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">Z</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="err">Γ</span><span class="o">:</span> <span class="n">list</span> <span class="n">Tp</span><span class="o">)</span> <span class="n">A</span><span class="o">,</span> <span class="n">Typeof</span> <span class="o">(</span><span class="err">Γ</span><span class="bp">.</span><span class="n">append</span> <span class="o">[</span><span class="n">A</span><span class="o">])</span> <span class="n">A</span>
<span class="bp">|</span> <span class="n">S_</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="err">Γ</span><span class="o">:</span> <span class="n">list</span> <span class="n">Tp</span><span class="o">)</span> <span class="n">A</span> <span class="n">B</span><span class="o">,</span> <span class="n">Typeof</span> <span class="err">Γ</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">Typeof</span> <span class="o">(</span><span class="err">Γ</span><span class="bp">.</span><span class="n">append</span> <span class="o">[</span><span class="n">B</span><span class="o">])</span> <span class="n">A</span>

<span class="kn">inductive</span> <span class="n">Typeof</span><span class="o">:</span> <span class="n">list</span> <span class="n">Tp</span> <span class="bp">→</span> <span class="n">Tp</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">Z</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="err">Γ</span><span class="o">:</span> <span class="n">list</span> <span class="n">Tp</span><span class="o">)</span> <span class="n">A</span><span class="o">,</span> <span class="o">(</span><span class="err">Γ</span><span class="bp">.</span><span class="n">append</span> <span class="o">[</span><span class="n">A</span><span class="o">])</span> <span class="err">∋</span> <span class="n">A</span> <span class="c1">-- fails</span>
<span class="bp">|</span> <span class="n">S_</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="err">Γ</span><span class="o">:</span> <span class="n">list</span> <span class="n">Tp</span><span class="o">)</span> <span class="n">A</span> <span class="n">B</span><span class="o">,</span> <span class="err">Γ</span> <span class="err">∋</span> <span class="n">A</span> <span class="bp">→</span> <span class="o">(</span><span class="err">Γ</span><span class="bp">.</span><span class="n">append</span> <span class="o">[</span><span class="n">B</span><span class="o">])</span> <span class="err">∋</span> <span class="n">A</span>

<span class="kn">infix</span> <span class="err">∋</span> <span class="o">:=</span> <span class="n">Typeof</span>
</pre></div>



<a name="148150619"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148150619" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148150619">(Nov 22 2018 at 03:00)</a>:</h4>
<p>Yes! You can just put a notation line between the inductive header and the first constructor</p>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="n">Typeof</span><span class="o">{</span><span class="n">Tp</span><span class="o">}:</span> <span class="n">list</span> <span class="n">Tp</span> <span class="bp">→</span> <span class="n">Tp</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="kn">infix</span> <span class="bp">`</span><span class="err">∋</span><span class="bp">`</span><span class="o">:</span><span class="mi">50</span> <span class="o">:=</span> <span class="n">Typeof</span>
<span class="bp">|</span> <span class="n">Z</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="err">Γ</span><span class="o">:</span> <span class="n">list</span> <span class="n">Tp</span><span class="o">)</span> <span class="n">A</span><span class="o">,</span> <span class="o">(</span><span class="err">Γ</span><span class="bp">.</span><span class="n">append</span> <span class="o">[</span><span class="n">A</span><span class="o">])</span> <span class="err">∋</span> <span class="n">A</span>
<span class="bp">|</span> <span class="n">S_</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="err">Γ</span><span class="o">:</span> <span class="n">list</span> <span class="n">Tp</span><span class="o">)</span> <span class="n">A</span> <span class="n">B</span><span class="o">,</span> <span class="err">Γ</span> <span class="err">∋</span> <span class="n">A</span> <span class="bp">→</span> <span class="o">(</span><span class="err">Γ</span><span class="bp">.</span><span class="n">append</span> <span class="o">[</span><span class="n">B</span><span class="o">])</span> <span class="err">∋</span> <span class="n">A</span>
</pre></div>



<a name="148238627"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148238627" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeremy Avigad <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148238627">(Nov 23 2018 at 16:29)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> I added a discussion of the <code>priority 0</code> trick to Section 10.4 of TPIL (search on "priority 0"):<br>
<a href="https://leanprover.github.io/theorem_proving_in_lean/type_classes.html#decidable-propositions" target="_blank" title="https://leanprover.github.io/theorem_proving_in_lean/type_classes.html#decidable-propositions">https://leanprover.github.io/theorem_proving_in_lean/type_classes.html#decidable-propositions</a><br>
I also added a back reference in Section 11:<br>
<a href="https://leanprover.github.io/theorem_proving_in_lean/axioms_and_computation.html#the-law-of-the-excluded-middle" target="_blank" title="https://leanprover.github.io/theorem_proving_in_lean/axioms_and_computation.html#the-law-of-the-excluded-middle">https://leanprover.github.io/theorem_proving_in_lean/axioms_and_computation.html#the-law-of-the-excluded-middle</a></p>
<p>Finally, I fixed an old issue raised by <span class="user-mention" data-user-id="122022">@Joseph Corneli</span> by changing all the examples in 6.4:<br>
<a href="https://leanprover.github.io/theorem_proving_in_lean/interacting_with_lean.html#attributes" target="_blank" title="https://leanprover.github.io/theorem_proving_in_lean/interacting_with_lean.html#attributes">https://leanprover.github.io/theorem_proving_in_lean/interacting_with_lean.html#attributes</a><br>
<a href="https://github.com/leanprover/theorem_proving_in_lean/issues/62" target="_blank" title="https://github.com/leanprover/theorem_proving_in_lean/issues/62">https://github.com/leanprover/theorem_proving_in_lean/issues/62</a></p>
<p>Teaching my class next semester will give me a chance to review and expand TPIL. I am planning to add one more chapter on some of the fine points of dependent type theory, e.g. explaining how to work with equality and dependent types (the dark side of type theory), and explaining how Lean manages recursion on arbitrary well-founded relations. I'll also try to write a less ambitious but up-to-date version of Programming in Lean. But I am counting on the mathlib crew to continue documenting mathlib and all the new tactics, and to provide useful guidance on using the library and proving theorems.</p>



<a name="148238846"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148238846" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148238846">(Nov 23 2018 at 16:33)</a>:</h4>
<p>I have not been using Lean seriously since term started; there are three weeks to go before it finishes. After that I fully intend to go back to the perfectoid project. But when I don't understand something, my instinct is to write docs about it, because if I work something out and don't write down what I learnt then I realise a month later that I've forgotten it all again!</p>



<a name="148247373"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148247373" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148247373">(Nov 23 2018 at 20:02)</a>:</h4>
<p>Thank you very much Jeremy! Your documentation work is really crucial.</p>



<a name="148249579"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148249579" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148249579">(Nov 23 2018 at 21:06)</a>:</h4>
<p>I'm now reading random pieces of TPIL, and I have a couple more suggestions about chapter 10:</p>
<ul>
<li>at several places, emacs is mentioned but not VScode. I guess this goes back to before the VScode extension was available, but it could be misleading</li>
<li>in 10.5. Managing Type Class Inference, I think it would be nice to add the standard tricks to see what's the name of an instance Lean is finding, and sometimes what's the actual definition, as in</li>
</ul>
<div class="codehilite"><pre><span></span><span class="bp">#</span><span class="kn">check</span> <span class="o">(</span><span class="k">by</span> <span class="n">apply_instance</span> <span class="o">:</span> <span class="n">has_add</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="bp">#</span><span class="n">reduce</span> <span class="o">(</span><span class="n">infer_instance</span> <span class="o">:</span> <span class="n">has_add</span> <span class="bp">ℕ</span><span class="o">)</span>
</pre></div>


<p>maybe find a better example for the second one since the answer is not super easy to read (every nice example coming to my mind are in mathlib...)</p>



<a name="148249664"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148249664" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148249664">(Nov 23 2018 at 21:09)</a>:</h4>
<p>Oh, it seems <code>apply_instance</code> is never mentioned in TPIL <span class="emoji emoji-2639" title="sad">:sad:</span></p>



<a name="148249726"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148249726" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148249726">(Nov 23 2018 at 21:10)</a>:</h4>
<p>Another thing that would be very helpful, both because it can be puzzling and because it can be very helpful would be to discuss</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">n</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">:=</span> <span class="bp">ℕ</span>

<span class="kn">example</span> <span class="o">:</span> <span class="n">has_add</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">apply_instance</span>  <span class="c1">-- ok</span>
<span class="kn">example</span> <span class="o">:</span> <span class="n">has_add</span> <span class="n">n</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">apply_instance</span>  <span class="c1">-- fails</span>
<span class="kn">example</span> <span class="o">:</span> <span class="n">has_add</span> <span class="n">n</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">unfold</span> <span class="n">n</span> <span class="bp">;</span> <span class="n">apply_instance</span>  <span class="c1">-- ok</span>
</pre></div>



<a name="148277429"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/148277429" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeremy Avigad <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#148277429">(Nov 24 2018 at 13:23)</a>:</h4>
<p>Thanks for the input. Yes, TPIL evolved over time, and the last major rewrite was early in the days of Lean 3, before there was a VSCode extension. I'll do a global search and try to make the text less emacs-centric.</p>
<p>I'll discuss <code>apply_instance</code> and <code>infer_instance</code>. I am thinking of using these examples:</p>
<div class="codehilite"><pre><span></span><span class="c">/-</span><span class="cm"> example 1: using apply_instance -/</span>

<span class="n">def</span> <span class="n">foo</span> <span class="o">:</span> <span class="n">has_add</span> <span class="n">nat</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">apply_instance</span>
<span class="n">def</span> <span class="n">bar</span> <span class="o">:</span> <span class="n">inhabited</span> <span class="o">(</span><span class="n">nat</span> <span class="bp">→</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">apply_instance</span>

<span class="c">/-</span><span class="cm"> example 2: using infer_instance -/</span>

<span class="n">def</span> <span class="n">baz</span> <span class="o">:</span> <span class="n">has_add</span> <span class="n">nat</span> <span class="o">:=</span> <span class="n">infer_instance</span>
<span class="n">def</span> <span class="n">bla</span> <span class="o">:</span> <span class="n">inhabited</span> <span class="o">(</span><span class="n">nat</span> <span class="bp">→</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:=</span> <span class="n">infer_instance</span>

<span class="c">/-</span><span class="cm"> example 3: seeing them -/</span>

<span class="bp">#</span><span class="kn">print</span> <span class="n">foo</span>    <span class="c1">-- nat.has_add</span>
<span class="bp">#</span><span class="n">reduce</span> <span class="n">foo</span>   <span class="c1">-- (unreadable)</span>

<span class="bp">#</span><span class="kn">print</span> <span class="n">bar</span>    <span class="c1">-- pi.inhabited ℕ</span>
<span class="bp">#</span><span class="n">reduce</span> <span class="n">bar</span>   <span class="c1">-- {default := λ (a : ℕ), 0}</span>

<span class="bp">#</span><span class="kn">print</span> <span class="n">baz</span>    <span class="c1">-- infer_instance</span>
<span class="bp">#</span><span class="n">reduce</span> <span class="n">baz</span>   <span class="c1">-- (same as for #reduce foo)</span>

<span class="bp">#</span><span class="kn">print</span> <span class="n">bla</span>    <span class="c1">-- infer_instance</span>
<span class="bp">#</span><span class="n">reduce</span> <span class="n">bla</span>   <span class="c1">-- {default := λ (a : ℕ), 0}</span>

<span class="c">/-</span><span class="cm"> example 4: tricks to be more concise -/</span>

<span class="bp">#</span><span class="kn">check</span> <span class="o">(</span><span class="k">by</span> <span class="n">apply_instance</span> <span class="o">:</span> <span class="n">inhabited</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">nat</span><span class="bp">.</span><span class="n">inhabited</span>

<span class="bp">#</span><span class="n">reduce</span> <span class="o">(</span><span class="n">infer_instance</span> <span class="o">:</span> <span class="n">inhabited</span> <span class="bp">ℕ</span><span class="o">)</span>

<span class="c">/-</span><span class="cm"> examples 5: core Lean can&#39;t find an instance for inhabited set -/</span>

<span class="c1">-- fails</span>
<span class="c1">-- example {α : Type*} : inhabited (set α) := by apply_instance</span>

<span class="c">/-</span><span class="cm"> example 6: supplying one manually -/</span>

<span class="n">def</span> <span class="n">inhabited</span><span class="bp">.</span><span class="n">set</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:</span> <span class="n">inhabited</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="err">∅</span><span class="bp">⟩</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">inhabited</span><span class="bp">.</span><span class="n">set</span>     <span class="c1">-- λ {α : Type u}, {default := ∅}</span>
<span class="bp">#</span><span class="n">reduce</span> <span class="n">inhabited</span><span class="bp">.</span><span class="n">set</span> <span class="bp">ℕ</span>  <span class="c1">-- {default := λ (a : ℕ), false}</span>

<span class="c">/-</span><span class="cm"> example 7: unfolding a definition so Lean can find it -/</span>

<span class="n">def</span> <span class="n">inhabited</span><span class="bp">.</span><span class="n">set</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:</span> <span class="n">inhabited</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">unfold</span> <span class="n">set</span><span class="bp">;</span> <span class="n">apply_instance</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">inhabited</span><span class="bp">.</span><span class="n">set</span>     <span class="c1">-- λ (α : Type u), eq.mpr _ (pi.inhabited α)</span>
<span class="bp">#</span><span class="n">reduce</span> <span class="n">inhabited</span><span class="bp">.</span><span class="n">set</span> <span class="bp">ℕ</span>  <span class="c1">-- {default := λ (a : ℕ), true}</span>

<span class="c">/-</span><span class="cm"> example 8: using dunfold instead -/</span>

<span class="n">def</span> <span class="n">inhabited</span><span class="bp">.</span><span class="n">set</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:</span> <span class="n">inhabited</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">dunfold</span> <span class="n">set</span><span class="bp">;</span> <span class="n">apply_instance</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">inhabited</span><span class="bp">.</span><span class="n">set</span>     <span class="c1">-- λ (α : Type u), id (pi.inhabited α)</span>
<span class="bp">#</span><span class="n">reduce</span> <span class="n">inhabited</span><span class="bp">.</span><span class="n">set</span> <span class="bp">ℕ</span>  <span class="c1">-- {default := λ (a : ℕ), true}</span>
</pre></div>



<a name="151432316"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/151432316" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#151432316">(Dec 11 2018 at 09:17)</a>:</h4>
<blockquote>
<p>Yes! You can just put a notation line between the inductive header and the first constructor</p>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="n">Typeof</span><span class="o">{</span><span class="n">Tp</span><span class="o">}:</span> <span class="n">list</span> <span class="n">Tp</span> <span class="bp">→</span> <span class="n">Tp</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="kn">infix</span> <span class="bp">`</span><span class="err">∋</span><span class="bp">`</span><span class="o">:</span><span class="mi">50</span> <span class="o">:=</span> <span class="n">Typeof</span>
<span class="bp">|</span> <span class="n">Z</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="err">Γ</span><span class="o">:</span> <span class="n">list</span> <span class="n">Tp</span><span class="o">)</span> <span class="n">A</span><span class="o">,</span> <span class="o">(</span><span class="err">Γ</span><span class="bp">.</span><span class="n">append</span> <span class="o">[</span><span class="n">A</span><span class="o">])</span> <span class="err">∋</span> <span class="n">A</span>
<span class="bp">|</span> <span class="n">S_</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="err">Γ</span><span class="o">:</span> <span class="n">list</span> <span class="n">Tp</span><span class="o">)</span> <span class="n">A</span> <span class="n">B</span><span class="o">,</span> <span class="err">Γ</span> <span class="err">∋</span> <span class="n">A</span> <span class="bp">→</span> <span class="o">(</span><span class="err">Γ</span><span class="bp">.</span><span class="n">append</span> <span class="o">[</span><span class="n">B</span><span class="o">])</span> <span class="err">∋</span> <span class="n">A</span>
</pre></div>


</blockquote>
<p>Is there something similar for dependant <code>structure</code>? If one field of my structure is a binary operator, can I define an infix notation usable in the remaining fields declaration?</p>



<a name="151432380"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/151432380" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#151432380">(Dec 11 2018 at 09:18)</a>:</h4>
<p>I usually make the <code>structure</code> extend the notation typeclass in this situation.</p>



<a name="151432403"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/151432403" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#151432403">(Dec 11 2018 at 09:19)</a>:</h4>
<p>In fact I have been known to make new notation typeclasses called things like <code>group_notation</code> extending <code>has_mul</code>, <code>has_one</code> and <code>has_inv</code>, and then extending these too so I get a bunch of notation at once.</p>



<a name="151432470"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/151432470" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#151432470">(Dec 11 2018 at 09:21)</a>:</h4>
<p>Thanks Kevin. I know all this, but I'm still interested in an answer to my question.</p>



<a name="151432479"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/151432479" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#151432479">(Dec 11 2018 at 09:21)</a>:</h4>
<p>Yes I understand. For example if the notation is not in the standard notation list then it would be nicer to add it directly in the definition of the structure.</p>



<a name="151440921"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/151440921" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#151440921">(Dec 11 2018 at 12:05)</a>:</h4>
<p>You can define notation in structures that's used in the remaining fields. But I think it's just local to the structure declaration.</p>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">patrick</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span>
<span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span>
<span class="o">(</span><span class="kn">infix</span> <span class="bp">`</span><span class="err">^^^</span><span class="bp">`</span><span class="o">:</span><span class="mi">50</span> <span class="o">:=</span> <span class="n">f</span><span class="o">)</span>
<span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">a</span> <span class="err">^^^</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span>

<span class="bp">#</span><span class="kn">check</span> <span class="n">patrick</span><span class="bp">.</span><span class="n">h</span>
</pre></div>



<a name="151445285"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/151445285" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#151445285">(Dec 11 2018 at 13:29)</a>:</h4>
<p>Thanks!</p>



<a name="154258172"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/154258172" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeremy Avigad <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#154258172">(Jan 03 2019 at 18:49)</a>:</h4>
<p>I just crossed this item off my to do list. <code>apply_inference</code> and such are now discussed here: <a href="https://leanprover.github.io/theorem_proving_in_lean/type_classes.html#managing-type-class-inference" target="_blank" title="https://leanprover.github.io/theorem_proving_in_lean/type_classes.html#managing-type-class-inference">https://leanprover.github.io/theorem_proving_in_lean/type_classes.html#managing-type-class-inference</a>. And VS Code is now mentioned whenever Emacs is, with VS Code first.</p>



<a name="154258563"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/154258563" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#154258563">(Jan 03 2019 at 18:54)</a>:</h4>
<blockquote>
<p>If you add this to your file in Emacs mode and use C-c C-x to run an independent Lean process on your file, the output buffer will show a trace every time the type class resolution procedure is subsequently triggered.</p>
</blockquote>
<p>This paragraph (in the section your referred to) is still Emacs centric</p>



<a name="154260198"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/154260198" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeremy Avigad <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#154260198">(Jan 03 2019 at 19:20)</a>:</h4>
<p>Yes, that is the only one, because I don't know how to start an independent Lean process from within VS Code. I guess I'll remind people that they can run Lean from the VS Code terminal.</p>



<a name="154260213"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/154260213" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#154260213">(Jan 03 2019 at 19:20)</a>:</h4>
<p>Why would you do that?</p>



<a name="154260222"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/154260222" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#154260222">(Jan 03 2019 at 19:20)</a>:</h4>
<p>The trace is printed in the info view</p>



<a name="154260439"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/154260439" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeremy Avigad <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#154260439">(Jan 03 2019 at 19:23)</a>:</h4>
<p>Oh! I forgot. Good point. I'll fix that.</p>



<a name="154260510"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/154260510" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#154260510">(Jan 03 2019 at 19:24)</a>:</h4>
<p>Great!</p>



<a name="154261167"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/154261167" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeremy Avigad <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#154261167">(Jan 03 2019 at 19:34)</a>:</h4>
<p>Fixed. Thanks for catching it.<br>
<a href="https://leanprover.github.io/theorem_proving_in_lean/type_classes.html#managing-type-class-inference" target="_blank" title="https://leanprover.github.io/theorem_proving_in_lean/type_classes.html#managing-type-class-inference">https://leanprover.github.io/theorem_proving_in_lean/type_classes.html#managing-type-class-inference</a></p>



<a name="155250652"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155250652" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155250652">(Jan 16 2019 at 12:50)</a>:</h4>
<p>Hello! Is there anything special I need to do to make Lean recognise my <code>instance : has_zero Foo</code> as being equivalent to <code>0</code>? I got this state while trying to use <code>rw [this]</code>:</p>
<div class="codehilite"><pre><span></span><span class="n">rewrite</span> <span class="n">tactic</span> <span class="n">failed</span><span class="o">,</span> <span class="n">did</span> <span class="n">not</span> <span class="n">find</span> <span class="kn">instance</span> <span class="n">of</span> <span class="n">the</span> <span class="n">pattern</span> <span class="k">in</span> <span class="n">the</span> <span class="n">target</span> <span class="n">expression</span>
  <span class="mi">0</span> <span class="bp">+</span> <span class="n">π₂</span>
<span class="n">state</span><span class="o">:</span>
<span class="mi">3</span> <span class="n">goals</span>
<span class="n">π₂</span> <span class="o">:</span> <span class="n">mult</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">π₂</span> <span class="bp">=</span> <span class="n">π₂</span>
<span class="err">⊢</span> <span class="n">mult</span><span class="bp">.</span><span class="n">Zero</span> <span class="bp">+</span> <span class="n">π₂</span> <span class="bp">=</span> <span class="n">π₂</span> <span class="bp">+</span> <span class="n">mult</span><span class="bp">.</span><span class="n">Zero</span>
</pre></div>


<p>even though I have</p>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="o">:</span> <span class="n">has_zero</span> <span class="n">mult</span> <span class="o">:=</span>
  <span class="bp">⟨</span><span class="n">mult</span><span class="bp">.</span><span class="n">Zero</span><span class="bp">⟩</span>
</pre></div>


<p>above</p>



<a name="155250968"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155250968" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155250968">(Jan 16 2019 at 12:55)</a>:</h4>
<p>rewrites don't recognise definitional equality, only syntactic equality.</p>



<a name="155250980"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155250980" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155250980">(Jan 16 2019 at 12:55)</a>:</h4>
<p>So you could try "show 0 + pi2 = _" before the rewrite</p>



<a name="155251052"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155251052" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155251052">(Jan 16 2019 at 12:56)</a>:</h4>
<p>or "change mult.Zero + _ = _ at this". Maybe it will work after one of these changes. But not after both ;-)</p>



<a name="155251072"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155251072" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155251072">(Jan 16 2019 at 12:56)</a>:</h4>
<p><code>convert this</code> should also work</p>



<a name="155251096"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155251096" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155251096">(Jan 16 2019 at 12:57)</a>:</h4>
<p>but <code>this</code> isn't the goal</p>



<a name="155251103"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155251103" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155251103">(Jan 16 2019 at 12:57)</a>:</h4>
<p>Oh!</p>



<a name="155251182"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155251182" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155251182">(Jan 16 2019 at 12:58)</a>:</h4>
<p>This <code>convert</code> trick works when the thing you're rewriting is precisely one side of the equality I guess.</p>



<a name="155251188"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155251188" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155251188">(Jan 16 2019 at 12:58)</a>:</h4>
<p>or <code>erw this</code> would also work but it's not as nice</p>



<a name="155251370"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155251370" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155251370">(Jan 16 2019 at 13:01)</a>:</h4>
<p>In fact you can use <code>a' = b'</code> to prove <code>a = b</code> with neither side matching definitionally (you'll get two new goals <code>a = a'</code> and <code>b = b'</code>), but then you run the risk that the new goals are not actually true <span class="emoji emoji-263a" title="smile">:smile:</span></p>



<a name="155252212"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155252212" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155252212">(Jan 16 2019 at 13:13)</a>:</h4>
<p>Ah, I see, thanks! And related, I'm proving that an object with three elements and custom add/mult tables is a semiring, how ugly is it to do all my proofs like this?</p>
<div class="codehilite"><pre><span></span>  <span class="kn">lemma</span> <span class="n">add_assoc</span> <span class="o">(</span><span class="n">π₁</span> <span class="n">π₂</span> <span class="n">π₃</span><span class="o">:</span> <span class="n">mult</span><span class="o">)</span>
    <span class="o">:</span> <span class="n">π₁</span> <span class="bp">+</span> <span class="n">π₂</span> <span class="bp">+</span> <span class="n">π₃</span> <span class="bp">=</span> <span class="n">π₁</span> <span class="bp">+</span> <span class="o">(</span><span class="n">π₂</span> <span class="bp">+</span> <span class="n">π₃</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span> <span class="n">cases</span> <span class="n">π₁</span><span class="bp">;</span> <span class="n">cases</span> <span class="n">π₂</span><span class="bp">;</span> <span class="n">cases</span> <span class="n">π₃</span><span class="bp">;</span> <span class="n">refl</span> <span class="o">}</span>
</pre></div>



<a name="155252434"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155252434" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155252434">(Jan 16 2019 at 13:17)</a>:</h4>
<p>it will work, although there are simpler proofs where you ony case on one of them, I think</p>



<a name="155252646"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155252646" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155252646">(Jan 16 2019 at 13:20)</a>:</h4>
<p>Hm, I found that without expanding every case, I had to do a bit more work by using other lemmas and so on. The definition of <code>add</code> is:</p>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="n">mult</span><span class="o">:</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="n">Zero</span><span class="o">:</span> <span class="n">mult</span>
<span class="bp">|</span> <span class="n">One</span><span class="o">:</span> <span class="n">mult</span>
<span class="bp">|</span> <span class="n">Omega</span><span class="o">:</span> <span class="n">mult</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_zero</span> <span class="n">mult</span> <span class="o">:=</span>
  <span class="bp">⟨</span><span class="n">mult</span><span class="bp">.</span><span class="n">Zero</span><span class="bp">⟩</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_one</span> <span class="n">mult</span> <span class="o">:=</span>
  <span class="bp">⟨</span><span class="n">mult</span><span class="bp">.</span><span class="n">One</span><span class="bp">⟩</span>

<span class="kn">notation</span> <span class="bp">`</span><span class="n">ω</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">mult</span><span class="bp">.</span><span class="n">Omega</span>

<span class="n">def</span> <span class="n">add</span><span class="o">:</span> <span class="n">mult</span> <span class="bp">→</span> <span class="n">mult</span> <span class="bp">→</span> <span class="n">mult</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="n">π</span> <span class="o">:=</span> <span class="n">π</span>
<span class="bp">|</span> <span class="n">π</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">π</span>
<span class="bp">|</span> <span class="mi">1</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">ω</span>
<span class="bp">|</span> <span class="n">ω</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">ω</span>
<span class="bp">|</span> <span class="bp">_</span> <span class="n">ω</span> <span class="o">:=</span> <span class="n">ω</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_add</span> <span class="n">mult</span> <span class="o">:=</span>
  <span class="bp">⟨</span><span class="n">add</span><span class="bp">⟩</span>
</pre></div>



<a name="155252763"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155252763" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155252763">(Jan 16 2019 at 13:22)</a>:</h4>
<p>right</p>



<a name="155252890"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155252890" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155252890">(Jan 16 2019 at 13:24)</a>:</h4>
<p>you should have lemmas like <code>x + ω = ω</code> as simp lemmas which should simplify most of the cases</p>



<a name="155252915"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155252915" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155252915">(Jan 16 2019 at 13:25)</a>:</h4>
<p>or you could just split into 27 cases if you want</p>



<a name="155253007"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155253007" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155253007">(Jan 16 2019 at 13:26)</a>:</h4>
<p>Ah ok, i'll try it with simp as well, thanks!</p>



<a name="155254705"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155254705" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155254705">(Jan 16 2019 at 13:55)</a>:</h4>
<p>Scott Morrison's case-bashing tactic would probably be useful here. But I don't know where that tactic lives at the moment...</p>



<a name="155255138"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155255138" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155255138">(Jan 16 2019 at 14:01)</a>:</h4>
<p>if you want to do a case bashing proof, another approach is to prove <code>fintype mult</code> and <code>decidable_eq mult</code> (you can <code>derive</code> this), and then you can just revert everything and use <code>dec_trivial</code></p>



<a name="155255210"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155255210" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155255210">(Jan 16 2019 at 14:02)</a>:</h4>
<p>Should even be reasonably fast, I guess.</p>



<a name="155255232"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155255232" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155255232">(Jan 16 2019 at 14:02)</a>:</h4>
<p>as long as you don't have too many variables; it is still 27 cases</p>



<a name="155256347"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155256347" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155256347">(Jan 16 2019 at 14:18)</a>:</h4>
<p>Kind of a stupid question, but when I'm using other computer algebra systems I would expect checking a million cases to be very quick. Mario's comments suggest that 27 is rather large for Lean. What is happening here?</p>



<a name="155257947"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155257947" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155257947">(Jan 16 2019 at 14:37)</a>:</h4>
<p>There is a large overhead of the expression that is generated, elaboration for it, and typechecking</p>



<a name="155258030"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155258030" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155258030">(Jan 16 2019 at 14:38)</a>:</h4>
<p>I don't think 27 is that large in this context, I guess it's probably less than a second to check</p>



<a name="155258059"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155258059" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155258059">(Jan 16 2019 at 14:38)</a>:</h4>
<p>I just think it's better to have more "human" proofs with fewer cases</p>



<a name="155258070"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155258070" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155258070">(Jan 16 2019 at 14:38)</a>:</h4>
<p>This is what I don't understand. We have to check that 27 things of the form add a (add b c) = add (add a b) c hold and in each case this is by refl.</p>



<a name="155258119"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155258119" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155258119">(Jan 16 2019 at 14:39)</a>:</h4>
<p>How long does it take Lean to prove (0 + 1) + 1 = 0 + (1 + 1) in this type?</p>



<a name="155258201"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155258201" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155258201">(Jan 16 2019 at 14:40)</a>:</h4>
<p>there is also all the intermediate steps, the generation of motives, lots of abstraction and substitution going on, and large terms being built up behind the scenes before you even attack those 27 cases</p>



<a name="155258224"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155258224" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155258224">(Jan 16 2019 at 14:40)</a>:</h4>
<p>So the bottleneck is elsewhere?</p>



<a name="155258252"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155258252" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155258252">(Jan 16 2019 at 14:41)</a>:</h4>
<p>I have heard it repeatedly asserted that the kernel is not a bottleneck</p>



<a name="155258265"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155258265" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155258265">(Jan 16 2019 at 14:41)</a>:</h4>
<p>Again the idea of a "large" term is confusing to me. In python I could happily manipulate a list with 1000 elements.</p>



<a name="155258275"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155258275" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155258275">(Jan 16 2019 at 14:41)</a>:</h4>
<p>this term has way more than 1000 subterms</p>



<a name="155258304"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155258304" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155258304">(Jan 16 2019 at 14:41)</a>:</h4>
<p>One of my kids has been learning about algorithms over the last few months and I realise now that I am far more aware of these things than I used to be.</p>



<a name="155258379"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155258379" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155258379">(Jan 16 2019 at 14:42)</a>:</h4>
<p>all in all it makes lean just look a lot slower to do "simple" things</p>



<a name="155258393"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155258393" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155258393">(Jan 16 2019 at 14:42)</a>:</h4>
<p>because there is a lot of bookkeeping in the background</p>



<a name="155258552"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155258552" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155258552">(Jan 16 2019 at 14:44)</a>:</h4>
<p>I would like to figure out ways to minimize the overhead, but that runs close to work on the lean compiler</p>



<a name="155261902"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155261902" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155261902">(Jan 16 2019 at 15:28)</a>:</h4>
<blockquote>
<p>this term has way more than 1000 subterms</p>
</blockquote>
<p>In the same way that a set with 10 elements has more than 1000 subsets, or in a more serious "we really need to work with way more than 1000 things" way?</p>



<a name="155263745"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155263745" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155263745">(Jan 16 2019 at 15:50)</a>:</h4>
<p>in the more serious way. (It's tricky to count the "size" of an expression but number of subterms is a good proxy)</p>



<a name="155263817"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/155263817" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#155263817">(Jan 16 2019 at 15:51)</a>:</h4>
<p>there is no exponential growth because subterms can't overlap, they are either disjoint or in a containment relationship</p>



<a name="156331129"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156331129" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156331129">(Jan 18 2019 at 00:04)</a>:</h4>
<p>Is it possible to define a custom synthesis strategy for an implicit argument? I would like to define a function which extracts concrete values from concrete lists, like so:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">get&#39;</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">l</span><span class="o">:</span> <span class="n">list</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">{</span><span class="n">h</span><span class="o">:</span> <span class="n">n</span> <span class="bp">&lt;</span> <span class="n">l</span><span class="bp">.</span><span class="n">length</span><span class="o">},</span> <span class="bp">ℕ</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">x</span><span class="bp">::</span><span class="n">xs</span><span class="o">)</span> <span class="mi">0</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">x</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">x</span><span class="bp">::</span><span class="n">xs</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">h</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">get&#39;</span> <span class="n">xs</span> <span class="n">n</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">lt_of_succ_lt_succ</span> <span class="n">h</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">[]</span> <span class="n">n</span> <span class="n">h</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span> <span class="n">exfalso</span><span class="o">,</span> <span class="n">simp</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span> <span class="n">exact</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">not_lt_zero</span> <span class="n">n</span><span class="o">)</span>
</pre></div>


<p>and for concrete args, <code>h</code> is always derivable with a custom tactic. I'd like Lean to use that tactic to synthesise it.<br>
OR am I doing this completely wrong and there is a much simpler way?</p>



<a name="156331279"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156331279" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156331279">(Jan 18 2019 at 00:07)</a>:</h4>
<p>unification hints! I don't know much about them though.</p>



<a name="156334847"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156334847" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156334847">(Jan 18 2019 at 00:51)</a>:</h4>
<p>This function is <code>list.nth_le</code> btw</p>



<a name="156334971"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156334971" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156334971">(Jan 18 2019 at 00:53)</a>:</h4>
<p>you can synthesize the argument using typeclasses, but <code>exact_dec_trivial</code> is another easy way to do it</p>



<a name="156335048"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156335048" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156335048">(Jan 18 2019 at 00:54)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">get&#39;</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">&lt;</span> <span class="n">l</span><span class="bp">.</span><span class="n">length</span> <span class="bp">.</span> <span class="n">exact_dec_trivial</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="n">l</span><span class="bp">.</span><span class="n">nth_le</span> <span class="n">n</span> <span class="n">h</span>

<span class="kn">example</span> <span class="o">:</span> <span class="n">get&#39;</span> <span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">]</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span> <span class="n">rfl</span>
</pre></div>



<a name="156335623"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156335623" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156335623">(Jan 18 2019 at 01:07)</a>:</h4>
<p>Ah indeed, thanks Mario! Can I use something like this in a Pi-type (to make the equation compiler work)? The <code>foo . tactic</code> syntax doesn't seem to work:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">debrujin_of_nat</span><span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="err">Γ</span><span class="o">:</span> <span class="n">Env</span><span class="o">}</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">n</span> <span class="bp">&lt;</span> <span class="err">Γ</span><span class="bp">.</span><span class="n">length</span> <span class="bp">.</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">exact_dec_trivial</span><span class="o">),</span> <span class="o">(</span><span class="err">Γ</span> <span class="err">∋</span> <span class="err">Γ</span><span class="bp">.</span><span class="n">nth_le</span> <span class="n">n</span> <span class="n">h</span><span class="o">)</span> <span class="c1">-- ill-formed declaration</span>
</pre></div>



<a name="156335911"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156335911" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156335911">(Jan 18 2019 at 01:14)</a>:</h4>
<p>If you can put it left of the colon, the dot notation should work. But if you can't write it that way, it's sugar for <code>auto_param</code>:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">get&#39;</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="n">auto_param</span> <span class="o">(</span><span class="n">n</span> <span class="bp">&lt;</span> <span class="n">l</span><span class="bp">.</span><span class="n">length</span><span class="o">)</span> <span class="bp">``</span><span class="n">exact_dec_trivial</span> <span class="bp">→</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="n">list</span><span class="bp">.</span><span class="n">nth_le</span>

<span class="kn">example</span> <span class="o">:</span> <span class="n">get&#39;</span> <span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">]</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span> <span class="n">rfl</span>
</pre></div>



<a name="156336087"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156336087" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156336087">(Jan 18 2019 at 01:19)</a>:</h4>
<p>Can I have a _named_ <code>auto_param</code> <span class="emoji emoji-1f605" title="sweat smile">:sweat_smile:</span>? I need to use the hypothesis in the type signature itself, more specifically in the return type.</p>



<a name="156336185"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156336185" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156336185">(Jan 18 2019 at 01:21)</a>:</h4>
<p>sure, just use a pi instead of an arrow</p>



<a name="156336193"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156336193" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156336193">(Jan 18 2019 at 01:21)</a>:</h4>
<p><code>auto_param T n</code> is defeq to <code>T</code> so it doesn't cause any problems</p>



<a name="156336460"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156336460" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156336460">(Jan 18 2019 at 01:27)</a>:</h4>
<p>Oh, I was sure I'd tried that but apparently not, thanks! Doesn't seem to work under <code>#eval</code> unfortunately:</p>
<div class="codehilite"><pre><span></span><span class="n">don&#39;t</span> <span class="n">know</span> <span class="n">how</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">placeholder</span>
<span class="kn">context</span><span class="o">:</span>
<span class="err">⊢</span> <span class="n">auto_param</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">list</span><span class="bp">.</span><span class="n">length</span> <span class="o">[</span><span class="n">Tp</span><span class="bp">.</span><span class="n">Nat</span><span class="o">])</span> <span class="o">(</span><span class="n">name</span><span class="bp">.</span><span class="n">mk_string</span> <span class="s2">&quot;exact_dec_trivial&quot;</span> <span class="o">(</span><span class="n">name</span><span class="bp">.</span><span class="n">mk_string</span> <span class="s2">&quot;tactic&quot;</span> <span class="n">name</span><span class="bp">.</span><span class="n">anonymous</span><span class="o">))</span>
</pre></div>



<a name="156336541"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156336541" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156336541">(Jan 18 2019 at 01:29)</a>:</h4>
<p>what did you write?</p>



<a name="156336637"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156336637" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156336637">(Jan 18 2019 at 01:30)</a>:</h4>
<p>it's not really related to the context you write it in, but rather the expected type during elaboration</p>



<a name="156336845"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156336845" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156336845">(Jan 18 2019 at 01:35)</a>:</h4>
<p>Apologies for the length, but this is the full context:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">find</span>
<span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">interactive</span>
<span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">auto_cases</span>
<span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">tidy</span>

<span class="bp">@</span><span class="o">[</span><span class="n">derive</span> <span class="n">decidable_eq</span><span class="o">]</span>
<span class="kn">inductive</span> <span class="n">Tp</span>
<span class="bp">|</span> <span class="n">Nat</span><span class="o">:</span> <span class="n">Tp</span>
<span class="bp">|</span> <span class="n">Bool</span><span class="o">:</span> <span class="n">Tp</span>
<span class="bp">|</span> <span class="n">Fn</span><span class="o">:</span> <span class="n">Tp</span> <span class="bp">→</span> <span class="n">Tp</span> <span class="bp">→</span> <span class="n">Tp</span>

<span class="n">local</span> <span class="kn">infixr</span> <span class="bp">`</span> <span class="err">⇒</span> <span class="bp">`</span><span class="o">:</span><span class="mi">50</span> <span class="o">:=</span> <span class="n">Tp</span><span class="bp">.</span><span class="n">Fn</span>

<span class="n">def</span> <span class="n">Env</span> <span class="o">:=</span> <span class="n">list</span> <span class="n">Tp</span>

<span class="kn">inductive</span> <span class="n">TypeIn</span><span class="o">:</span> <span class="n">Env</span> <span class="bp">→</span> <span class="n">Tp</span> <span class="bp">→</span> <span class="kt">Type</span>
<span class="kn">infix</span> <span class="bp">`</span> <span class="err">∋</span> <span class="bp">`</span><span class="o">:</span><span class="mi">40</span> <span class="o">:=</span> <span class="n">TypeIn</span>
<span class="bp">|</span> <span class="n">ZVar</span><span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="err">Γ</span> <span class="n">T</span><span class="o">},</span> <span class="n">T</span><span class="bp">::</span><span class="err">Γ</span> <span class="err">∋</span> <span class="n">T</span>
<span class="bp">|</span> <span class="n">SVar</span><span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="err">Γ</span> <span class="n">T</span> <span class="n">U</span><span class="o">},</span> <span class="err">Γ</span> <span class="err">∋</span> <span class="n">T</span> <span class="bp">→</span> <span class="n">U</span><span class="bp">::</span><span class="err">Γ</span> <span class="err">∋</span> <span class="n">T</span>

<span class="n">local</span> <span class="kn">infix</span> <span class="bp">`</span> <span class="err">∋</span> <span class="bp">`</span><span class="o">:</span><span class="mi">40</span> <span class="o">:=</span> <span class="n">TypeIn</span>

<span class="kn">open</span> <span class="n">TypeIn</span>

<span class="kn">inductive</span> <span class="n">Term</span><span class="o">:</span> <span class="n">Env</span> <span class="bp">→</span> <span class="n">Tp</span> <span class="bp">→</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="n">Nat</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">):</span> <span class="bp">Π</span> <span class="o">{</span><span class="err">Γ</span><span class="o">},</span> <span class="n">Term</span> <span class="err">Γ</span> <span class="n">Tp</span><span class="bp">.</span><span class="n">Nat</span> <span class="c1">-- in all environments, nat literals have type Nat</span>
<span class="bp">|</span> <span class="n">Bool</span> <span class="o">(</span><span class="n">b</span><span class="o">:</span> <span class="n">bool</span><span class="o">):</span> <span class="bp">Π</span> <span class="o">{</span><span class="err">Γ</span><span class="o">},</span> <span class="n">Term</span> <span class="err">Γ</span> <span class="n">Tp</span><span class="bp">.</span><span class="n">Bool</span> <span class="c1">-- and booleans have type Bool</span>
<span class="bp">|</span> <span class="n">Var</span><span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="err">Γ</span> <span class="n">T</span><span class="o">},</span> <span class="err">Γ</span> <span class="err">∋</span> <span class="n">T</span> <span class="bp">→</span> <span class="n">Term</span> <span class="err">Γ</span> <span class="n">T</span> <span class="c1">-- A variable has type T given its de Brujin index</span>
                                 <span class="c1">-- is in the environment.</span>
<span class="bp">|</span> <span class="n">Abs</span><span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="err">Γ</span> <span class="n">T</span> <span class="n">U</span><span class="o">},</span> <span class="n">Term</span> <span class="o">(</span><span class="n">T</span><span class="bp">::</span><span class="err">Γ</span><span class="o">)</span> <span class="n">U</span> <span class="bp">→</span> <span class="n">Term</span> <span class="err">Γ</span> <span class="o">(</span><span class="n">T</span> <span class="err">⇒</span> <span class="n">U</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">App</span><span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="err">Γ</span> <span class="n">T</span> <span class="n">U</span><span class="o">},</span> <span class="n">Term</span> <span class="err">Γ</span> <span class="o">(</span><span class="n">T</span> <span class="err">⇒</span> <span class="n">U</span><span class="o">)</span> <span class="bp">→</span> <span class="n">Term</span> <span class="err">Γ</span> <span class="n">T</span> <span class="bp">→</span> <span class="n">Term</span> <span class="err">Γ</span> <span class="n">U</span>

<span class="kn">open</span> <span class="n">Term</span>

<span class="n">def</span> <span class="n">debrujin_of_nat</span><span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="err">Γ</span><span class="o">:</span> <span class="n">Env</span><span class="o">}</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">{</span><span class="n">h</span><span class="o">:</span> <span class="n">auto_param</span> <span class="o">(</span><span class="n">n</span> <span class="bp">&lt;</span> <span class="err">Γ</span><span class="bp">.</span><span class="n">length</span><span class="o">)</span> <span class="bp">``</span><span class="n">tactic</span><span class="bp">.</span><span class="n">exact_dec_trivial</span><span class="o">},</span> <span class="o">(</span><span class="err">Γ</span> <span class="err">∋</span> <span class="err">Γ</span><span class="bp">.</span><span class="n">nth_le</span> <span class="n">n</span> <span class="n">h</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">T</span><span class="bp">::</span><span class="err">Γ</span><span class="o">)</span> <span class="mi">0</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">ZVar</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">T</span><span class="bp">::</span><span class="err">Γ</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">h</span> <span class="o">:=</span> <span class="n">SVar</span> <span class="o">(</span><span class="bp">@</span><span class="n">debrujin_of_nat</span> <span class="err">Γ</span> <span class="n">n</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">lt_of_succ_lt_succ</span> <span class="n">h</span><span class="o">))</span>
<span class="bp">|</span> <span class="o">[]</span> <span class="n">n</span> <span class="n">h</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span> <span class="n">exfalso</span><span class="o">,</span> <span class="n">simp</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span> <span class="n">exact</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">not_lt_zero</span> <span class="n">n</span><span class="o">)</span> <span class="n">h</span> <span class="o">}</span>

<span class="n">local</span> <span class="kn">notation</span> <span class="bp">`#`</span> <span class="n">n</span> <span class="o">:=</span> <span class="n">Var</span> <span class="o">(</span><span class="n">debrujin_of_nat</span> <span class="n">n</span><span class="o">)</span>

<span class="bp">#</span><span class="kn">eval</span> <span class="o">(</span><span class="bp">@</span><span class="n">App</span> <span class="o">[]</span> <span class="n">Tp</span><span class="bp">.</span><span class="n">Nat</span> <span class="n">Tp</span><span class="bp">.</span><span class="n">Nat</span> <span class="o">(</span><span class="bp">@</span><span class="n">Abs</span> <span class="o">[]</span> <span class="n">Tp</span><span class="bp">.</span><span class="n">Nat</span> <span class="n">Tp</span><span class="bp">.</span><span class="n">Nat</span> <span class="o">(</span><span class="bp">@</span><span class="n">Var</span> <span class="o">[</span><span class="n">Tp</span><span class="bp">.</span><span class="n">Nat</span><span class="o">]</span> <span class="n">Tp</span><span class="bp">.</span><span class="n">Nat</span> <span class="o">(</span><span class="n">debrujin_of_nat</span> <span class="mi">0</span><span class="o">)))</span> <span class="o">(</span><span class="bp">@</span><span class="n">Nat</span> <span class="mi">3</span> <span class="o">[]))</span>
</pre></div>



<a name="156336955"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156336955" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156336955">(Jan 18 2019 at 01:37)</a>:</h4>
<p>Basically given a concrete <code>list Tp</code> and a concrete <code>n</code>, I'd like it to figure out that <code>n</code> is within bounds and include the result of <code>lst.nth_le n _</code> in the return type.</p>



<a name="156337127"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156337127" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156337127">(Jan 18 2019 at 01:41)</a>:</h4>
<p>This does work: <code>#eval (@App [] Tp.Nat Tp.Nat (@Abs [] Tp.Nat Tp.Nat (@Var [Tp.Nat] Tp.Nat (@debrujin_of_nat [Tp.Nat] 0 (by tactic.exact_dec_trivial)))) (@Nat 3 []))</code> (notice the explicit proof I put in)</p>



<a name="156338055"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156338055" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156338055">(Jan 18 2019 at 02:06)</a>:</h4>
<p>so what did you write?</p>



<a name="156338116"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156338116" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156338116">(Jan 18 2019 at 02:07)</a>:</h4>
<p>Well, the <code>#eval</code> at the bottom of that long snippet is what fails synthesis. The <code>#eval</code> with an explicit proof works</p>



<a name="156338117"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156338117" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156338117">(Jan 18 2019 at 02:07)</a>:</h4>
<p>aha, you made the arg implicit</p>



<a name="156338118"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156338118" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156338118">(Jan 18 2019 at 02:07)</a>:</h4>
<p>auto params should be explicit</p>



<a name="156338120"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156338120" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156338120">(Jan 18 2019 at 02:07)</a>:</h4>
<div class="codehilite"><pre><span></span>def debrujin_of_nat: Π {Γ: Env} (n: ℕ) (h: auto_param (n &lt; Γ.length) ``tactic.exact_dec_trivial), (Γ ∋ Γ.nth_le n h)
</pre></div>



<a name="156338198"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156338198" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156338198">(Jan 18 2019 at 02:09)</a>:</h4>
<p>Oh thanks, now it does work, but still behaves as if it were implicit <span class="emoji emoji-1f914" title="thinking">:thinking:</span> is this currying at work, meaning I have to place <code>auto_param</code> last, s.t. given <code>foo: nat -&gt; auto_param blah -&gt; nat</code>, <code>(foo n): nat</code> (and <code>foo n _</code> still fails)?</p>



<a name="156408748"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156408748" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156408748">(Jan 18 2019 at 23:39)</a>:</h4>
<p>(unrelated to above)<br>
I'm seeing a wierd error in an inductive type: <code>invalid occurrence of recursive arg#3 of 'context.cons', the body of the functional type depends on it.</code>. The type definition is below, and as far as I know it's a perfectly legit defn, so what's wrong?</p>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="kn">context</span><span class="o">:</span> <span class="n">list</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="n">nil</span><span class="o">:</span> <span class="kn">context</span> <span class="o">[]</span>
<span class="bp">|</span> <span class="n">cons</span> <span class="o">{</span><span class="n">ns</span><span class="o">:</span> <span class="n">list</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="bp">_</span><span class="o">:</span> <span class="kn">context</span> <span class="n">ns</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">):</span> <span class="kn">context</span> <span class="o">(</span><span class="n">n</span><span class="bp">::</span><span class="n">ns</span><span class="o">)</span>
</pre></div>


<p>EDIT: swapping two arguments makes it compile, but why?</p>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="kn">context</span><span class="o">:</span> <span class="n">list</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="n">nil</span><span class="o">:</span> <span class="kn">context</span> <span class="o">[]</span>
<span class="bp">|</span> <span class="n">cons</span><span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">ns</span><span class="o">:</span> <span class="n">list</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="bp">_</span><span class="o">:</span> <span class="kn">context</span> <span class="n">ns</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="kn">context</span> <span class="o">(</span><span class="n">n</span><span class="bp">::</span><span class="n">ns</span><span class="o">)</span>
</pre></div>



<a name="156409198"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156409198" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156409198">(Jan 18 2019 at 23:48)</a>:</h4>
<p>I think Gabriel recently pointed out an example similar to this. You have a dependent pi (<code>n</code>) after a recursive arg (<code>_ : context ns</code>) and lean doesn't like this</p>



<a name="156411833"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156411833" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156411833">(Jan 19 2019 at 00:37)</a>:</h4>
<p>Ah ok, maybe this could be fixed in Lean 4? :)</p>



<a name="156414862"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156414862" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156414862">(Jan 19 2019 at 01:51)</a>:</h4>
<p>Do I need to do something special to make the semiring-ness of my custom type available to the <code>ring</code> tactic? I have a state like this:</p>
<div class="codehilite"><pre><span></span><span class="n">π</span> <span class="n">π&#39;</span> <span class="o">:</span> <span class="n">mult</span><span class="o">,</span>
<span class="n">π_1</span> <span class="o">:</span> <span class="n">mult</span><span class="o">,</span>
<span class="err">⊢</span> <span class="n">π</span> <span class="bp">*</span> <span class="n">π&#39;</span> <span class="bp">*</span> <span class="n">π_1</span> <span class="bp">=</span> <span class="n">π</span> <span class="bp">*</span> <span class="o">(</span><span class="n">π&#39;</span> <span class="bp">*</span> <span class="n">π_1</span><span class="o">)</span>
</pre></div>


<p>which is provable by <code>exact mult.monoid.mul_assoc π π' π_1</code>, but <code>ring</code> fails. I have <code>instance : semiring mult</code> shown a few lines above.</p>



<a name="156415302"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156415302" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156415302">(Jan 19 2019 at 02:01)</a>:</h4>
<p>you need to prove <code>comm_semiring mult</code></p>



<a name="156554174"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156554174" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156554174">(Jan 21 2019 at 18:36)</a>:</h4>
<p>Given <code>def add (a b: foo): foo := blah</code>, what's the difference between <code>infix </code> ++ <code> := add</code> and <code>instance : has_add foo := ⟨add⟩</code>? If i switch from the former to the latter and replace <code>++</code> with <code>+</code>, my proofs break at the simplification stage, namely addition seems to not be <code>unfold</code>able anymore</p>



<a name="156554210"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156554210" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156554210">(Jan 21 2019 at 18:37)</a>:</h4>
<p>They're very different in the sense that they're using different machinery to figure out what's going on.</p>



<a name="156554280"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156554280" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156554280">(Jan 21 2019 at 18:38)</a>:</h4>
<p>I guess the <code>infix</code> trick is just syntax sugar, whereas the <code>instance</code> approach is using type class inference. Can you give an example of something which breaks?</p>



<a name="156554315"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156554315" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156554315">(Jan 21 2019 at 18:39)</a>:</h4>
<p>I guess if you go via the instance approach then you have an extra layer of unfolding to do. <code>+</code> is <code>has_add.add</code>, which unfolds to your add.</p>



<a name="156554337"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156554337" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156554337">(Jan 21 2019 at 18:39)</a>:</h4>
<p>Maybe that's the answer to your question. If you're trying to unfold things explicitly in the middle of a proof, maybe you have to insert some <code>unfold has_add.add</code>'s</p>



<a name="156554416"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156554416" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156554416">(Jan 21 2019 at 18:40)</a>:</h4>
<p><code>++</code> unfolds directly to your <code>add</code>, whereas <code>+</code> unfolds to <code>has_add.add</code> which unfolds to your add.</p>



<a name="156554455"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156554455" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156554455">(Jan 21 2019 at 18:42)</a>:</h4>
<p>[NB I'm a bit of a CS noob, I don't know if "unfolds" is the right terminology for notation turning into its underlying definition]</p>



<a name="156554512"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156554512" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156554512">(Jan 21 2019 at 18:42)</a>:</h4>
<p>[they might well be syntactically equal rather than just definitionally equal]</p>



<a name="156556743"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156556743" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156556743">(Jan 21 2019 at 19:29)</a>:</h4>
<p>Ah indeed, <code>unfold</code>ing twice does make it work - thanks!</p>



<a name="156571293"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156571293" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156571293">(Jan 22 2019 at 01:12)</a>:</h4>
<p>Does there exist a general tactic for proving <code>f a0 .. an = f b0 .. bn</code> from <code>a0 = b0 .. an = bn</code>?</p>



<a name="156571984"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156571984" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156571984">(Jan 22 2019 at 01:33)</a>:</h4>
<p><code>congr</code></p>



<a name="156572109"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156572109" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156572109">(Jan 22 2019 at 01:36)</a>:</h4>
<p>Hm, I tried <code>congr</code> but it seems to iterate the congruence, which gives me unprovable goals. Namely, I have a goal <code>f (g x) = f (g y)</code> and <code>congr</code> gives me <code>x = y</code> but I just want <code>g x = g y</code>. EDIT: <code>congr' 1</code> works, thx!</p>



<a name="156574364"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156574364" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156574364">(Jan 22 2019 at 02:37)</a>:</h4>
<p>use <code>congr' 1</code> and increase the number until you get a good result</p>



<a name="156647038"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156647038" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156647038">(Jan 22 2019 at 22:43)</a>:</h4>
<p>The issue of <code>has_add.add</code> and its actual value not being definitionally equal makes a lot of my proofs quite ugly - I have to expand definitions first so that the expressions can simplify and then fold them back into the <code>has_add.add</code> version (or <code>has_mul.mul</code>, etc), because all the ring/module/whatever laws only work on those. For example:</p>
<div class="codehilite"><pre><span></span>  <span class="o">{</span> <span class="c">/-</span><span class="cm"></span>
<span class="cm">    case context.cons</span>
<span class="cm">    δ γ γ₁ : precontext,</span>
<span class="cm">    π₁ : mult,</span>
<span class="cm">    T₁ : tp,</span>
<span class="cm">    Γ₁ : context γ₁,</span>
<span class="cm">    ih₁ : ∀ {Γ₂ : context γ₁} {Ξ : matrix γ₁ δ}, vmul (Γ₁ + Γ₂) Ξ = vmul Γ₁ Ξ + vmul Γ₂ Ξ,</span>
<span class="cm">    Γ₂ : context (T₁ :: γ₁),</span>
<span class="cm">    Ξ : matrix (T₁ :: γ₁) δ</span>
<span class="cm">    ⊢ vmul (cons π₁ T₁ Γ₁ + Γ₂) Ξ = vmul (cons π₁ T₁ Γ₁) Ξ + vmul Γ₂ Ξ</span>
<span class="cm">    -/</span>
    <span class="n">cases</span> <span class="err">Γ₂</span> <span class="k">with</span> <span class="bp">_</span> <span class="n">π₂</span> <span class="bp">_</span> <span class="err">Γ₂</span><span class="o">,</span>
    <span class="c1">-- unfold</span>
    <span class="n">unfold</span> <span class="n">vmul</span> <span class="n">has_add</span><span class="bp">.</span><span class="n">add</span> <span class="kn">context</span><span class="bp">.</span><span class="n">add</span> <span class="n">has_scalar</span><span class="bp">.</span><span class="n">smul</span> <span class="kn">context</span><span class="bp">.</span><span class="n">smul</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
    <span class="n">simp</span> <span class="bp">*</span><span class="o">,</span>
    <span class="c1">-- fold back</span>
    <span class="k">let</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">vmul</span> <span class="err">Γ₁</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">tp</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">γ₁</span> <span class="err">∋</span> <span class="n">U</span><span class="o">),</span> <span class="err">Ξ</span> <span class="n">U</span> <span class="o">(</span><span class="n">SVar</span> <span class="n">x</span><span class="o">)),</span>
    <span class="k">let</span> <span class="n">b</span> <span class="o">:=</span> <span class="n">vmul</span> <span class="err">Γ₂</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">tp</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">γ₁</span> <span class="err">∋</span> <span class="n">U</span><span class="o">),</span> <span class="err">Ξ</span> <span class="n">U</span> <span class="o">(</span><span class="n">SVar</span> <span class="n">x</span><span class="o">)),</span>
    <span class="n">change</span>
      <span class="o">(</span><span class="n">π₁</span> <span class="bp">+</span> <span class="n">π₂</span><span class="o">)</span> <span class="err">•</span> <span class="o">(</span><span class="err">Ξ</span> <span class="n">T₁</span> <span class="n">ZVar</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span>
      <span class="bp">=</span>
      <span class="o">(</span><span class="n">π₁</span><span class="err">•</span><span class="o">(</span><span class="err">Ξ</span> <span class="n">T₁</span> <span class="n">ZVar</span><span class="o">)</span> <span class="bp">+</span> <span class="n">a</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">π₂</span><span class="err">•</span><span class="o">(</span><span class="err">Ξ</span> <span class="n">T₁</span> <span class="n">ZVar</span><span class="o">)</span> <span class="bp">+</span> <span class="n">b</span><span class="o">),</span>
    <span class="c1">-- simplify using monoid laws</span>
    <span class="n">simp</span> <span class="o">[</span><span class="kn">context</span><span class="bp">.</span><span class="n">add_smul</span><span class="o">,</span> <span class="kn">context</span><span class="bp">.</span><span class="n">add_assoc</span><span class="o">]</span> <span class="o">},</span>
</pre></div>


<p>is there some tactic or such that I could apply to do this automatically?</p>



<a name="156647545"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156647545" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156647545">(Jan 22 2019 at 22:51)</a>:</h4>
<p>This is what simp lemmas are for</p>



<a name="156647677"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156647677" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156647677">(Jan 22 2019 at 22:53)</a>:</h4>
<p>If you define <code>add x (y :: z) := y :: add x z</code>, for example, and then install <code>add</code> as a <code>has_add</code> instance, then you can prove <code>x + (y :: z) = y :: (x + z)</code> by rfl, and you should state this as a simp lemma</p>



<a name="156647754"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156647754" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156647754">(Jan 22 2019 at 22:54)</a>:</h4>
<p>You should not ever have to unfold <code>has_add.add</code></p>



<a name="156647865"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156647865" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156647865">(Jan 22 2019 at 22:56)</a>:</h4>
<p>Hm okay, so basically I need to "lift" the behaviour of my functions from the custom definition to one using <code>has_op.op</code>? I'll try</p>



<a name="156648686"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156648686" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156648686">(Jan 22 2019 at 23:09)</a>:</h4>
<p>Is it fine to unfold <code>has_zero.zero</code> though? My definition of <code>0</code> for this type is</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">zeros</span><span class="o">:</span> <span class="bp">Π</span> <span class="n">γ</span><span class="o">,</span> <span class="kn">context</span> <span class="n">γ</span>
<span class="bp">|</span> <span class="o">[]</span> <span class="o">:=</span> <span class="n">nil</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">T</span><span class="bp">::</span><span class="n">δ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">cons</span> <span class="mi">0</span> <span class="n">T</span> <span class="o">(</span><span class="n">zeros</span> <span class="n">δ</span><span class="o">)</span>
</pre></div>


<p>and I need the <code>cons</code> to prove <code>0+Γ=Γ</code></p>



<a name="156649254"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156649254" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156649254">(Jan 22 2019 at 23:21)</a>:</h4>
<p>In any case this is pretty awesome, all my proofs have shortened by half now without the unfolding, thanks a lot!</p>



<a name="156653719"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/156653719" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#156653719">(Jan 23 2019 at 00:37)</a>:</h4>
<p>For this, you should decide whether you prefer to write the empty context as <code>0</code> or <code>[]</code>, and write a simp lemma like <code>0 = []</code> if you want to get rid of the 0 everywhere. In this case you should also make sure that all your other simp lemmas use the "preferred form" of this element on the LHS</p>



<a name="159247553"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159247553" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159247553">(Feb 23 2019 at 22:04)</a>:</h4>
<p>What's the closest thing to the <code>ring</code> tactic when what I have is not a commutative semiring, e.g. just a monoid? Say my theorems are provable simply by repeated application of monoid or group laws, what tactic could I use?</p>



<a name="159247675"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159247675" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159247675">(Feb 23 2019 at 22:08)</a>:</h4>
<p>If it's abelian then <code>abel</code> might work, and if it's not then you're best going with <code>simp</code> I think</p>



<a name="159247686"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159247686" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159247686">(Feb 23 2019 at 22:09)</a>:</h4>
<p>You might have to write <code>simp [mul_assoc]</code> maybe, I can't remember if mul_assoc is a simp lemma</p>



<a name="159247850"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159247850" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159247850">(Feb 23 2019 at 22:15)</a>:</h4>
<p><code>abel</code> worked :) thanks. And no, <code>mul_assoc</code> doesn't seem to be a simp lemma.</p>



<a name="159250591"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159250591" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159250591">(Feb 23 2019 at 23:41)</a>:</h4>
<p>Say I would like to work with a particular module which uses a variable <code>v</code> instantiated over a concrete <code>v</code>. For example, a file <code>foo.lean</code> could first declare <code>variable {v: Type}</code> and then use <code>v</code> in all definitions/lemmas in the file. I would like to import everything in <code>foo</code> instantiated with e.g. <code>nat</code> for <code>v</code>. This would be equivalent to partially applying everything in the file to <code>nat</code>. Is such a thing possible without manually redefining everything?</p>



<a name="159250640"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159250640" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159250640">(Feb 23 2019 at 23:42)</a>:</h4>
<p>You could write a tactic to do it</p>



<a name="159250642"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159250642" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159250642">(Feb 23 2019 at 23:43)</a>:</h4>
<p>But, why?</p>



<a name="159250779"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159250779" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159250779">(Feb 23 2019 at 23:47)</a>:</h4>
<p>I would like to do this in order to:<br>
a) Avoid type class search by giving it the right instance from the start.<br>
b) Make inference work. I found that making one of my modules more generic (I changed it from using a particular semiring to being generic over arbitrary semirings) broke inference in a lot of places where I use this module because it no longer knows which semiring to pick and I don't want to specify it everywhere manually.<br>
For a more concrete example which is close to what I'm doing, say I define a list <code>inductive slist {α: Type} [semiring α]: Type</code> which is a list the elements of which are also elements of a semiring and then derive a bunch of theorems about the behaviour of such a list under some transformations. I would then like to use all of these theorems only with a particular choice of <code>α</code>, even though the <code>slist</code> file/module is generic.</p>



<a name="159251390"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159251390" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159251390">(Feb 24 2019 at 00:06)</a>:</h4>
<p>But if you're using <code>{alpha  : Type}</code> correctly, then Lean should be able to infer what alpha is from subsequent terms, so you don't need to change it to nat, Lean will just guess it for you and do it itself. Have I missed the point?</p>



<a name="159251642"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159251642" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159251642">(Feb 24 2019 at 00:15)</a>:</h4>
<p>"no longer knows which semiring to pick" this sounds fishy</p>



<a name="159251765"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159251765" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159251765">(Feb 24 2019 at 00:18)</a>:</h4>
<p>The <code>{}</code> brackets aren't type class search, they are dealt with using unification.</p>



<a name="159251957"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159251957" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159251957">(Feb 24 2019 at 00:23)</a>:</h4>
<p>You're right, Lean can still unify it and find the class instance - I was perhaps a bit rash there when figuring out what's going on. However, tactic state updates that used to take about 300ms when I was working over a concrete object now take several seconds, making it somewhat painful to work interactively. I was hoping that reinstantiating all the lemmas over the concrete objects again would alleviate this.</p>



<a name="159252010"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159252010" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159252010">(Feb 24 2019 at 00:24)</a>:</h4>
<p>Again, if you're talking about <code>{}</code>s then this isn't to do with classes, it's something else.</p>



<a name="159252015"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159252015" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159252015">(Feb 24 2019 at 00:24)</a>:</h4>
<p>But I agree that sometimes things get slow, and it can sometimes be quite difficult to find out why.</p>



<a name="159252030"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159252030" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159252030">(Feb 24 2019 at 00:25)</a>:</h4>
<p>I'm talking about both - the <code>{alpha}</code> variable being unified and <code>[semiring alpha]</code> which needs a class instance.</p>



<a name="159252032"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159252032" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159252032">(Feb 24 2019 at 00:25)</a>:</h4>
<p>Aah yes, that is a class instance. Sorry.</p>



<a name="159252038"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159252038" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159252038">(Feb 24 2019 at 00:25)</a>:</h4>
<p>Does it help to actually put the type class instances explicitly into Lean at the top of the file?</p>



<a name="159252086"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159252086" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159252086">(Feb 24 2019 at 00:26)</a>:</h4>
<p>e.g. you were working with a random alpha assumed to be a semiring, and now you're working with nat, so you could put <code>instance : semiring nat := by apply_instance</code> at the top of the file. However that instance should already be there so I can't imagine it will help :-/</p>



<a name="159252098"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159252098" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159252098">(Feb 24 2019 at 00:27)</a>:</h4>
<p>oh this can't be the problem. Unless your actual instances are hard to find.</p>



<a name="159252205"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159252205" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159252205">(Feb 24 2019 at 00:30)</a>:</h4>
<p>I couldn't say for sure without benchmarking, but I would guess that the two implicit arguments I added to <em>everything</em> makes it appreciably more difficult to carry out elaboration.</p>



<a name="159252209"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159252209" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159252209">(Feb 24 2019 at 00:30)</a>:</h4>
<p>I'm afraid you'll have to speak to a computer scientist about this one :-)</p>



<a name="159252211"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159252211" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159252211">(Feb 24 2019 at 00:31)</a>:</h4>
<p>In maths, everything runs instantly.</p>



<a name="159252220"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159252220" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159252220">(Feb 24 2019 at 00:31)</a>:</h4>
<p>You should consider moving to the Platonic universe.</p>



<a name="159252221"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159252221" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159252221">(Feb 24 2019 at 00:31)</a>:</h4>
<p>We don't have engineering troubles there.</p>



<a name="159252992"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159252992" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159252992">(Feb 24 2019 at 00:55)</a>:</h4>
<p>Oh okay, I ran into the problem that made me think unification fails again. In fact, I believe it could eventually succeed, but currently <code>simp *</code> takes so long it times out, while it would work fine before I added the implicit parameters to one of my modules.</p>



<a name="159253178"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159253178" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159253178">(Feb 24 2019 at 01:00)</a>:</h4>
<p>If you want to try to speed things up yourself, you could take a look at what simp was doing before and after by putting logging on.</p>



<a name="159253197"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159253197" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159253197">(Feb 24 2019 at 01:01)</a>:</h4>
<p><code>set_option trace.simplify.rewrite true</code> is what you need to see what simp is doing.</p>



<a name="159302724"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159302724" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159302724">(Feb 24 2019 at 23:55)</a>:</h4>
<p>Does Lean have an equivalent of Haskell's/Agda's <code>where</code>? E.g. <code>def abc := two where two := 2</code></p>



<a name="159303137"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159303137" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159303137">(Feb 25 2019 at 00:06)</a>:</h4>
<p>no</p>



<a name="159303140"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159303140" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159303140">(Feb 25 2019 at 00:06)</a>:</h4>
<p>it messes with elaboration order</p>



<a name="159303855"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159303855" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159303855">(Feb 25 2019 at 00:27)</a>:</h4>
<p>Could you <em>elaborate</em> on what the issue is?</p>



<a name="159304378"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159304378" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159304378">(Feb 25 2019 at 00:43)</a>:</h4>
<p>Lean does pretty much all elaboration from left to right. If you use a postfix <code>let</code>, then the type and value of the defined variable will not be known when it is needed</p>



<a name="159304384"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159304384" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159304384">(Feb 25 2019 at 00:43)</a>:</h4>
<p>Is this stupid? Yes. I think lean 4 will relax the elaboration order a bit to allow stuff like this to work</p>



<a name="159645662"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159645662" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159645662">(Feb 28 2019 at 19:47)</a>:</h4>
<p>Does anyone know where the extra argument comes from (I do know <code>(n = 0)</code> is probably not valid syntax for a hypothesis)?</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">foo_fn</span> <span class="o">:=</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">),</span> <span class="n">string</span>

<span class="bp">#</span><span class="kn">print</span> <span class="n">foo_fn</span>
<span class="c">/-</span><span class="cm"> def foo_fn : Type :=</span>
<span class="cm">   ℕ → Π (n : ℕ), n = 0 → string -/</span>
<span class="c1">-- ^ what is this?</span>
</pre></div>



<a name="159645923"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159645923" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159645923">(Feb 28 2019 at 19:51)</a>:</h4>
<p>Do you have a <code>variable</code> somewhere in your file?</p>



<a name="159646059"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159646059" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159646059">(Feb 28 2019 at 19:52)</a>:</h4>
<p>Oh no actually. <code>Π (n = 0), _</code> is shorthand for <code>Π n, n = 0 -&gt; _</code></p>



<a name="159646200"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159646200" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159646200">(Feb 28 2019 at 19:54)</a>:</h4>
<p>Ah so it <em>is</em> valid syntax. Thanks!</p>



<a name="159657235"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159657235" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159657235">(Feb 28 2019 at 22:08)</a>:</h4>
<p>I would like to define a subtype of Lean functions like so:</p>
<div class="codehilite"><pre><span></span><span class="bp">@</span><span class="o">[</span><span class="kn">reducible</span><span class="o">]</span>
<span class="n">def</span> <span class="n">foo_fn</span> <span class="o">:=</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span>

<span class="kn">inductive</span> <span class="n">is_foo</span><span class="o">:</span> <span class="n">foo_fn</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">Id</span><span class="o">:</span> <span class="n">is_foo</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">Rec</span><span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">f</span><span class="o">:</span> <span class="n">foo_fn</span><span class="o">},</span> <span class="n">is_foo</span> <span class="n">f</span> <span class="bp">→</span> <span class="n">is_foo</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>

<span class="kn">structure</span> <span class="n">foo</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">f</span><span class="o">:</span> <span class="n">foo_fn</span><span class="o">)</span>
<span class="o">(</span><span class="n">hf</span><span class="o">:</span> <span class="n">is_foo</span> <span class="n">f</span><span class="o">)</span>
</pre></div>


<p>Where a <code>foo</code> is a <code>ℕ → ℕ</code> together with a proof that it's a valid kind of <code>foo_fn</code>, i.e. either the identity or some other <code>foo</code> plus 1. Then, I would also like to carry out transformations on the <code>foo</code> structure by modifying the <code>foo_fn</code> and adjusting its proof. Unfortunately the <code>foo_fn</code> is opaque as just a Lean function, so to actually do this it seems I need the following:</p>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="n">foo&#39;</span><span class="o">:</span> <span class="n">foo_fn</span> <span class="bp">→</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="n">Id</span><span class="o">:</span> <span class="n">foo&#39;</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">Rec</span><span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">f</span><span class="o">:</span> <span class="n">foo_fn</span><span class="o">},</span> <span class="n">foo&#39;</span> <span class="n">f</span> <span class="bp">→</span> <span class="n">foo&#39;</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>


<p>My question is, can <code>foo'</code> be considered equivalent to <code>foo</code> in the sense that I can extract <code>f: foo_fn</code> out of <code>foo' f</code> and use it as I would use the <code>f</code> member of the structure <code>foo</code>?</p>



<a name="159663701"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159663701" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159663701">(Feb 28 2019 at 23:42)</a>:</h4>
<p>I don't understand the question. Are you not happy with this sort of thing:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">foo_fn</span> <span class="o">:=</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span>

<span class="kn">inductive</span> <span class="n">is_foo</span><span class="o">:</span> <span class="n">foo_fn</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">Id</span><span class="o">:</span> <span class="n">is_foo</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">Rec</span><span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">f</span><span class="o">:</span> <span class="n">foo_fn</span><span class="o">},</span> <span class="n">is_foo</span> <span class="n">f</span> <span class="bp">→</span> <span class="n">is_foo</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>

<span class="kn">structure</span> <span class="n">foo</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">f</span><span class="o">:</span> <span class="n">foo_fn</span><span class="o">)</span>
<span class="o">(</span><span class="n">hf</span><span class="o">:</span> <span class="n">is_foo</span> <span class="n">f</span><span class="o">)</span>

<span class="n">def</span> <span class="n">add_one</span> <span class="o">:</span> <span class="n">foo</span> <span class="bp">→</span> <span class="n">foo</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="bp">⟨</span><span class="n">f</span><span class="o">,</span> <span class="n">hf</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">is_foo</span><span class="bp">.</span><span class="n">Rec</span> <span class="n">hf</span><span class="bp">⟩</span>
</pre></div>


<p>?</p>



<a name="159798929"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159798929" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159798929">(Mar 02 2019 at 14:09)</a>:</h4>
<p>The problem is that I couldn't redefine <code>add_one</code> like this:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">add_one&#39;</span><span class="o">:</span> <span class="n">foo</span> <span class="bp">→</span> <span class="n">foo</span>
<span class="c">/-</span><span class="cm"> induction tactic failed, recursor &#39;is_foo.dcases_on&#39; can only eliminate into Prop -/</span>
<span class="bp">|</span> <span class="bp">⟨</span><span class="n">f</span><span class="o">,</span> <span class="n">is_foo</span><span class="bp">.</span><span class="n">Id</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="bp">⟨λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">is_foo</span><span class="bp">.</span><span class="n">Rec</span> <span class="n">is_foo</span><span class="bp">.</span><span class="n">Id</span><span class="bp">⟩</span>
<span class="bp">|</span> <span class="bp">⟨</span><span class="n">f</span><span class="o">,</span> <span class="n">is_foo</span><span class="bp">.</span><span class="n">Rec</span> <span class="n">hf&#39;</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="bp">⟨λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">is_foo</span><span class="bp">.</span><span class="n">Rec</span> <span class="o">(</span><span class="n">is_foo</span><span class="bp">.</span><span class="n">Rec</span> <span class="n">hf&#39;</span><span class="o">)</span><span class="bp">⟩</span>
</pre></div>


<p>And in general any definition which tries to extract an inner <code>foo_fn</code> out of an <code>is_foo</code> constructor will fail, but I need to do that sometimes in order to transform the <code>foo_fn</code>. So far the <code>inductive foo': foo_fn -&gt; Type</code> definition seems to work well though.</p>



<a name="159799119"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159799119" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159799119">(Mar 02 2019 at 14:15)</a>:</h4>
<p>Aah I see; the recursor for <code>is_foo</code> only eliminates into <code>Prop</code>. Yeah you need an expert, not a mathematician :-)</p>



<a name="159799673"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159799673" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159799673">(Mar 02 2019 at 14:26)</a>:</h4>
<p>The reason this isn't possible in general, is that by proof irrelevance <code>is_foo.Id = is_foo.rec _</code> if the proofs have the same type, so I cannot define functions that treat these two cases differently.</p>
<p>Since both cases are equal in your function, you can write</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">add_one&#39;</span><span class="o">:</span> <span class="n">foo</span> <span class="bp">→</span> <span class="n">foo</span>
<span class="bp">|</span> <span class="bp">⟨</span><span class="n">f</span><span class="o">,</span> <span class="n">h</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="bp">⟨λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">is_foo</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">h</span> <span class="o">(</span><span class="n">is_foo</span><span class="bp">.</span><span class="n">Rec</span> <span class="n">is_foo</span><span class="bp">.</span><span class="n">Id</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">hf&#39;</span><span class="o">,</span> <span class="n">is_foo</span><span class="bp">.</span><span class="n">Rec</span> <span class="o">(</span><span class="n">is_foo</span><span class="bp">.</span><span class="n">Rec</span> <span class="n">hf&#39;</span><span class="o">))</span><span class="bp">⟩</span>
</pre></div>



<a name="159799742"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159799742" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159799742">(Mar 02 2019 at 14:28)</a>:</h4>
<p>Usually this form is preferred however</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">add_one&#39;</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">foo</span><span class="o">)</span> <span class="o">:</span> <span class="n">foo</span> <span class="o">:=</span>
 <span class="bp">⟨λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span><span class="bp">.</span><span class="mi">1</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">is_foo</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">f</span><span class="bp">.</span><span class="mi">2</span> <span class="o">(</span><span class="n">is_foo</span><span class="bp">.</span><span class="n">Rec</span> <span class="n">is_foo</span><span class="bp">.</span><span class="n">Id</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">hf&#39;</span><span class="o">,</span> <span class="n">is_foo</span><span class="bp">.</span><span class="n">Rec</span> <span class="o">(</span><span class="n">is_foo</span><span class="bp">.</span><span class="n">Rec</span> <span class="n">hf&#39;</span><span class="o">))</span><span class="bp">⟩</span>
</pre></div>



<a name="159799766"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159799766" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159799766">(Mar 02 2019 at 14:30)</a>:</h4>
<p>The second <code>add_one'</code> will definitionally reduce in a nice way when applied to an argument <code>f : foo</code>, wherease the first definition will only reduce when applied to an argument of the form <code>⟨f, h⟩ : foo</code>. This makes the first definition harder to work with in proofs.</p>



<a name="159801343"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159801343" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159801343">(Mar 02 2019 at 15:12)</a>:</h4>
<p>Thanks!</p>



<a name="159866654"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159866654" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> drocta <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159866654">(Mar 03 2019 at 21:57)</a>:</h4>
<p>I am trying to say something about free objects, using an existing definition of concrete categories in mathlib.<br>
I couldn't find an existing definition in mathlib for free objects (edit: really, I just need to define free objects over a set or type with one element), so I was going to define them myself.<br>
I have mathlib installed using leanpkg, and it looks like because I have lean version 3.4.1 installed, leanpkg used the branch with that name from the mathlib repository.<br>
However, I notice that the master branch and the 3.4.1 branch have the definition of concrete categories in different places.<br>
Should I go ahead and use the version which is defined in the 3.4.1 branch, and is in the category.lean file, or ought I somehow use the version in the concrete_category.lean version currently in the master branch?</p>



<a name="159868739"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159868739" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159868739">(Mar 03 2019 at 22:56)</a>:</h4>
<p>The master branch of mathlib doesn't work with Lean 3.4.1.</p>



<a name="159868775"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159868775" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159868775">(Mar 03 2019 at 22:58)</a>:</h4>
<p>If I were you I'd use 3.4.2 (probably the last release of Lean 3) and mathlib master. If you install elan then it will all work by magic and you won't have to worry.</p>



<a name="159870797"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159870797" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> drocta <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159870797">(Mar 03 2019 at 23:56)</a>:</h4>
<p>thank you<br>
(edit 7:33 : that worked for me)</p>



<a name="159876903"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159876903" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> drocta <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159876903">(Mar 04 2019 at 02:48)</a>:</h4>
<p>I'm not sure where to find the documentation on out_param . Could you point me towards it?<br>
the definition in core.lean looks like it is just an identity function, but I assume I'm missing something, seeing as I think the lack of it just caused me to get a type error.</p>



<a name="159884489"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159884489" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> drocta <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159884489">(Mar 04 2019 at 03:50)</a>:</h4>
<p>found a way to do what I was trying to do which didn't require that, so nvm I guess?</p>



<a name="159891658"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159891658" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159891658">(Mar 04 2019 at 07:03)</a>:</h4>
<p><code>out_param</code> is something to do with telling Lean's elaborator what order to do type inference, or something like that. I'm afraid the only documentation that I know of is when I asked for details about it on either this chat or at the old chat, and Mario Carneiro explained it.</p>



<a name="159893666"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159893666" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159893666">(Mar 04 2019 at 07:52)</a>:</h4>
<p><a href="https://gitter.im/leanprover_public/Lobby?at=5a6e31685a9ebe4f75e77351" target="_blank" title="https://gitter.im/leanprover_public/Lobby?at=5a6e31685a9ebe4f75e77351">https://gitter.im/leanprover_public/Lobby?at=5a6e31685a9ebe4f75e77351</a></p>



<a name="159971264"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/159971264" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> drocta <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#159971264">(Mar 05 2019 at 02:35)</a>:</h4>
<blockquote>
<p><code>out_param</code> is something to do with telling Lean's elaborator what order to do type inference, or something like that. I'm afraid the only documentation that I know of is when I asked for details about it on either this chat or at the old chat, and Mario Carneiro explained it.<br>
<a href="https://gitter.im/leanprover_public/Lobby?at=5a6e31685a9ebe4f75e77351" target="_blank" title="https://gitter.im/leanprover_public/Lobby?at=5a6e31685a9ebe4f75e77351">https://gitter.im/leanprover_public/Lobby?at=5a6e31685a9ebe4f75e77351</a></p>
</blockquote>
<p>Ah! Thank you!</p>



<a name="160008880"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/160008880" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#160008880">(Mar 05 2019 at 14:51)</a>:</h4>
<p>What is the meaning of this error: <code>rewrite tactic failed, motive is not type correct</code>?<br>
I get it when trying to apply <code>rw [sesh_tp.dual_end_recv]</code> where <code>sesh_tp.dual_end_recv : sesh_tp.dual End? = End!</code> to the following state:</p>
<div class="codehilite"><pre><span></span><span class="err">⊢</span> <span class="err">⟦</span><span class="mi">1</span><span class="bp">⬝</span><span class="err">↑</span><span class="o">(</span><span class="n">sesh_tp</span><span class="bp">.</span><span class="n">dual</span> <span class="n">End</span><span class="err">?</span><span class="o">)</span><span class="err">⟧</span><span class="bp">::</span><span class="err">?</span><span class="n">m_1</span> <span class="bp">=</span> <span class="n">matrix</span><span class="bp">.</span><span class="n">identity</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">sesh_tp</span><span class="bp">.</span><span class="n">dual</span> <span class="n">End</span><span class="err">?</span><span class="o">)</span> <span class="bp">::</span> <span class="n">γ</span><span class="o">)</span> <span class="err">↑</span><span class="n">End</span><span class="bp">!</span> <span class="o">(</span><span class="n">ZVar</span> <span class="n">γ</span> <span class="err">↑</span><span class="n">End</span><span class="bp">!</span><span class="o">)</span>
</pre></div>


<p>I thought that <code>rw</code> should be able to simply replace the instances of <code>sesh_tp.dual End?</code>.<br>
(<code>End?</code> and <code>End!</code> are constructors for the <code>sesh_tp</code> inductive type.)</p>



<a name="160012954"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/160012954" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#160012954">(Mar 05 2019 at 15:39)</a>:</h4>
<p>We need an emoji for this error</p>



<a name="160013094"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/160013094" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#160013094">(Mar 05 2019 at 15:41)</a>:</h4>
<p>It means that doing the rewrite will give you an expression which doesn't type check, presumably because you had a dependent type and rewrote the parameter. The classical example is:</p>
<div class="codehilite"><pre><span></span><span class="kn">set_option</span> <span class="n">pp</span><span class="bp">.</span><span class="kn">notation</span> <span class="n">false</span>
<span class="kn">set_option</span> <span class="n">pp</span><span class="bp">.</span><span class="n">implicit</span> <span class="n">true</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">n</span> <span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">))</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">))</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="n">add_comm</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>

  <span class="n">sorry</span>
<span class="kn">end</span>
</pre></div>



<a name="160013133"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/160013133" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#160013133">(Mar 05 2019 at 15:41)</a>:</h4>
<p>Try understanding this simple example and then your complicated one</p>



<a name="160015041"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/160015041" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#160015041">(Mar 05 2019 at 16:04)</a>:</h4>
<p>Oh right, I get the issue, thanks! But if you <code>rw add_comm</code> both sides of the equation, it should still type check, no? I managed to solve my problem by explicitly stating the type of the goal with both instances of <code>sesh_tp.dual End?</code> rewritten to <code>End!</code>. Could <code>rw</code> not check the type after doing <em>both</em> rewrites?</p>



<a name="160024039"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/160024039" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#160024039">(Mar 05 2019 at 17:52)</a>:</h4>
<p><code>rw</code> is what it is. If you want more you can try lots of tricks, e.g. <code>erw</code> or <code>simp only</code> or using <code>conv</code> mode -- we have lots of workarounds :-)  But this is dependent type theory, random rewriting can create terms which are not type correct and Lean pulls the plug when this happens.</p>



<a name="160029879"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/160029879" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Plam <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#160029879">(Mar 05 2019 at 18:58)</a>:</h4>
<p>Is there a way to make use of the fact that pattern matches in a theorem have the same structure as in a definition? In particular, that given a catchall pattern match later in the theorem, it can't be the case that the thing being matched against matches one of the earlier pattern matches?</p>
<p>Concretely, when proving <code>simp_const_eq</code> below, I want to match on <code>plus (const a) (const b)</code>, <code>times (const a) (const b)</code> and then a catchall. Is this possible, or do I just need some extra cases that I can rfl my way through? </p>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="n">aexpr</span> <span class="o">:</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="n">const</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">aexpr</span>
<span class="bp">|</span> <span class="n">var</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">aexpr</span>
<span class="bp">|</span> <span class="n">plus</span> <span class="o">:</span> <span class="n">aexpr</span> <span class="bp">→</span> <span class="n">aexpr</span> <span class="bp">→</span> <span class="n">aexpr</span>
<span class="bp">|</span> <span class="n">times</span> <span class="o">:</span> <span class="n">aexpr</span> <span class="bp">→</span> <span class="n">aexpr</span> <span class="bp">→</span> <span class="n">aexpr</span>

<span class="kn">open</span> <span class="n">aexpr</span>

<span class="n">def</span> <span class="n">aeval</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">aexpr</span> <span class="bp">→</span> <span class="bp">ℕ</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">const</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span> <span class="n">n</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">var</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span> <span class="n">v</span> <span class="n">n</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">plus</span> <span class="n">e₁</span> <span class="n">e₂</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">aeval</span> <span class="n">e₁</span> <span class="bp">+</span> <span class="n">aeval</span> <span class="n">e₂</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">times</span> <span class="n">e₁</span> <span class="n">e₂</span><span class="o">)</span> <span class="o">:=</span> <span class="n">aeval</span> <span class="n">e₁</span> <span class="bp">*</span> <span class="n">aeval</span> <span class="n">e₂</span>

<span class="n">def</span> <span class="n">simp_const</span> <span class="o">:</span> <span class="n">aexpr</span> <span class="bp">→</span> <span class="n">aexpr</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">plus</span> <span class="o">(</span><span class="n">const</span> <span class="n">n₁</span><span class="o">)</span> <span class="o">(</span><span class="n">const</span> <span class="n">n₂</span><span class="o">))</span> <span class="o">:=</span> <span class="n">const</span> <span class="o">(</span><span class="n">n₁</span> <span class="bp">+</span> <span class="n">n₂</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">times</span> <span class="o">(</span><span class="n">const</span> <span class="n">n₁</span><span class="o">)</span> <span class="o">(</span><span class="n">const</span> <span class="n">n₂</span><span class="o">))</span> <span class="o">:=</span> <span class="n">const</span> <span class="o">(</span><span class="n">n₁</span> <span class="bp">*</span> <span class="n">n₂</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">e</span> <span class="o">:=</span> <span class="n">e</span>

<span class="kn">theorem</span> <span class="n">simp_const_eq</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="n">e</span> <span class="o">:</span> <span class="n">aexpr</span><span class="o">,</span> <span class="n">aeval</span> <span class="n">v</span> <span class="o">(</span><span class="n">simp_const</span> <span class="n">e</span><span class="o">)</span> <span class="bp">=</span> <span class="n">aeval</span> <span class="n">v</span> <span class="n">e</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>



<a name="161024741"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161024741" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161024741">(Mar 18 2019 at 01:48)</a>:</h4>
<p>While I don't think this is possible right now (correct me if I'm wrong), would it in principle be possible to extend Lean with support for custom type unification procedures? The way I defined some inductive families requires me to do <em>a lot</em> of conversions from terms of type <code>T a</code> to a type <code>T b</code> that Lean expects, where <code>a = b</code>. All of these are resolvable more or less with a single tactic, and it would be awesome if I could just teach Lean a heuristic like "If type U is expected and a term of type T is given, see if T or U (or both) contain a specific expression. If so, try to use this tactic to convert T to U".</p>



<a name="161036029"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161036029" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161036029">(Mar 18 2019 at 07:15)</a>:</h4>
<p>Search the chat for "unification hints"</p>



<a name="161036030"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161036030" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161036030">(Mar 18 2019 at 07:15)</a>:</h4>
<p>I'm hoping that might be exactly the thing you want. Note however that we don't have much experience with them. Unification hints haven't been used outside of a demo, as far as I am aware.</p>



<a name="161036875"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161036875" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161036875">(Mar 18 2019 at 07:34)</a>:</h4>
<p>If by <code>a = b</code> you mean you have a proof that they are equal, not that they are defeq, then unification hints won't help, and a lot of things will get more complicated</p>



<a name="161053399"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161053399" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161053399">(Mar 18 2019 at 12:38)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> indeed by <code>a = b</code> I mean <code>eq a b</code>. What I end up having in the actual terms is a bunch of <code>eq.mpr</code>s which do the conversions from <code>T a</code> to <code>T b</code>. My idea here was, could I not just tell Lean to try to insert those conversions automatically when it fails to unify types?</p>



<a name="161053547"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161053547" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161053547">(Mar 18 2019 at 12:41)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> I was looking into those but it seems they are not powerful enough to modify the term in question which is what seems to be needed when the types are not algorithmically definitonally equal according to Lean. Moreover, some of the problems that Coq resolves using Canonical Structures, which seem to be a type of unification hint, Lean resolves using type class inference.</p>



<a name="161055174"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161055174" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161055174">(Mar 18 2019 at 13:04)</a>:</h4>
<p>There was some discussion about these issues at Lean Together in January. Note that Lean 4 will apparently be removing unification hints, perhaps because nobody uses them in Lean.</p>



<a name="161055192"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161055192" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161055192">(Mar 18 2019 at 13:04)</a>:</h4>
<p>The speakers who talked about it were Assia Mahboubi and Cyril Cohen, and I am pretty sure their slides are online and linked to here somewhere.</p>



<a name="161055258"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161055258" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161055258">(Mar 18 2019 at 13:05)</a>:</h4>
<p>See: <br>
<a href="#narrow/stream/113488-general/topic/unification.20hints/near/158613068" title="#narrow/stream/113488-general/topic/unification.20hints/near/158613068">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unification.20hints/near/158613068</a></p>



<a name="161059451"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161059451" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161059451">(Mar 18 2019 at 14:01)</a>:</h4>
<p>We also ran into this issue in Flypitch. I found it helpful to have a library of <code>simp</code> lemmas to normalize the location of the casts. I also had the occasional odd experience of being unable to prove an instance of a cast lemma by <code>refl</code> inside a larger proof, but was able to prove that lemma by <code>refl</code> separately, mark it as <code>simp</code>, and then <code>simp</code> would work...</p>



<a name="161072189"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161072189" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161072189">(Mar 18 2019 at 16:18)</a>:</h4>
<blockquote>
<p>Note that Lean 4 will apparently be removing unification hints, perhaps because nobody uses them in Lean.</p>
</blockquote>
<p>Is this really clear? I thought that Assia and Cyril provided ample proofs that this would be a tragic mistake. I understand they were removed at the beginning of Lean 4, but many things were removed, and some of them will return at some point. Is there any update on this <span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span>?</p>



<a name="161072430"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161072430" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161072430">(Mar 18 2019 at 16:21)</a>:</h4>
<p>no</p>



<a name="161537406"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161537406" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161537406">(Mar 23 2019 at 18:30)</a>:</h4>
<p>Why does <code>auto_param</code> seem to not work as an implicit argument? I'd like to have a constructor like <code>foo {h: auto_param some_prop ``mytac}: Foo</code> and match on it like <code>| foo</code> rather than <code>| (foo _)</code>, but if I put the <code>auto_param</code> in curly brackets, it seems to not actually run the tactic when using <code>def abc := foo</code> - it fails with "failed to synthesize placeholder" rather than trying to run <code>mytac</code>.</p>



<a name="161612010"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161612010" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> drocta <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161612010">(Mar 25 2019 at 03:36)</a>:</h4>
<p>I want the unique function from the type <code>empty</code> to another type. I thought I might be able to do that with <code>empty.rec</code> or <code>empty.rec_on</code> , (going off of the tutorial's use of that with days of the week), but it looks like those both expect to be given a function from empty as an argument, when that is what I'm trying to get.<br>
What am I missing?</p>



<a name="161616137"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161616137" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161616137">(Mar 25 2019 at 05:38)</a>:</h4>
<p>I think this is what you want:</p>
<div class="codehilite"><pre><span></span><span class="n">src</span><span class="bp">/</span><span class="n">logic</span><span class="bp">/</span><span class="n">basic</span><span class="bp">.</span><span class="n">lean</span><span class="o">:</span><span class="n">def</span> <span class="n">empty</span><span class="bp">.</span><span class="n">elim</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="n">Sort</span><span class="bp">*</span><span class="o">}</span> <span class="o">:</span> <span class="n">empty</span> <span class="bp">→</span> <span class="n">C</span><span class="bp">.</span>
</pre></div>



<a name="161817781"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161817781" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161817781">(Mar 27 2019 at 00:51)</a>:</h4>
<p><code>congr</code> gave me the following goal:</p>
<div class="codehilite"><pre><span></span><span class="n">γ</span> <span class="o">:</span> <span class="n">precontext</span><span class="o">,</span>
<span class="err">Γ</span> <span class="o">:</span> <span class="kn">context</span> <span class="n">γ</span><span class="o">,</span>
<span class="n">M</span> <span class="o">:</span> <span class="bp">@</span><span class="n">term</span> <span class="n">γ</span> <span class="err">Γ</span> <span class="err">↑</span><span class="n">End</span><span class="err">?</span>
<span class="err">⊢</span> <span class="bp">@</span><span class="n">Wait</span> <span class="n">γ</span> <span class="err">Γ</span> <span class="n">M</span> <span class="bp">==</span> <span class="bp">@</span><span class="n">eq</span><span class="bp">.</span><span class="n">mpr</span> <span class="o">(</span><span class="bp">@</span><span class="n">term</span> <span class="n">γ</span> <span class="o">(</span><span class="err">Γ</span> <span class="bp">+</span> <span class="mi">0</span><span class="o">)</span> <span class="n">tp</span><span class="bp">.</span><span class="n">unit</span><span class="o">)</span> <span class="o">(</span><span class="bp">@</span><span class="n">term</span> <span class="n">γ</span> <span class="err">Γ</span> <span class="n">tp</span><span class="bp">.</span><span class="n">unit</span><span class="o">)</span> <span class="bp">_</span> <span class="o">(</span><span class="bp">@</span><span class="n">Wait</span> <span class="n">γ</span> <span class="err">Γ</span> <span class="n">M</span><span class="o">)</span>
</pre></div>


<p>Having never worked with <code>heq</code>, I'm not sure if this is provable? Clearly both sides are the same expression, but one has been passed through <code>eq.mpr</code> to cast its type. If it's provable, what would be a good tactic/term to solve it? <em>EDIT</em>: It's probably worth noting that it has been casted to the wrong type, i.e. RHS has the same type as LHS before the cast, but a different one after. Can I undo <code>eq.mpr</code> in here somehow?</p>



<a name="161819590"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161819590" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161819590">(Mar 27 2019 at 01:25)</a>:</h4>
<p>Ah <code>h_generalize</code> did it. I would still be interested in hearing if there's a more automated way of doing it.</p>



<a name="161819890"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161819890" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161819890">(Mar 27 2019 at 01:30)</a>:</h4>
<p><code>cc</code> can sometimes handle heqs of casts which are close to being definitional equalities</p>



<a name="161819901"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161819901" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161819901">(Mar 27 2019 at 01:30)</a>:</h4>
<p>however, it works better when <code>eq.mpr</code>s are hidden beneath <code>cast</code>s</p>



<a name="161820139"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161820139" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161820139">(Mar 27 2019 at 01:35)</a>:</h4>
<p>What's the difference between <code>cast</code> and <code>eq.mpr</code>?</p>



<a name="161820220"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161820220" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161820220">(Mar 27 2019 at 01:37)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="bp">@</span><span class="o">[</span><span class="kn">inline</span><span class="o">]</span>
<span class="n">def</span> <span class="n">cast</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="n">Sort</span> <span class="n">u</span><span class="o">},</span> <span class="n">α</span> <span class="bp">=</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="n">Sort</span> <span class="n">u</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">=</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">eq</span><span class="bp">.</span><span class="n">rec</span> <span class="n">a</span> <span class="n">h</span>

<span class="bp">@</span><span class="o">[</span><span class="kn">inline</span><span class="o">]</span>
<span class="n">def</span> <span class="n">eq</span><span class="bp">.</span><span class="n">mpr</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="n">Sort</span> <span class="n">u</span><span class="o">},</span> <span class="n">α</span> <span class="bp">=</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">α</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="n">Sort</span> <span class="n">u</span><span class="o">}</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">=</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="n">β</span><span class="o">),</span> <span class="n">eq</span><span class="bp">.</span><span class="n">rec_on</span> <span class="bp">_</span> <span class="n">h₂</span>
</pre></div>



<a name="161820396"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161820396" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161820396">(Mar 27 2019 at 01:40)</a>:</h4>
<p>Oh, it's just reversed? Okay then :)</p>



<a name="161820412"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161820412" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161820412">(Mar 27 2019 at 01:41)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="bp">@</span><span class="o">[</span><span class="kn">inline</span><span class="o">]</span>
<span class="n">def</span> <span class="n">eq</span><span class="bp">.</span><span class="n">mp</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="n">Sort</span> <span class="n">u</span><span class="o">},</span> <span class="n">α</span> <span class="bp">=</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="n">Sort</span> <span class="n">u</span><span class="o">},</span> <span class="n">eq</span><span class="bp">.</span><span class="n">rec_on</span>
</pre></div>



<a name="161835910"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161835910" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161835910">(Mar 27 2019 at 07:40)</a>:</h4>
<p>There are people here who would say that if you're dealing with heqs, you're doing it wrong</p>



<a name="161835917"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161835917" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161835917">(Mar 27 2019 at 07:40)</a>:</h4>
<p>Equality of types is evil in type theory</p>



<a name="161835932"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161835932" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161835932">(Mar 27 2019 at 07:41)</a>:</h4>
<p>And maybe you'd be better off making an equiv if you have two types which you have identified in your mind</p>



<a name="161835946"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161835946" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161835946">(Mar 27 2019 at 07:41)</a>:</h4>
<p>Many of the key facts about equality are also proved for equivs</p>



<a name="161835947"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161835947" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161835947">(Mar 27 2019 at 07:41)</a>:</h4>
<p>The key missing one is <code>rw</code></p>



<a name="161835992"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161835992" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161835992">(Mar 27 2019 at 07:42)</a>:</h4>
<p>But we're working on it</p>



<a name="161858773"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161858773" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161858773">(Mar 27 2019 at 13:30)</a>:</h4>
<p>Yeah, I (ab)use dependent types in a way that makes it necessary to prove type equality quite often. I try to give my functions built-in &amp; semi-automated support for this by adding arguments like <code>(h: auto_param (expected_T = actual_T) ``some_tac)</code>, but it's not always possible</p>



<a name="161866241"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161866241" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161866241">(Mar 27 2019 at 14:48)</a>:</h4>
<p>While I'm at it, how can I <code>rw</code> using a <code>heq</code>? Given <code>Hx: M == x</code>, <code>rw [Hx]</code> tells me that <code>lemma is not an equality nor an iff</code>.</p>



<a name="161866351"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161866351" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161866351">(Mar 27 2019 at 14:49)</a>:</h4>
<p>With great difficulty. You can try using <code>heq.rec_on</code>, but I think this is usually quite hard, because the resulting expression often won't type check.</p>



<a name="161870735"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161870735" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161870735">(Mar 27 2019 at 15:28)</a>:</h4>
<p>This is a lesson you have to learn eventually: just because you can write it this way and that it is type correct doesn't mean it's a good idea. Keep the type of your definitions as simple as possible. Move your added logic to separate lemmas or separate definitions.</p>



<a name="161872490"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161872490" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161872490">(Mar 27 2019 at 15:47)</a>:</h4>
<p><code>heq.subst</code> will let you simulate some rewriting, but as Chris said, it is very painful</p>



<a name="161896451"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161896451" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161896451">(Mar 27 2019 at 20:15)</a>:</h4>
<p>If you know you are abusing dependent types then maybe you are bringing the pain on yourself. I had a maths repo where I used equality of types, because I was learning type theory and didn't understand the difference between equality and definitional equality; I ran into real trouble, which was only fixed by a refactor. What I am pushing for now is a tactic which will rewrite appropriate terms along equivs (or however you say it: if P is a predicate on rings which is mathematically reasonable then for two isomorphic rings R and S, P R will be true iff P S is, and I want a tactic which will show this -- this is something mathematicians do all the time but which seems to be painful in type theory).</p>



<a name="161905929"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161905929" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161905929">(Mar 27 2019 at 22:27)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Well, kind of, but not necessarily. I'm still a newcomer to type theory/theorem proving, but from what I read and some discussions I've had, my understanding is that currently Coq can handle these kinds of things much better than Lean. Adding good support for working with dependent types which are only propositionally equal could be well worth the effort. In particular, Coq has a <a href="https://coq.inria.fr/refman/addendum/program.html" target="_blank" title="https://coq.inria.fr/refman/addendum/program.html">Program</a> framework (which I think I've mentioned here at some point) which is able to find which <code>eq</code>s need to be proven while constructing an expression and generate them as external goals. This way we get a clean expression and all the nasty details are resolved externally. After the goals are proven, <code>Program</code> seems to automatically insert <code>casts</code>, more or less. Moreover, Coq can be told which tactics to use in order to automatically resolve most of such side equality goals. In PVS, I believe these things are called "Type Correctness Conditions" and are also dealt with outside the expression. HoTT also seems to provide an interesting answer to this in the form of paths, but I've only started looking into that.</p>



<a name="161926249"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/161926249" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#161926249">(Mar 28 2019 at 05:56)</a>:</h4>
<p>Is <code>Program</code> ready for prime time? I only read about it in CPDT, Chlipala is not big on it. <a href="http://adam.chlipala.net/cpdt/html/Subset.html" target="_blank" title="http://adam.chlipala.net/cpdt/html/Subset.html">http://adam.chlipala.net/cpdt/html/Subset.html</a></p>



<a name="162060279"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162060279" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162060279">(Mar 29 2019 at 16:21)</a>:</h4>
<p>In Coq, <a href="https://coq.inria.fr/library/Coq.Logic.JMeq.html" target="_blank" title="https://coq.inria.fr/library/Coq.Logic.JMeq.html"><code>JMeq_eq</code></a> is an axiom, but in Lean <a href="https://github.com/leanprover/lean/blob/master/library/init/core.lean#L205" target="_blank" title="https://github.com/leanprover/lean/blob/master/library/init/core.lean#L205"><code>eq_of_heq</code></a> seems to be a lemma with no non-core axioms below it. Does that mean it follows from proof irrelevance or another axiom that Lean has built-in?</p>



<a name="162069155"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162069155" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162069155">(Mar 29 2019 at 17:56)</a>:</h4>
<p><span class="user-mention" data-user-id="128280">@Wojciech Nawrocki</span> Yes, it relies on proof irrelevance.</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">eq_of_heq</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="n">Sort</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="n">a&#39;</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">==</span> <span class="n">a&#39;</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a&#39;</span> <span class="o">:=</span>
<span class="k">have</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">α&#39;</span> <span class="o">:</span> <span class="n">Sort</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">a&#39;</span> <span class="o">:</span> <span class="n">α&#39;</span><span class="o">)</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="bp">@</span><span class="n">heq</span> <span class="n">α</span> <span class="n">a</span> <span class="n">α&#39;</span> <span class="n">a&#39;</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">=</span> <span class="n">α&#39;</span><span class="o">),</span> <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">h₂</span> <span class="n">a</span> <span class="o">:</span> <span class="n">α&#39;</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a&#39;</span><span class="o">,</span> <span class="k">from</span>
  <span class="bp">λ</span> <span class="o">(</span><span class="n">α&#39;</span> <span class="o">:</span> <span class="n">Sort</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">a&#39;</span> <span class="o">:</span> <span class="n">α&#39;</span><span class="o">)</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="bp">@</span><span class="n">heq</span> <span class="n">α</span> <span class="n">a</span> <span class="n">α&#39;</span> <span class="n">a&#39;</span><span class="o">),</span> <span class="n">heq</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">h₁</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">h₂</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">=</span> <span class="n">α</span><span class="o">,</span> <span class="n">rfl</span><span class="o">),</span>
<span class="k">show</span> <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">rec_on</span> <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">refl</span> <span class="n">α</span><span class="o">)</span> <span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a&#39;</span><span class="o">,</span> <span class="k">from</span>
  <span class="n">this</span> <span class="n">α</span> <span class="n">a&#39;</span> <span class="n">h</span> <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">refl</span> <span class="n">α</span><span class="o">)</span>
</pre></div>


<p>the <code>rfl</code> on line 3 has type <code>eq.rec_on h₂ a = a</code>, which only makes sense because <code>h₂  : α = α</code> is defeq to <code>rfl</code> by proof irrelevance</p>



<a name="162070989"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162070989" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162070989">(Mar 29 2019 at 18:16)</a>:</h4>
<p>Gotcha, thanks!</p>



<a name="162185922"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162185922" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162185922">(Mar 31 2019 at 18:16)</a>:</h4>
<p>How can I introduce a new constant into all goals using <code>;</code>? <code>sometac; have a := 2,</code> doesn't seem to work. <em>EDIT</em>: <code>all_goals { have a := 2 }</code> worked. Unsure why <code>;</code> doesn't.</p>



<a name="162186078"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162186078" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162186078">(Mar 31 2019 at 18:20)</a>:</h4>
<p>This worked for me</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="n">false</span> <span class="bp">∧</span> <span class="n">false</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">split</span><span class="bp">;</span> <span class="k">have</span> <span class="n">a</span> <span class="o">:=</span> <span class="mi">2</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>


<p>However, this didn't work</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="n">false</span> <span class="bp">∧</span> <span class="n">false</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">split</span><span class="o">,</span> <span class="n">skip</span><span class="bp">;</span> <span class="k">have</span> <span class="n">a</span> <span class="o">:=</span> <span class="mi">2</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>


<p>Maybe the semicolon only works for the goals generated by the last tactic.</p>



<a name="162186080"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162186080" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162186080">(Mar 31 2019 at 18:20)</a>:</h4>
<p><code>sometac; have a := 2</code> works. Remember <code>have</code> is different from <code>let</code>. You'll get <code>a : ℕ</code> in the context, but won't see that it's 2.<br>
Edit: oh, I see the confusion. <code>;</code> doesn't mean "do the second tactic to all goals." I think <code>t; s</code> means "do <code>t</code> to the first goal, and then do <code>s</code> to all remaining goals."<br>
Edit 2: I'm thinking about too many things at once and writing unclearly, sorry. Chris phrased what I meant better. <code>t; s</code> focuses on the first goal, applies t, and then applies <code>s</code> to all goals generated from that. "Remaining goals" meaning remaining in the focus.</p>



<a name="162186223"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162186223" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162186223">(Mar 31 2019 at 18:24)</a>:</h4>
<p>Double-checked, it acts wierdly:</p>
<div class="codehilite"><pre><span></span><span class="n">cases</span> <span class="n">h</span><span class="o">:</span> <span class="n">H</span><span class="bp">;</span> <span class="k">have</span> <span class="n">a</span> <span class="o">:=</span> <span class="mi">2</span><span class="o">,</span> <span class="c1">-- works</span>
<span class="n">cases</span> <span class="n">h</span><span class="o">:</span> <span class="n">H</span><span class="o">,</span> <span class="n">skip</span><span class="bp">;</span> <span class="k">have</span> <span class="n">a</span> <span class="o">:=</span> <span class="mi">2</span><span class="o">,</span> <span class="c1">-- doesn&#39;t work</span>
<span class="n">cases</span> <span class="n">h</span><span class="o">:</span> <span class="n">H</span><span class="o">,</span> <span class="n">case</span> <span class="n">Foo</span> <span class="o">{</span> <span class="bp">..</span> <span class="o">}</span><span class="bp">;</span> <span class="k">have</span> <span class="n">a</span> <span class="o">:=</span> <span class="mi">2</span><span class="o">,</span> <span class="c1">-- doesn&#39;t work</span>
</pre></div>



<a name="162186513"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162186513" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162186513">(Mar 31 2019 at 18:33)</a>:</h4>
<p>What Chris said. <code>x; y</code> applies <code>y</code> to each goal produced by <code>x</code>.</p>



<a name="162186557"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162186557" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162186557">(Mar 31 2019 at 18:34)</a>:</h4>
<p>Oooh, ok! Thanks</p>



<a name="162186774"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162186774" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162186774">(Mar 31 2019 at 18:41)</a>:</h4>
<p>Different question - in every goal I have a hypothesis of the form <code>h : hE' = Foo Γₑ' hΓ_1 N E_1 a</code>, where <code>Foo</code> is that goal's case. I would like to solve each goal by applying that goal/case's constructor, but with different arguments. Can I somehow "extract" which constructor was used for the case and reuse it to solve the goal without quoting expressions and all that?</p>



<a name="162242088"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162242088" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162242088">(Apr 01 2019 at 14:09)</a>:</h4>
<p>How can I debug a <code>(deterministic) timeout</code> when Lean tries to prove well-foundedness of a recursion given my custom tactic?</p>



<a name="162242434"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162242434" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162242434">(Apr 01 2019 at 14:13)</a>:</h4>
<p>Oh actually I also get a "failed to prove well-foundedness" with the state:</p>
<div class="codehilite"><pre><span></span><span class="n">h</span> <span class="o">:</span> <span class="n">hE&#39;</span> <span class="bp">=</span> <span class="n">EAppLeft</span> <span class="err">Γₑ&#39;</span> <span class="n">h</span><span class="err">Γ</span><span class="bp">_</span><span class="mi">1</span> <span class="n">N</span> <span class="n">E_1</span> <span class="n">a</span><span class="o">,</span>
<span class="err">Γ</span> <span class="o">:</span> <span class="kn">context</span> <span class="n">γ</span><span class="o">,</span>
<span class="n">M</span> <span class="o">:</span> <span class="n">term</span> <span class="err">Γ</span> <span class="n">A&#39;&#39;</span>
<span class="err">⊢</span> <span class="n">eval_ctx</span><span class="bp">.</span><span class="n">sizeof</span>
      <span class="o">(((</span><span class="bp">⟨</span><span class="n">γ</span><span class="o">,</span>
          <span class="bp">⟨</span><span class="err">Γₑ</span><span class="o">,</span>
           <span class="bp">⟨</span><span class="err">Γ₁</span><span class="o">,</span>
            <span class="bp">⟨</span><span class="n">A&#39;&#39;</span><span class="o">,</span>
             <span class="bp">⟨</span><span class="n">A&#39;</span><span class="o">,</span>
              <span class="bp">⟨</span><span class="n">A_1</span><span class="err">⊸</span><span class="n">A</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">E</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">hE</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">E_1</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">a</span><span class="o">,</span> <span class="bp">⟨</span><span class="err">Γₑ</span> <span class="bp">+</span> <span class="err">Γ₁</span><span class="o">,</span> <span class="bp">_⟩⟩⟩⟩⟩⟩⟩⟩⟩⟩⟩.</span><span class="n">snd</span><span class="o">)</span><span class="bp">.</span><span class="n">snd</span><span class="o">)</span><span class="bp">.</span><span class="n">fst</span><span class="o">)</span>
      <span class="o">(((((((((</span><span class="bp">⟨</span><span class="n">γ</span><span class="o">,</span>
                <span class="bp">⟨</span><span class="err">Γₑ</span><span class="o">,</span>
                 <span class="bp">⟨</span><span class="err">Γ₁</span><span class="o">,</span>
                  <span class="bp">⟨</span><span class="n">A&#39;&#39;</span><span class="o">,</span>
                   <span class="bp">⟨</span><span class="n">A&#39;</span><span class="o">,</span>
                    <span class="bp">⟨</span><span class="n">A_1</span><span class="err">⊸</span><span class="n">A</span><span class="o">,</span>
                     <span class="bp">⟨</span><span class="n">E</span><span class="o">,</span>
                      <span class="bp">⟨</span><span class="n">hE</span><span class="o">,</span>
                       <span class="bp">⟨</span><span class="n">E_1</span><span class="o">,</span>
                        <span class="bp">⟨</span><span class="n">a</span><span class="o">,</span>
                         <span class="bp">⟨</span><span class="err">Γₑ</span> <span class="bp">+</span> <span class="err">Γ₁</span><span class="o">,</span>
                          <span class="bp">_⟩⟩⟩⟩⟩⟩⟩⟩⟩⟩⟩.</span><span class="n">snd</span><span class="o">)</span><span class="bp">.</span><span class="n">snd</span><span class="o">)</span><span class="bp">.</span><span class="n">snd</span><span class="o">)</span><span class="bp">.</span><span class="n">snd</span><span class="o">)</span><span class="bp">.</span><span class="n">snd</span><span class="o">)</span><span class="bp">.</span><span class="n">snd</span><span class="o">)</span><span class="bp">.</span><span class="n">snd</span><span class="o">)</span><span class="bp">.</span><span class="n">snd</span><span class="o">)</span><span class="bp">.</span><span class="n">fst</span><span class="o">)</span>
      <span class="n">a</span> <span class="bp">&lt;</span>
    <span class="n">eval_ctx</span><span class="bp">.</span><span class="n">sizeof</span>
      <span class="o">(((</span><span class="bp">⟨</span><span class="n">γ</span><span class="o">,</span>
          <span class="bp">⟨</span><span class="err">Γₑ</span><span class="o">,</span>
           <span class="bp">⟨</span><span class="err">Γₑ&#39;</span><span class="o">,</span>
            <span class="bp">⟨</span><span class="n">A&#39;&#39;</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">A&#39;</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">A</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">E</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">hE</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">E&#39;</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">hE&#39;</span><span class="o">,</span> <span class="bp">⟨</span><span class="err">Γ</span><span class="o">,</span> <span class="n">h</span><span class="err">Γ</span><span class="bp">⟩⟩⟩⟩⟩⟩⟩⟩⟩⟩⟩.</span><span class="n">snd</span><span class="o">)</span><span class="bp">.</span><span class="n">snd</span><span class="o">)</span><span class="bp">.</span><span class="n">fst</span><span class="o">)</span>
      <span class="o">(((((((((</span><span class="bp">⟨</span><span class="n">γ</span><span class="o">,</span>
                <span class="bp">⟨</span><span class="err">Γₑ</span><span class="o">,</span>
                 <span class="bp">⟨</span><span class="err">Γₑ&#39;</span><span class="o">,</span>
                  <span class="bp">⟨</span><span class="n">A&#39;&#39;</span><span class="o">,</span>
                   <span class="bp">⟨</span><span class="n">A&#39;</span><span class="o">,</span>
                    <span class="bp">⟨</span><span class="n">A</span><span class="o">,</span>
                     <span class="bp">⟨</span><span class="n">E</span><span class="o">,</span>
                      <span class="bp">⟨</span><span class="n">hE</span><span class="o">,</span>
                       <span class="bp">⟨</span><span class="n">E&#39;</span><span class="o">,</span>
                        <span class="bp">⟨</span><span class="n">hE&#39;</span><span class="o">,</span> <span class="bp">⟨</span><span class="err">Γ</span><span class="o">,</span> <span class="n">h</span><span class="err">Γ</span><span class="bp">⟩⟩⟩⟩⟩⟩⟩⟩⟩⟩⟩.</span><span class="n">snd</span><span class="o">)</span><span class="bp">.</span><span class="n">snd</span><span class="o">)</span><span class="bp">.</span><span class="n">snd</span><span class="o">)</span><span class="bp">.</span><span class="n">snd</span><span class="o">)</span><span class="bp">.</span><span class="n">snd</span><span class="o">)</span><span class="bp">.</span><span class="n">snd</span><span class="o">)</span><span class="bp">.</span><span class="n">snd</span><span class="o">)</span><span class="bp">.</span><span class="n">snd</span><span class="o">)</span><span class="bp">.</span><span class="n">fst</span><span class="o">)</span>
      <span class="n">hE&#39;</span>
</pre></div>


<p>Since <code>h: hE' = EAppLeft ... a</code> is in the context, why can't Lean just rewrite it using that and then show that <code>sizeof a &lt; sizeof EAppLeft .. a</code>?</p>



<a name="162245368"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162245368" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162245368">(Apr 01 2019 at 14:47)</a>:</h4>
<p>this error log is pretty hard to understand just by looking at it</p>



<a name="162245470"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162245470" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162245470">(Apr 01 2019 at 14:48)</a>:</h4>
<p>what always gets linked when these things come up: TPIL and <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/well_founded_recursion.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/well_founded_recursion.md">https://github.com/leanprover-community/mathlib/blob/master/docs/extras/well_founded_recursion.md</a></p>



<a name="162246128"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162246128" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162246128">(Apr 01 2019 at 14:55)</a>:</h4>
<p>what is not mentioned in the mathlib doc is what I usually do when I don't want to stare at a bunch of errors: prove my relation is well-founded by hand <code>well_founded r</code> and directly use <code>well_founded.fix</code></p>



<a name="162246653"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162246653" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162246653">(Apr 01 2019 at 15:01)</a>:</h4>
<p>Oh yeah I'd read that, but was hoping Lean could employ a bit of automation when trying to prove the inequality. I'll try <code>fix</code> as I don't think I can use <code>have</code>( the fn definition is entirely in tactic mode), thanks.</p>



<a name="162247008"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162247008" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162247008">(Apr 01 2019 at 15:04)</a>:</h4>
<p>oh, don't forget <a href="http://adam.chlipala.net/cpdt/html/GeneralRec.html" target="_blank" title="http://adam.chlipala.net/cpdt/html/GeneralRec.html">http://adam.chlipala.net/cpdt/html/GeneralRec.html</a></p>



<a name="162247040"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162247040" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162247040">(Apr 01 2019 at 15:04)</a>:</h4>
<p>the definitions are sorta almost the same if you squint</p>



<a name="162316155"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316155" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> snowbunting <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316155">(Apr 02 2019 at 09:12)</a>:</h4>
<p>What would be the correct way to define a function from ℤ to (abelian) groups? (i.e. having indexed groups G_1, G_2, ...)</p>
<p>I don't think that this here is working as it should.  This would be a constant function, wouldn't it?</p>
<div class="codehilite"><pre><span></span>universes u
variables {α: Type u}
def my_indexes_groups (i:ℤ) := add_group α
#check my_indexes_groups 3
</pre></div>


<p>Thx :)</p>



<a name="162316216"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316216" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316216">(Apr 02 2019 at 09:12)</a>:</h4>
<p>No, because then all groups have the same cardinality</p>



<a name="162316224"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316224" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316224">(Apr 02 2019 at 09:12)</a>:</h4>
<p>You define a function from Z to <code>Type</code></p>



<a name="162316234"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316234" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316234">(Apr 02 2019 at 09:12)</a>:</h4>
<p>What you do is <code>G : Z → Type</code></p>



<a name="162316254"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316254" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316254">(Apr 02 2019 at 09:13)</a>:</h4>
<p>And then <code>[\for i, add_group G i]</code></p>



<a name="162316274"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316274" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316274">(Apr 02 2019 at 09:13)</a>:</h4>
<p>And then you define another function from Z to the structure of a group on the image of the first function :-)</p>



<a name="162316367"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316367" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316367">(Apr 02 2019 at 09:14)</a>:</h4>
<p>And you also note that Lean's definition of <code>add_group</code> doesn't require commutativity so if you're doing exact sequences you might want to use add_comm_group</p>



<a name="162316397"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316397" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316397">(Apr 02 2019 at 09:15)</a>:</h4>
<p>Johan and I are both interested in seeing exact sequences in Lean by the way, we're both mathematicians</p>



<a name="162316483"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316483" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316483">(Apr 02 2019 at 09:16)</a>:</h4>
<p>The way to think about groups in Lean is that they are two things. First you have G, a <em>type</em></p>



<a name="162316499"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316499" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316499">(Apr 02 2019 at 09:16)</a>:</h4>
<p>And then you have another thing h, a term of type [group G]</p>



<a name="162316522"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316522" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316522">(Apr 02 2019 at 09:17)</a>:</h4>
<p>And it's h that has all the data of the multiplication and the axioms</p>



<a name="162316532"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316532" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316532">(Apr 02 2019 at 09:17)</a>:</h4>
<p>But amazingly you never have to mention h at all when you're working with groups</p>



<a name="162316589"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316589" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316589">(Apr 02 2019 at 09:18)</a>:</h4>
<p>Because whenever Lean needs this data it gets it from G using something called type class inference</p>



<a name="162316617"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316617" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316617">(Apr 02 2019 at 09:18)</a>:</h4>
<p>You try to do a group thing on G like multiplying two elements together</p>



<a name="162316655"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316655" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> snowbunting <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316655">(Apr 02 2019 at 09:19)</a>:</h4>
<p>ok that works indeed! Maybe it would be actually ask to ask what the difference between <code>Type</code> and <code>Type u</code> is, although it feels super dumb...</p>



<a name="162316675"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316675" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316675">(Apr 02 2019 at 09:19)</a>:</h4>
<p>And Lean says "what's this multiplication they're talking about? Does my big list of type class stuff contain anything which mentions a multiplication on G? And then it looks and it finds h and says "ok I'll just use that stuff"</p>



<a name="162316719"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316719" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316719">(Apr 02 2019 at 09:20)</a>:</h4>
<p>Type is Type 0</p>



<a name="162316729"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316729" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316729">(Apr 02 2019 at 09:20)</a>:</h4>
<p>In type theory everything has to have a type</p>



<a name="162316736"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316736" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316736">(Apr 02 2019 at 09:20)</a>:</h4>
<p>So unfortunately Type has to have a type</p>



<a name="162316742"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316742" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316742">(Apr 02 2019 at 09:20)</a>:</h4>
<p>Which is Type 1</p>



<a name="162316743"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316743" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316743">(Apr 02 2019 at 09:20)</a>:</h4>
<p>You get the picture</p>



<a name="162316760"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316760" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316760">(Apr 02 2019 at 09:21)</a>:</h4>
<p>Type u is a random universe somewhere up in the hierarchy</p>



<a name="162316792"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316792" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316792">(Apr 02 2019 at 09:21)</a>:</h4>
<p>It's best practice to make functions and constructions take inputs from arbitrary universes in type theory</p>



<a name="162316875"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316875" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316875">(Apr 02 2019 at 09:22)</a>:</h4>
<p>You should do a map from Z to <code>Type u</code> really</p>



<a name="162316906"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162316906" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162316906">(Apr 02 2019 at 09:23)</a>:</h4>
<p>People might also write <code>Type*</code> -- this is the same thing, it just saves you having to name u</p>



<a name="162317141"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162317141" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> snowbunting <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162317141">(Apr 02 2019 at 09:28)</a>:</h4>
<p>ok so <code>u</code> really is just a number, like <code>Type u</code> one of <code>Type 0</code>, <code>Type 1</code>,  ...<br>
And if I don't want to force two variables to be both for example <code>Type 2</code> simultaneously, then I should use <code>Type u</code> and <code>Type v</code> in the definition, right?</p>
<p>And if I would write <code>def xxx (a: Type*) (b: Type*): Type* := sorry</code> then there is no constrains if they have the same type or not, is there?</p>
<p>Thx :)</p>



<a name="162317205"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162317205" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162317205">(Apr 02 2019 at 09:28)</a>:</h4>
<p>That's right.</p>



<a name="162317229"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162317229" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162317229">(Apr 02 2019 at 09:29)</a>:</h4>
<p>u is a natural number, but it's not a Lean natural number, it's a universe variable, which is treated differently; it's part of the core language or something.</p>



<a name="162342248"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162342248" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> snowbunting <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162342248">(Apr 02 2019 at 14:53)</a>:</h4>
<blockquote>
<p>And then <code>[\for i, add_group G]</code></p>
</blockquote>
<p>This works great together with <code>variable</code>, but how would I now include that into a class? This does not seem to be working:</p>
<div class="codehilite"><pre><span></span><span class="kn">universe</span> <span class="n">u</span>
<span class="n">class</span> <span class="n">chain</span> <span class="o">(</span><span class="n">α</span><span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
    <span class="o">(</span><span class="n">group</span> <span class="o">(</span><span class="n">i</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">):</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span>
    <span class="o">(</span><span class="n">diff</span> <span class="o">{</span><span class="n">i</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">}:</span> <span class="o">(</span><span class="n">group</span> <span class="n">i</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">group</span> <span class="o">(</span><span class="n">i</span><span class="bp">-</span><span class="mi">1</span><span class="o">)))</span>
    <span class="o">[</span><span class="n">x</span><span class="o">:</span> <span class="bp">∀</span><span class="n">i</span><span class="o">,</span> <span class="n">add_comm_group</span> <span class="o">(</span><span class="n">group</span> <span class="n">i</span><span class="o">)]</span>

<span class="kn">variable</span> <span class="o">(</span><span class="n">C</span><span class="o">:</span> <span class="kt">Type</span><span class="o">)</span>
<span class="kn">variable</span> <span class="o">[</span><span class="n">chain</span> <span class="n">C</span><span class="o">]</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">g</span> <span class="n">h</span><span class="o">:</span> <span class="n">chain</span><span class="bp">.</span><span class="n">group</span> <span class="n">C</span> <span class="mi">1</span><span class="o">)</span>

<span class="bp">#</span><span class="kn">check</span> <span class="n">g</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">chain</span><span class="bp">.</span><span class="n">group</span> <span class="n">C</span> <span class="mi">1</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">chain</span><span class="bp">.</span><span class="n">diff</span> <span class="n">g</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">g</span> <span class="bp">+</span> <span class="n">h</span>    <span class="c1">-- has_add (chain.group C 1)</span>
</pre></div>



<a name="162342427"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162342427" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162342427">(Apr 02 2019 at 14:54)</a>:</h4>
<p>Put it with <code>()</code> in the class. Then aftwerwards state:</p>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="n">foo</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">add_group</span> <span class="n">C</span> <span class="n">i</span> <span class="o">:=</span> <span class="n">C</span><span class="bp">.</span><span class="n">x</span> <span class="n">i</span>
</pre></div>



<a name="162342450"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162342450" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162342450">(Apr 02 2019 at 14:54)</a>:</h4>
<p>Modulo mistakes</p>



<a name="162342638"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162342638" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162342638">(Apr 02 2019 at 14:56)</a>:</h4>
<p>Also, you might be interested in <code>category_theory/</code></p>



<a name="162342654"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162342654" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> snowbunting <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162342654">(Apr 02 2019 at 14:56)</a>:</h4>
<p>Of course, I should have remembered <code>instance</code>, used that before, thank you!</p>



<a name="162358531"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162358531" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162358531">(Apr 02 2019 at 17:59)</a>:</h4>
<p>Your alpha doesn't do anything</p>



<a name="162358571"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162358571" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162358571">(Apr 02 2019 at 17:59)</a>:</h4>
<p>You could just remove it, and you could change class to structure</p>



<a name="162358765"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162358765" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162358765">(Apr 02 2019 at 18:01)</a>:</h4>
<p>Then a term of type <code>chain</code> would be a bunch of abelian groups and homs</p>



<a name="162358791"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162358791" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162358791">(Apr 02 2019 at 18:01)</a>:</h4>
<p>You use <code>class</code> when there's only expected to be one term of that type</p>



<a name="162378298"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162378298" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162378298">(Apr 02 2019 at 22:05)</a>:</h4>
<blockquote>
<p>Also, you might be interested in <code>category_theory/</code></p>
</blockquote>
<p>Regarding initial experiments, this isn't meant at all as discouragement --- but eventually we'd like the definition of <code>chain_complex</code> to be as generic as possible (e.g. any category enriched in a category with_zero).</p>



<a name="162659075"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162659075" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162659075">(Apr 05 2019 at 20:42)</a>:</h4>
<p>Is there anything I can do to debug "equation compiler failed to prove equation lemma (workaround: disable lemma generation using <code>set_option eqn_compiler.lemmas false</code>)"?</p>



<a name="162661482"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162661482" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162661482">(Apr 05 2019 at 21:10)</a>:</h4>
<p>Wow that's some error! How did you get that?</p>



<a name="162661525"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162661525" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162661525">(Apr 05 2019 at 21:11)</a>:</h4>
<p>Kevin is so jalous...</p>



<a name="162666797"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162666797" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162666797">(Apr 05 2019 at 22:24)</a>:</h4>
<p>:) It happens in <a href="https://github.com/Vtec234/lean-sesh/blob/master/src/sesh/eval.lean#L194" target="_blank" title="https://github.com/Vtec234/lean-sesh/blob/master/src/sesh/eval.lean#L194">this definition (link)</a></p>



<a name="162667290"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162667290" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162667290">(Apr 05 2019 at 22:31)</a>:</h4>
<p>it doesn't compile for me because it needs imports I don't have :-/</p>



<a name="162667295"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162667295" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162667295">(Apr 05 2019 at 22:31)</a>:</h4>
<p>but even if it did compile for me I think I wouldn't be able to help.</p>



<a name="162669637"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162669637" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162669637">(Apr 05 2019 at 23:04)</a>:</h4>
<p>Oh, it's self-contained modulo downloading mathlib, but for some reason leanpkg.path was in my .gitignore and it's needed for import paths to resolve - fixed that</p>



<a name="162671215"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162671215" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162671215">(Apr 05 2019 at 23:31)</a>:</h4>
<p>leanpkg.path should indeed be in .gitignore (assuming you are actually using leanpkg)</p>



<a name="162678219"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162678219" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162678219">(Apr 06 2019 at 02:15)</a>:</h4>
<p>Is it related to the use of <code>let</code> in the type of the function you are defining by pattern matching?</p>



<a name="162720668"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162720668" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162720668">(Apr 06 2019 at 21:09)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> it doesn't seem like it, I can inline the <code>let</code>, same error</p>



<a name="162720727"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162720727" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162720727">(Apr 06 2019 at 21:10)</a>:</h4>
<p>do you have a self contained MWE?</p>



<a name="162720738"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162720738" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162720738">(Apr 06 2019 at 21:10)</a>:</h4>
<p>(Try putting everything needed in one file, then start deleting things that don't matter for the error)</p>



<a name="162944584"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162944584" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162944584">(Apr 09 2019 at 19:57)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> thanks, that was good idea! It took a while but I was able to simplify it to this:</p>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="n">foo</span><span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="kt">Type</span>
<span class="n">def</span> <span class="n">foo_fn</span> <span class="o">(</span><span class="n">n</span> <span class="n">m</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">):</span> <span class="kt">Type</span> <span class="o">:=</span> <span class="n">foo</span> <span class="n">n</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">foo</span> <span class="n">n</span> <span class="n">m</span>

<span class="kn">inductive</span> <span class="n">is_foo_fn</span>
  <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">n</span> <span class="n">m</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">},</span> <span class="n">foo_fn</span> <span class="n">n</span> <span class="n">m</span> <span class="bp">→</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="n">IsFooEta</span><span class="o">:</span>
  <span class="bp">Π</span> <span class="o">{</span><span class="n">n</span> <span class="n">m</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span><span class="o">:</span> <span class="n">foo_fn</span> <span class="n">n</span> <span class="n">m</span><span class="o">},</span>
  <span class="n">is_foo_fn</span> <span class="n">f</span>
<span class="bp">→</span> <span class="n">is_foo_fn</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">M</span><span class="o">,</span> <span class="n">f</span> <span class="n">M</span><span class="o">)</span>
<span class="kn">open</span> <span class="n">is_foo_fn</span>

<span class="n">def</span> <span class="n">ext</span><span class="o">:</span> <span class="c1">-- equation compiler failed to prove equation lemma (workaround: disable lemma generation using `set_option eqn_compiler.lemmas false`)</span>
    <span class="bp">Π</span> <span class="o">{</span><span class="n">m</span> <span class="n">n</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span>
      <span class="o">{</span><span class="n">f</span><span class="o">:</span> <span class="n">foo_fn</span> <span class="n">n</span> <span class="n">m</span><span class="o">},</span>
    <span class="n">is_foo_fn</span> <span class="n">f</span>
  <span class="bp">→</span> <span class="err">Σ</span> <span class="n">f&#39;</span><span class="o">:</span> <span class="n">foo_fn</span> <span class="n">n</span> <span class="n">m</span><span class="o">,</span> <span class="n">is_foo_fn</span> <span class="n">f&#39;</span>
<span class="bp">|</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="n">IsFooEta</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">⟨_</span><span class="o">,</span> <span class="n">IsFooEta</span> <span class="o">(</span><span class="n">ext</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">snd</span><span class="bp">⟩</span>
</pre></div>


<p>which still fails, while making the following change makes the eqn compiler work:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">ext</span><span class="o">:</span> <span class="c1">-- good</span>
    <span class="bp">Π</span> <span class="o">{</span><span class="n">n</span> <span class="n">m</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span>
      <span class="o">{</span><span class="n">f</span><span class="o">:</span> <span class="n">foo_fn</span> <span class="n">n</span> <span class="n">m</span><span class="o">},</span>
    <span class="n">is_foo_fn</span> <span class="n">f</span>
  <span class="bp">→</span> <span class="err">Σ</span> <span class="n">f&#39;</span><span class="o">:</span> <span class="n">foo_fn</span> <span class="n">n</span> <span class="n">m</span><span class="o">,</span> <span class="n">is_foo_fn</span> <span class="n">f&#39;</span>
<span class="bp">|</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="n">IsFooEta</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">⟨_</span><span class="o">,</span> <span class="n">IsFooEta</span> <span class="o">(</span><span class="n">ext</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">snd</span><span class="bp">⟩</span>
</pre></div>


<p>Can you spot the difference? :) (it's the order of arguments). To me this seems like an eqn_compiler bug<br>
And indeed this stupid-simple fix works on my actual code :D</p>



<a name="162947094"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162947094" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162947094">(Apr 09 2019 at 20:30)</a>:</h4>
<p><span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> What do you think? Is this a bug or am I missing something obvious?</p>



<a name="162947160"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162947160" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162947160">(Apr 09 2019 at 20:31)</a>:</h4>
<p>Thanks for putting in the effort. I've never seen this error before.</p>



<a name="162947406"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162947406" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162947406">(Apr 09 2019 at 20:34)</a>:</h4>
<p>Me neither</p>



<a name="162947461"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162947461" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162947461">(Apr 09 2019 at 20:34)</a>:</h4>
<p>Can you reproduce it in Lean 4?</p>



<a name="162947480"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162947480" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162947480">(Apr 09 2019 at 20:35)</a>:</h4>
<p>If not, then who cares about this error?</p>



<a name="162947821"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162947821" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162947821">(Apr 09 2019 at 20:39)</a>:</h4>
<p>those of us who are stuck with Lean 3?</p>



<a name="162947830"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162947830" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162947830">(Apr 09 2019 at 20:39)</a>:</h4>
<p>;-)</p>



<a name="162956880"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162956880" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162956880">(Apr 09 2019 at 22:42)</a>:</h4>
<p>I don't have time to look into this deeply, but just remarking that I have seen 'equation compiler failed to prove equation lemma' before</p>



<a name="162956912"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162956912" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162956912">(Apr 09 2019 at 22:42)</a>:</h4>
<p>a very long time ago, I think the last time I saw it there was some problem with eta reduction</p>



<a name="162956941"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/162956941" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#162956941">(Apr 09 2019 at 22:43)</a>:</h4>
<p>but i could be hallucinating how I fixed it, since it was awhile ago</p>



<a name="163636511"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163636511" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163636511">(Apr 18 2019 at 09:51)</a>:</h4>
<p>Given</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">P</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="mi">42</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">P</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="n">P</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">n</span><span class="o">))</span> <span class="o">:=</span> <span class="c1">-- this is obviously false</span>
<span class="k">begin</span>
<span class="n">unfold</span> <span class="n">P</span><span class="o">,</span> <span class="c1">-- this unfolds both occurrences</span>
<span class="n">sorry</span>
<span class="kn">end</span>
</pre></div>


<p>how can I unfold <code>P</code> just at the right-hand side?</p>



<a name="163636605"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163636605" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163636605">(Apr 18 2019 at 09:52)</a>:</h4>
<p>you can just use <code>change</code> or <code>show</code></p>



<a name="163636661"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163636661" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163636661">(Apr 18 2019 at 09:53)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">P</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="mi">42</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">P</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="n">P</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">n</span><span class="o">))</span> <span class="o">:=</span> <span class="c1">-- this is obviously false</span>
<span class="k">begin</span>
  <span class="k">show</span> <span class="n">P</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">((</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">n</span><span class="o">)</span> <span class="bp">&gt;</span> <span class="mi">42</span><span class="o">),</span>
<span class="n">sorry</span>
<span class="kn">end</span>
</pre></div>



<a name="163636738"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163636738" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163636738">(Apr 18 2019 at 09:54)</a>:</h4>
<p>If you're planning on using the <code>rw</code> tactic, then Lean might be very fussy about exactly which form a term is in</p>



<a name="163636776"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163636776" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163636776">(Apr 18 2019 at 09:55)</a>:</h4>
<p>but conversely Lean is happy to switch between definitionally equal forms of the same term, using the <code>change</code> and <code>show</code> tactics (which do the same thing, <code>change</code> having the advantage that it also works for hypotheses in your context with <code>change ... at H</code>)</p>



<a name="163636784"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163636784" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163636784">(Apr 18 2019 at 09:55)</a>:</h4>
<p>Ah okay, thanks. If my goal statement is very long though, I end up copy-pasting a lot of text.</p>



<a name="163636823"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163636823" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163636823">(Apr 18 2019 at 09:56)</a>:</h4>
<p>there are other ways</p>



<a name="163636873"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163636873" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163636873">(Apr 18 2019 at 09:57)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">P</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="mi">42</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">P</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="n">P</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">n</span><span class="o">))</span> <span class="o">:=</span> <span class="c1">-- this is obviously false</span>
<span class="k">begin</span>
  <span class="n">conv</span> <span class="k">begin</span>
    <span class="n">to_rhs</span><span class="o">,</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">P</span><span class="o">],</span>
  <span class="kn">end</span><span class="o">,</span>
<span class="n">sorry</span>
<span class="kn">end</span>
</pre></div>



<a name="163636890"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163636890" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163636890">(Apr 18 2019 at 09:57)</a>:</h4>
<p><code>conv</code> mode is a mode which isn't mentioned at all in the official docs</p>



<a name="163636893"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163636893" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163636893">(Apr 18 2019 at 09:57)</a>:</h4>
<p>It enables you to zoom into parts of terms</p>



<a name="163636946"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163636946" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163636946">(Apr 18 2019 at 09:58)</a>:</h4>
<p>Unfortunately, when you're in conv mode, the tools available to you are completely different, and it doesn't look like <code>unfold</code> is available yet.</p>



<a name="163636948"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163636948" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163636948">(Apr 18 2019 at 09:58)</a>:</h4>
<p>So I had to use <code>simp only</code></p>



<a name="163636952"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163636952" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163636952">(Apr 18 2019 at 09:58)</a>:</h4>
<p>which is close to the same thing</p>



<a name="163636953"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163636953" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163636953">(Apr 18 2019 at 09:58)</a>:</h4>
<p>uuh, the hidden secrets. that does not seem very elegant to me though :')</p>



<a name="163636958"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163636958" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163636958">(Apr 18 2019 at 09:58)</a>:</h4>
<p>The community documented <code>conv</code> mode.</p>



<a name="163636975"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163636975" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163636975">(Apr 18 2019 at 09:58)</a>:</h4>
<p>I though I could make use of some pattern matching or occurrence counting when I was reading <a href="https://leanprover.github.io/tutorial/A1_Quick_Reference.html" target="_blank" title="https://leanprover.github.io/tutorial/A1_Quick_Reference.html">https://leanprover.github.io/tutorial/A1_Quick_Reference.html</a> A1.6.2.1</p>



<a name="163636989"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163636989" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163636989">(Apr 18 2019 at 09:59)</a>:</h4>
<p>But I am either to silly or misinterpreting what is written there.</p>



<a name="163636992"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163636992" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163636992">(Apr 18 2019 at 09:59)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/conv.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/conv.md">https://github.com/leanprover-community/mathlib/blob/master/docs/extras/conv.md</a></p>



<a name="163637060"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163637060" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163637060">(Apr 18 2019 at 10:00)</a>:</h4>
<p>Your link there is to an out of date file :-/ That's Lean 2 you're looking at</p>



<a name="163637073"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163637073" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163637073">(Apr 18 2019 at 10:00)</a>:</h4>
<p>You can use <code>conv</code> to zoom directly into the right hand side with <code>conv in</code> or <code>conv at</code> or something, I can never remember the details, but they're clearly documented in Patrick's conv.md write-up</p>



<a name="163637094"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163637094" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163637094">(Apr 18 2019 at 10:01)</a>:</h4>
<p>Oh damn, google fooled me</p>



<a name="163637097"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163637097" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163637097">(Apr 18 2019 at 10:01)</a>:</h4>
<p>That way you avoid the <code>to_rhs</code> conv-mode tactic</p>



<a name="163637103"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163637103" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163637103">(Apr 18 2019 at 10:01)</a>:</h4>
<blockquote>
<p>Oh damn, google fooled me</p>
</blockquote>
<p>call them up and complain</p>



<a name="163637176"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163637176" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163637176">(Apr 18 2019 at 10:02)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">P</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="n">P</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">n</span><span class="o">))</span> <span class="o">:=</span> <span class="c1">-- this is obviously false</span>
<span class="k">begin</span>
  <span class="n">conv</span> <span class="k">in</span> <span class="o">(</span><span class="n">P</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">n</span><span class="o">))</span> <span class="k">begin</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">P</span><span class="o">],</span>
  <span class="kn">end</span><span class="o">,</span>
<span class="n">sorry</span>
<span class="kn">end</span>
</pre></div>



<a name="163637250"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163637250" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163637250">(Apr 18 2019 at 10:03)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">P</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="mi">42</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">P</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="n">P</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">n</span><span class="o">))</span> <span class="o">:=</span> <span class="c1">-- this is obviously false</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="n">P</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="mi">42</span><span class="o">),</span> <span class="k">from</span> <span class="n">rfl</span><span class="o">),</span>
<span class="n">sorry</span>
<span class="kn">end</span>
</pre></div>



<a name="163637270"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163637270" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163637270">(Apr 18 2019 at 10:03)</a>:</h4>
<p>This way avoids conv mode and is more precise about what you want done</p>



<a name="163637329"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163637329" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163637329">(Apr 18 2019 at 10:04)</a>:</h4>
<p>What exactly are you looking for? Tactic-writers here are very good.</p>



<a name="163637360"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163637360" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163637360">(Apr 18 2019 at 10:04)</a>:</h4>
<p>People can just make new stuff. Lean tactics are written in Lean and some people (not me though! I'm a mathematician) can just knock them off before breakfast.</p>



<a name="163637832"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163637832" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163637832">(Apr 18 2019 at 10:11)</a>:</h4>
<p>Basically, I had a rather long equation of the form <code>l=r</code> and I wanted to unfold an expression in <code>r</code> by its definition, which again, is a rather long term. Hence, I neither want to re-state the whole goal nor the result of the unfolded definition. What I want to do is something like</p>
<div class="codehilite"><pre><span></span><span class="k">begin</span>
<span class="n">unfold</span> <span class="n">P</span> <span class="o">{</span><span class="mi">2</span><span class="o">}</span> <span class="c1">-- this should unfold the second occurrence of P in the goal (or the third if you count from zero)</span>
<span class="n">sorry</span>
<span class="kn">end</span>
</pre></div>



<a name="163637905"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163637905" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163637905">(Apr 18 2019 at 10:12)</a>:</h4>
<p><span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> is that already a tactic, do you know?</p>



<a name="163637917"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163637917" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163637917">(Apr 18 2019 at 10:12)</a>:</h4>
<p>Is there any obstruction to making it?</p>



<a name="163638014"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163638014" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163638014">(Apr 18 2019 at 10:14)</a>:</h4>
<p><span class="user-mention" data-user-id="198376">@Kevin Kappelmann</span> you could just do all the unfolds manually, ignore what happens to <code>l</code>, and then once you've got <code>r</code> into the form you want you can just delet everything and write <code>show _ = [what you want r to be]</code></p>



<a name="163638029"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163638029" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163638029">(Apr 18 2019 at 10:14)</a>:</h4>
<p>(the point being that <code>show</code> will take <code>_</code> for the left hand side)</p>



<a name="163638165"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163638165" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163638165">(Apr 18 2019 at 10:16)</a>:</h4>
<p>I think I've now told you all the tricks I know -- but I can see that your proposed idea is nicer. It might be a pain though -- if you want to unfold a bunch of stuff in <code>r</code> but not in <code>l</code> you might have to keep changing the numbers, depending on which things you want to unfold in <code>r</code> also show up in <code>l</code>. I think that if you're adamant that you want to change <code>r</code> and leave <code>l</code> untouched, just use <code>conv</code> mode and <code>to_rhs</code>. That's only a couple of lines and I think it's better than your idea because of the issue with numbers perhaps changing depending on exactly you want to unfold.</p>



<a name="163638189"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163638189" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163638189">(Apr 18 2019 at 10:17)</a>:</h4>
<p>Yes, you can do this with <code>conv</code>.  Unfortunately, <code>unfold</code> isn't wrapped so you need to use <code>simp</code>.</p>
<div class="codehilite"><pre><span></span><span class="n">conv</span> <span class="o">{</span> <span class="n">for</span> <span class="o">(</span><span class="n">P</span> <span class="bp">_</span><span class="o">)</span> <span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="o">{</span> <span class="n">simp</span> <span class="o">[</span><span class="n">P</span><span class="o">]</span> <span class="o">}</span> <span class="o">},</span>
</pre></div>



<a name="163638194"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163638194" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163638194">(Apr 18 2019 at 10:17)</a>:</h4>
<p>OTOH I guess your idea has its merits when there is more than one occurrence of P in the RHS.</p>



<a name="163638210"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163638210" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163638210">(Apr 18 2019 at 10:17)</a>:</h4>
<p>Aah, I'd forgotten <code>conv</code> could take numbers!</p>



<a name="163638215"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163638215" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163638215">(Apr 18 2019 at 10:17)</a>:</h4>
<p>Thanks Gabriel</p>



<a name="163638303"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163638303" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163638303">(Apr 18 2019 at 10:18)</a>:</h4>
<p>hey what is this voodoo? <code>for</code>? I thought functional languages didn't have <code>for</code> loops!</p>



<a name="163638383"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163638383" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163638383">(Apr 18 2019 at 10:20)</a>:</h4>
<p>Aah yes, I see now that <code>for</code> is documented in the <code>conv</code> document I linked to earlier.</p>



<a name="163638461"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163638461" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163638461">(Apr 18 2019 at 10:20)</a>:</h4>
<p>It's about time I re-read it :D</p>



<a name="163638592"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163638592" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163638592">(Apr 18 2019 at 10:22)</a>:</h4>
<p>I'll show you a Lean trick Kevin. </p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">P</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="mi">42</span>

<span class="bp">#</span><span class="kn">print</span> <span class="kn">prefix</span> <span class="n">P</span>

<span class="c1">-- P.equations._eqn_1 : ∀ (n : ℕ), P n = (n &gt; 42)</span>
</pre></div>


<p>When you define <code>P</code>, Lean makes one or more "equation lemmas" for it. <code>unfold P</code> is basically the same as <code>simp only [P.equations._eqn_1]</code> or <code>simp only [P]</code> for short. It's a shame there's no <code>unfold</code> in <code>conv</code> mode, but these are the tricks you can use to emulate it.</p>



<a name="163638639"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163638639" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163638639">(Apr 18 2019 at 10:23)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">P</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="mi">42</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">P</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="n">P</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">n</span><span class="o">))</span> <span class="o">:=</span> <span class="c1">-- this is obviously false</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="n">P</span><span class="bp">.</span><span class="n">equations</span><span class="bp">._</span><span class="n">eqn_1</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">n</span><span class="o">),</span>
  <span class="n">sorry</span>
<span class="kn">end</span>
</pre></div>



<a name="163638662"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163638662" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163638662">(Apr 18 2019 at 10:23)</a>:</h4>
<p>Okay, I summarise: <code>conv</code> is pretty useful, I should read about it, and I guess it should also be included in the official docs at some point to avoid noobs like me wondering how to rewrite subterms :p</p>



<a name="163638723"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163638723" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163638723">(Apr 18 2019 at 10:24)</a>:</h4>
<p>The Lean team is currently working on Lean 4, I don't think they're interested in documentation-writing at the minute.</p>



<a name="163638734"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163638734" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163638734">(Apr 18 2019 at 10:24)</a>:</h4>
<p>If Lean 4 is a success then we'll all be porting the docs over to there</p>



<a name="163638750"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163638750" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163638750">(Apr 18 2019 at 10:25)</a>:</h4>
<p>The community-written docs are really helpful for technical questions not covered by Theorem Proving In Lean.</p>



<a name="163638771"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163638771" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163638771">(Apr 18 2019 at 10:25)</a>:</h4>
<p>They all live in the mathlib repo but they're not really anything to do with mathlib, they're just where these community-generated docs ended up.</p>



<a name="163638971"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163638971" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163638971">(Apr 18 2019 at 10:29)</a>:</h4>
<p>I see. I think rewriting subterms is quite common though, so I would mention it at least in the official doc. Anyway, thanks Kevin &amp; Gabriel :)</p>



<a name="163648072"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163648072" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163648072">(Apr 18 2019 at 12:52)</a>:</h4>
<p>you can use underscores with <code>change</code> and Lean will try to infer what should be there from the current goal. that way <code>change _ = new_rhs</code> lets you avoid copy-pasting the entire left hand side</p>



<a name="163860118"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860118" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860118">(Apr 21 2019 at 17:24)</a>:</h4>
<p>How would I go about proving ∀ x : ℤ, even x ∨ odd x? I have even and odd as<br>
def even : ℤ → Prop := λ n, ∃ m : ℤ, 2*m = n<br>
def odd : ℤ → Prop := λ n, ∃ m : ℤ, 2*m + 1 = n<br>
I assume that I would first have to show that odd is equivalent to not even, then apply classical.em. However, I'm having trouble proving odd x ↔ ¬(even x)</p>



<a name="163860254"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860254" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860254">(Apr 21 2019 at 17:28)</a>:</h4>
<p>My instinct would be to prove even n -&gt; odd (n+1) etc, and then prove by induction that every integer was odd or even.</p>



<a name="163860266"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860266" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860266">(Apr 21 2019 at 17:28)</a>:</h4>
<p>There are induction hypotheses of the form (P 0 and (forall n, P n -&gt; P(n+1)) and (forall N, P(n)-&gt;P(n-1))) implies P(n) for all n</p>



<a name="163860279"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860279" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860279">(Apr 21 2019 at 17:29)</a>:</h4>
<p>Ah, I see. That makes sense. I'm not familiar enough with induction in Lean yet, but I'll try it out</p>



<a name="163860281"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860281" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860281">(Apr 21 2019 at 17:29)</a>:</h4>
<p>thank you, I'll respond again if I'm stuck on the inductive bit</p>



<a name="163860285"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860285" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860285">(Apr 21 2019 at 17:29)</a>:</h4>
<p>If you just apply the induction tactic out of the box, you'll get an unpleasant surprise</p>



<a name="163860338"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860338" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860338">(Apr 21 2019 at 17:30)</a>:</h4>
<p>You'll end up with some question about natural numbers instead, and it will be pain converting from naturals to integers.</p>



<a name="163860351"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860351" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860351">(Apr 21 2019 at 17:30)</a>:</h4>
<p>You'll need to find an appropriate custom induction term in the library.</p>



<a name="163860369"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860369" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860369">(Apr 21 2019 at 17:31)</a>:</h4>
<p>Oh, okay. I'm not familiar enough with the library to get started with that. Where would I go to look for something like that?</p>



<a name="163860373"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860373" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860373">(Apr 21 2019 at 17:31)</a>:</h4>
<p><code>int.induction_on</code> should be fine for you.</p>



<a name="163860436"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860436" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860436">(Apr 21 2019 at 17:33)</a>:</h4>
<p><code>import data.int.basic</code> at the top of your file (you'll need the maths library mathlib) and then apply that function, and you'll be left with goals of the form "n even or n odd -&gt; n+1 even or n+1 odd" which you should be able to cope with. Prove n even -&gt; n+1 odd and the other three results (e.g. n odd -&gt; n-1 even) first and then use them all to prove the result.</p>



<a name="163860497"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860497" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860497">(Apr 21 2019 at 17:34)</a>:</h4>
<p>Neat. I have mathlib, but I find most of the algebra/analysis files unreadable despite being highly competent with the material on paper. Are there any other packages you would recommend before diving into that level of material?</p>



<a name="163860556"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860556" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860556">(Apr 21 2019 at 17:36)</a>:</h4>
<p>I would recommend doing just what you're doing -- writing material yourself. I agree that the library is impenetrable for a beginner. Proofs are specifically shortened for efficiency reasons, they are not written to be readable. We are still lacking a bunch of good teaching material for mathematicians; I intend to make some this summer, however I also said that last summer.</p>



<a name="163860618"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860618" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860618">(Apr 21 2019 at 17:38)</a>:</h4>
<p>Here's me trying to do some problem sheets which we give to 1st year mathematicians at Imperial: <a href="https://github.com/ImperialCollegeLondon/M1F_example_sheets" target="_blank" title="https://github.com/ImperialCollegeLondon/M1F_example_sheets">https://github.com/ImperialCollegeLondon/M1F_example_sheets</a></p>



<a name="163860637"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860637" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860637">(Apr 21 2019 at 17:39)</a>:</h4>
<p>Oh wow, that's a substantial amount of material. Thank you so much!</p>



<a name="163860684"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860684" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860684">(Apr 21 2019 at 17:40)</a>:</h4>
<p>The proofs are written in a far more longwinded way, they might be more instructional but there are still not many comments.</p>



<a name="163860685"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860685" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860685">(Apr 21 2019 at 17:40)</a>:</h4>
<p>You can step through them in tactic mode and watch the state change, of course.</p>



<a name="163860739"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860739" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860739">(Apr 21 2019 at 17:42)</a>:</h4>
<p>Right, I think that as long as I can just run through the tactic state I should be fine. Are there solutions for every single exercise?</p>



<a name="163860801"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860801" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860801">(Apr 21 2019 at 17:44)</a>:</h4>
<p>Also, despite there being a real numbers package in mathlib, I've never seen it before. That's super useful!</p>



<a name="163860817"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860817" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860817">(Apr 21 2019 at 17:45)</a>:</h4>
<p>oh wow, there's also complex numbers defined. That's amazing</p>



<a name="163860818"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860818" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860818">(Apr 21 2019 at 17:45)</a>:</h4>
<p>I don't think I managed every single exercise. There were some which were hard to formalise.</p>



<a name="163860865"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860865" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860865">(Apr 21 2019 at 17:46)</a>:</h4>
<p>Those answers are really just a big work in progress. They were just me trying to figure out if Lean was ready for a beginning undergraduate level maths course. It was.</p>



<a name="163860866"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860866" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860866">(Apr 21 2019 at 17:46)</a>:</h4>
<p>Are you a professor at Imperial?</p>



<a name="163860867"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860867" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860867">(Apr 21 2019 at 17:46)</a>:</h4>
<p>Yes</p>



<a name="163860881"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860881" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860881">(Apr 21 2019 at 17:47)</a>:</h4>
<p>Oh, that's awesome. I'm just an undergrad math student</p>



<a name="163860882"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860882" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860882">(Apr 21 2019 at 17:48)</a>:</h4>
<p>I felt like that when I was trying to get Lean to do my own problem sheets.</p>



<a name="163860993"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163860993" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163860993">(Apr 21 2019 at 17:50)</a>:</h4>
<p>Haha yeah, the professor here at UVA has a tough time teaching Lean. It seems like it's one of those things where many trivial proofs on paper are just very difficult to formalise, despite familiarity</p>



<a name="163861008"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163861008" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163861008">(Apr 21 2019 at 17:51)</a>:</h4>
<p>Yes. I spent about a year being very frustrated with not being able to make Lean do obvious things. I'm now finally over that initial learning hump and I can write even research level maths in Lean now, although it can take a long time.</p>



<a name="163861071"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163861071" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163861071">(Apr 21 2019 at 17:53)</a>:</h4>
<p>Well congrats. I hope to get to that point someday. What maths research have you been able to formalise in Lean?</p>



<a name="163861075"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163861075" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163861075">(Apr 21 2019 at 17:53)</a>:</h4>
<p><a href="https://github.com/leanprover-community/lean-perfectoid-spaces" target="_blank" title="https://github.com/leanprover-community/lean-perfectoid-spaces">https://github.com/leanprover-community/lean-perfectoid-spaces</a></p>



<a name="163861076"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163861076" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163861076">(Apr 21 2019 at 17:53)</a>:</h4>
<p>It's not finished yet but we're getting there.</p>



<a name="163861121"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163861121" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163861121">(Apr 21 2019 at 17:54)</a>:</h4>
<p>I've just spent the last 30 minutes staring at <a href="#narrow/stream/116395-maths/topic/Cute.20lemma/near/163135381" title="#narrow/stream/116395-maths/topic/Cute.20lemma/near/163135381">https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cute.20lemma/near/163135381</a></p>



<a name="163861130"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163861130" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163861130">(Apr 21 2019 at 17:54)</a>:</h4>
<p>some technical lemma about topological spaces which we need.</p>



<a name="163861147"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163861147" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163861147">(Apr 21 2019 at 17:55)</a>:</h4>
<p>that's... absolutely amazing. I never imagined we could do something like this in Lean so soon.</p>



<a name="163861149"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163861149" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163861149">(Apr 21 2019 at 17:55)</a>:</h4>
<p>Yeah me neither</p>



<a name="163861150"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163861150" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163861150">(Apr 21 2019 at 17:55)</a>:</h4>
<p>I've had a huge amount of support from other people here</p>



<a name="163861156"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163861156" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163861156">(Apr 21 2019 at 17:56)</a>:</h4>
<p>18 months ago there weren't even complex numbers</p>



<a name="163861201"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163861201" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163861201">(Apr 21 2019 at 17:56)</a>:</h4>
<p>Now we have schemes <a href="https://github.com/ramonfmir/lean-scheme" target="_blank" title="https://github.com/ramonfmir/lean-scheme">https://github.com/ramonfmir/lean-scheme</a> and they work</p>



<a name="163861203"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163861203" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163861203">(Apr 21 2019 at 17:56)</a>:</h4>
<p>Wow. Yeah, I'm now very happy that I've been introduced to this chat by Dr. Hölzl</p>



<a name="163861205"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163861205" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163861205">(Apr 21 2019 at 17:56)</a>:</h4>
<p>Oh wow, algebraic geometry? I'll have to tell my advisor about this</p>



<a name="163861218"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163861218" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163861218">(Apr 21 2019 at 17:57)</a>:</h4>
<p>we have stuff which reflects the interests of the people involved, I guess.</p>



<a name="163861264"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163861264" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163861264">(Apr 21 2019 at 17:58)</a>:</h4>
<p>Thank you so much for all this info. I really appreciate it. I look forward to participating more in the future, when I get a little bit more acquainted with Lean.</p>



<a name="163861269"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163861269" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163861269">(Apr 21 2019 at 17:58)</a>:</h4>
<p><a href="#narrow/stream/116395-maths/topic/Taking.20the.20Stacks.20Project.20formalisation.20forward" title="#narrow/stream/116395-maths/topic/Taking.20the.20Stacks.20Project.20formalisation.20forward">https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Taking.20the.20Stacks.20Project.20formalisation.20forward</a></p>



<a name="163861270"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163861270" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163861270">(Apr 21 2019 at 17:58)</a>:</h4>
<p>That's the schemes thread</p>



<a name="163861273"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163861273" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163861273">(Apr 21 2019 at 17:58)</a>:</h4>
<p>we're going to re-write it using the category theory library; at the minute we make all the categories by hand.</p>



<a name="163861283"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163861283" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163861283">(Apr 21 2019 at 17:59)</a>:</h4>
<p>There are universe issues, as ever in category theory, so it gets a bit hairy because you have to do it all properly in a system like this</p>



<a name="163861354"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163861354" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163861354">(Apr 21 2019 at 18:00)</a>:</h4>
<p>That makes sense. Cat theory makes for the introduction of some interesting nuances</p>



<a name="163861817"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163861817" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163861817">(Apr 21 2019 at 18:14)</a>:</h4>
<p>How do I apply one direction of an iff? Like, if I wanted to only apply the left implication in a proof.</p>



<a name="163862508"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163862508" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163862508">(Apr 21 2019 at 18:36)</a>:</h4>
<p><code>bla.1</code> or <code>bla.mp</code></p>



<a name="163862512"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163862512" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163862512">(Apr 21 2019 at 18:36)</a>:</h4>
<p>which is short for <code>iff.mp bla</code></p>



<a name="163862527"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163862527" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163862527">(Apr 21 2019 at 18:37)</a>:</h4>
<p>oh okay, so if my iff statement was titled bla, bla.1 would be the left implication, and bla.2 would be the right?</p>



<a name="163862878"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163862878" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163862878">(Apr 21 2019 at 18:48)</a>:</h4>
<p>Also, where can I find the xenalib package?</p>



<a name="163862942"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163862942" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163862942">(Apr 21 2019 at 18:50)</a>:</h4>
<p>nvm, found it</p>



<a name="163902237"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163902237" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163902237">(Apr 22 2019 at 13:02)</a>:</h4>
<p>Okay, I've got a Lean file I've tinkered around with in the past, which includes some simple proofs about integers. Some propositions I've failed to prove in Lean, and the rest I'm sure are anything but efficient. I was wondering if anyone would be willing to look over this file for me and give me some pointers on how to improve my proving techniques. <a href="/user_uploads/3121/oDrGTH44Zfg48XIg3ZaoHSYE/int_props.lean" target="_blank" title="int_props.lean">int_props.lean</a></p>



<a name="163902261"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163902261" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163902261">(Apr 22 2019 at 13:03)</a>:</h4>
<p>It's sort of a long file, and not very organised, but any help at all would be really appreciated. Sorry in advance.</p>



<a name="163965002"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163965002" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163965002">(Apr 23 2019 at 06:12)</a>:</h4>
<p>I'm having trouble defining structure fields. The generic construction of structures is fine, I just don't understand fields. How would I go about appending them to a given structure?</p>



<a name="163965231"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163965231" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163965231">(Apr 23 2019 at 06:16)</a>:</h4>
<p>Do you mean extending a structure?</p>



<a name="163965232"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163965232" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163965232">(Apr 23 2019 at 06:16)</a>:</h4>
<p>Search for "extend" in mathlib and you will find lots of examples</p>



<a name="163966248"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163966248" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163966248">(Apr 23 2019 at 06:41)</a>:</h4>
<p>oh, cool. Thank you. I didn't even know what I was looking for until you showed me</p>



<a name="163967041"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163967041" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163967041">(Apr 23 2019 at 06:58)</a>:</h4>
<p>You might want to read the chapters on inductive types and structures in TPIL.</p>



<a name="163968134"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163968134" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163968134">(Apr 23 2019 at 07:22)</a>:</h4>
<p><span class="user-mention" data-user-id="218940">@Greg Conneen</span> what Kevin really means is: if you have any interest in learning Lean, you want to read all of TPIL. The modern way of doing that is to launch VScode, open any Lean file, type Ctrl-shift-p type lean, select "Open documentation view", click "Theorem proving in Lean". This way you can click "Try it!" links on code snippets to open them right in VScode and play with them.</p>



<a name="163968575"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163968575" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163968575">(Apr 23 2019 at 07:32)</a>:</h4>
<p>Trying to figure out the community map: Greg, are you a student of the Kevin Sullivan?</p>



<a name="163985682"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163985682" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163985682">(Apr 23 2019 at 12:47)</a>:</h4>
<p>I was Prof. Sullivan's student last year, yes.</p>



<a name="163985995"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163985995" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163985995">(Apr 23 2019 at 12:49)</a>:</h4>
<p>I've read the entirety of TPIL. I'm just still having trouble with implementation. I guess I'll tinker around with it a bit more</p>



<a name="163988098"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163988098" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163988098">(Apr 23 2019 at 13:09)</a>:</h4>
<p>Okay, so if a group is defined like this</p>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">group</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">u</span>
<span class="n">fields</span><span class="o">:</span>
<span class="n">group</span><span class="bp">.</span><span class="n">mul</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">group</span> <span class="n">α</span><span class="o">],</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span>
<span class="n">group</span><span class="bp">.</span><span class="n">mul_assoc</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">group</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c_1</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c_1</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c_1</span><span class="o">)</span>
<span class="n">group</span><span class="bp">.</span><span class="n">one</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">group</span> <span class="n">α</span><span class="o">],</span> <span class="n">α</span>
<span class="n">group</span><span class="bp">.</span><span class="n">one_mul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">group</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span>
<span class="n">group</span><span class="bp">.</span><span class="n">mul_one</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">group</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">a</span>
<span class="n">group</span><span class="bp">.</span><span class="n">inv</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">group</span> <span class="n">α</span><span class="o">],</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span>
<span class="n">group</span><span class="bp">.</span><span class="n">mul_left_inv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">group</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span>
</pre></div>


<p>the way I would make something like this would be</p>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">fake_group</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">mul</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">group</span> <span class="n">α</span><span class="o">],</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span>
<span class="bp">...</span>
</pre></div>


<p>except, I want to change group α to fake_group α and I don't understand how to do that. I also in general don't understand the bracket notation or what pi does.</p>



<a name="163988588"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163988588" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163988588">(Apr 23 2019 at 13:14)</a>:</h4>
<p>Note, you can use</p>
<div class="codehilite"><pre><span></span>```lean
foobar
```
</pre></div>


<p>to get code blocks with syntax highlighting</p>



<a name="163988616"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163988616" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163988616">(Apr 23 2019 at 13:15)</a>:</h4>
<p>oh okay, thanks</p>



<a name="163988667"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163988667" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163988667">(Apr 23 2019 at 13:16)</a>:</h4>
<p>Note that a group is not defined the way you did. (Internally that is what Lean sees, maybe. But it isn't how it's written in the Lean source files.)</p>



<a name="163988729"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163988729" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163988729">(Apr 23 2019 at 13:16)</a>:</h4>
<p>Tip: write <code>#print group</code> in VScode, and <code>Ctrl</code>-click on <code>group</code>.</p>



<a name="163988749"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163988749" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163988749">(Apr 23 2019 at 13:16)</a>:</h4>
<p>Or put your cursor on <code>group</code> and hit <code>Ctrl - Shift - F10</code></p>



<a name="163988801"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163988801" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163988801">(Apr 23 2019 at 13:17)</a>:</h4>
<p>ohhhh I see. So a group is simply an extension of a monoid, which I assume is an extension of a semigroup.</p>



<a name="163988875"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163988875" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163988875">(Apr 23 2019 at 13:18)</a>:</h4>
<p>...which it is, 4 lines above. Thank you so much.</p>



<a name="163989273"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163989273" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163989273">(Apr 23 2019 at 13:22)</a>:</h4>
<p>So, in general, classes are used in the backend, but Lean interprets them as structures. What's the difference?</p>



<a name="163989367"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163989367" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163989367">(Apr 23 2019 at 13:23)</a>:</h4>
<p>Also, is there any way to formalise has_mul and has_one without extending those classes?</p>



<a name="163989436"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163989436" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163989436">(Apr 23 2019 at 13:24)</a>:</h4>
<p>No the difference between classes and structures is type class inference</p>



<a name="163989470"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163989470" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163989470">(Apr 23 2019 at 13:24)</a>:</h4>
<blockquote>
<p>Also, is there any way to formalise has_mul and has_one without extending those classes?</p>
</blockquote>
<p>Just copy paste their definitions.</p>



<a name="163989477"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163989477" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163989477">(Apr 23 2019 at 13:24)</a>:</h4>
<p>I don't know what you mean by that</p>



<a name="163989478"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163989478" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163989478">(Apr 23 2019 at 13:24)</a>:</h4>
<p>The word <code>class</code> is a red herring in this discussion</p>



<a name="163989495"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163989495" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163989495">(Apr 23 2019 at 13:24)</a>:</h4>
<p>You could write <code>structure</code> everywhere</p>



<a name="163989589"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163989589" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163989589">(Apr 23 2019 at 13:25)</a>:</h4>
<p>gotcha. So the only difference is that structures are't able to inherit the properties of other structures. So when would you use a structure over a class?</p>



<a name="163989676"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163989676" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163989676">(Apr 23 2019 at 13:26)</a>:</h4>
<p>No, structures can inherit</p>



<a name="163989696"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163989696" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163989696">(Apr 23 2019 at 13:26)</a>:</h4>
<p>The difference is "type class instance". Search for that in TPIL.</p>



<a name="163989699"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163989699" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163989699">(Apr 23 2019 at 13:26)</a>:</h4>
<p>oh. Then what do you mean by "type class inference?"</p>



<a name="163989710"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163989710" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163989710">(Apr 23 2019 at 13:27)</a>:</h4>
<p>oh okay, gotcha</p>



<a name="163989725"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163989725" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163989725">(Apr 23 2019 at 13:27)</a>:</h4>
<p>must've skimmed over that section</p>



<a name="163989731"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163989731" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163989731">(Apr 23 2019 at 13:27)</a>:</h4>
<p>inference, not inheritance <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="163989753"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163989753" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163989753">(Apr 23 2019 at 13:27)</a>:</h4>
<p>/me never read TPIL in detail. I'm a cargo cult Leaner.</p>



<a name="163989760"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163989760" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163989760">(Apr 23 2019 at 13:27)</a>:</h4>
<p>The difference between a structure and a class is that classes are structures with extra magical sauce.</p>



<a name="163989767"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163989767" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163989767">(Apr 23 2019 at 13:27)</a>:</h4>
<p>Ah, that's my confusion. Thank you for being patient with me</p>



<a name="163989772"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163989772" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163989772">(Apr 23 2019 at 13:27)</a>:</h4>
<p>I was trying to write some advanced notes on type class inference</p>



<a name="163989828"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163989828" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163989828">(Apr 23 2019 at 13:28)</a>:</h4>
<p>but before I wrote them I wrote some basic notes on type class inference for mathematicians</p>



<a name="163989843"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163989843" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163989843">(Apr 23 2019 at 13:28)</a>:</h4>
<p>These might help. They present the same material as in TPIL but in a way far more suited to mathematicians.</p>



<a name="163989867"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163989867" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163989867">(Apr 23 2019 at 13:28)</a>:</h4>
<p>They're in a branch of mathlib, hang on, I'll dig it out. I'm actually on an aeroplane at this point</p>



<a name="163990167"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163990167" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163990167">(Apr 23 2019 at 13:32)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/blob/kbuzzard_typeclass_inference_doc/docs/extras/typeclass_inference.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/kbuzzard_typeclass_inference_doc/docs/extras/typeclass_inference.md">https://github.com/leanprover-community/mathlib/blob/kbuzzard_typeclass_inference_doc/docs/extras/typeclass_inference.md</a></p>



<a name="163990228"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163990228" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163990228">(Apr 23 2019 at 13:33)</a>:</h4>
<p>I found typeclass inference really hard to learn. It was only when I began to try to do normal maths in Lean that I began to see the point of it and understand it properly.</p>



<a name="163990426"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163990426" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163990426">(Apr 23 2019 at 13:36)</a>:</h4>
<p>For reasons that you don't need to worry about and which might change, Lean keeps a ring in two packages not one. The first is a type called something like R. The second is a whole bunch of data which might be called something like <code>_inst_1 : ring R</code> and which you should never need to look at, but it's here that all the multiplication and the addition and the zero and the axioms are all stored. You will probably not need to dig out the axioms, you should just be applying lemmas, if you're doing mathematics -- but sometimes it's important to know where Lean magics up e.g. the proof of the distributivity law for the integers, and if you want to know this then you need to know about typeclass inference.</p>



<a name="163993041"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163993041" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163993041">(Apr 23 2019 at 14:10)</a>:</h4>
<p>What if I wanted to talk about a ternary operator instead of a binary one (I want to define an algebraic heap)? I can't use has_mul, since it's strictly binary...</p>



<a name="163993235"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163993235" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163993235">(Apr 23 2019 at 14:12)</a>:</h4>
<p>yup</p>



<a name="163993287"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163993287" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163993287">(Apr 23 2019 at 14:13)</a>:</h4>
<p>what exactly is your question about ternary operators?</p>



<a name="163993708"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163993708" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163993708">(Apr 23 2019 at 14:17)</a>:</h4>
<p>I want to define a class, let's start with semiheap. I only need it to have the following property, called para-associativity:</p>
<div class="codehilite"><pre><span></span><span class="k">forall</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="o">:</span> <span class="n">alpha</span><span class="o">,</span> <span class="o">[[</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">]</span> <span class="n">d</span> <span class="n">e</span><span class="o">]</span> <span class="bp">=</span> <span class="o">[</span><span class="n">a</span> <span class="o">[</span><span class="n">d</span> <span class="n">c</span> <span class="n">b</span><span class="o">]</span> <span class="n">e</span><span class="o">]</span> <span class="bp">=</span> <span class="o">[</span><span class="n">a</span> <span class="n">b</span> <span class="o">[</span><span class="n">c</span> <span class="n">d</span> <span class="n">e</span><span class="o">]]</span>
</pre></div>


<p>where [a b c] is a ternary operator. Although, If I have to use different notation given Lean's use of square brackets, that's fine</p>



<a name="163993810"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163993810" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163993810">(Apr 23 2019 at 14:19)</a>:</h4>
<p>I assume I have to define some sort of infix for a ternary operator, but I don't know how to implement that</p>



<a name="163993844"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163993844" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163993844">(Apr 23 2019 at 14:19)</a>:</h4>
<p>Does the operator have a "canonical" name in the literature?</p>



<a name="163993867"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163993867" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163993867">(Apr 23 2019 at 14:19)</a>:</h4>
<p>section 10.3 in TPIL describes notation</p>



<a name="163993868"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163993868" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163993868">(Apr 23 2019 at 14:19)</a>:</h4>
<p>You will first want to define it without the ternary notation.</p>



<a name="163993885"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163993885" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163993885">(Apr 23 2019 at 14:19)</a>:</h4>
<p>Afterward, you can define the notation, and start using it.</p>



<a name="163994014"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163994014" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163994014">(Apr 23 2019 at 14:20)</a>:</h4>
<p>Okay. I assume that I need to give it an operation on 3 elements, then state the rule</p>



<a name="163994076"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163994076" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163994076">(Apr 23 2019 at 14:21)</a>:</h4>
<p>And no, unfortunately there's not really a canonical name for the operator. It's just a ternary operation, in the same way that the standard operation a group deals with is just a binary one</p>



<a name="163994086"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163994086" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163994086">(Apr 23 2019 at 14:22)</a>:</h4>
<p>Yup. So you want fields</p>
<div class="codehilite"><pre><span></span><span class="o">(</span><span class="n">tern_op</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">semi_assoc</span> <span class="o">:</span> <span class="err">\</span><span class="n">for</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span><span class="o">,</span> <span class="n">blabla</span><span class="o">)</span>
</pre></div>



<a name="163994154"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163994154" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163994154">(Apr 23 2019 at 14:22)</a>:</h4>
<blockquote>
<p>And no, unfortunately there's not really a canonical name for the operator. It's just a ternary operation, in the same way that the standard operation a group deals with is just a binary one</p>
</blockquote>
<p>We "canonically" call it <em>multiplication</em>.</p>



<a name="163994218"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163994218" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163994218">(Apr 23 2019 at 14:23)</a>:</h4>
<p>Ah, I see. That makes sense. Although, most mathematicians I know don't like to be so restrictive in terminology :P</p>



<a name="163994232"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163994232" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163994232">(Apr 23 2019 at 14:23)</a>:</h4>
<p>I was just wondering whether there was a good alternative to <code>tern_op</code>.</p>



<a name="163994355"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163994355" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163994355">(Apr 23 2019 at 14:24)</a>:</h4>
<p>Yeah, I figured that's what you were after. Heaps aren't really a common algebraic structure, I'm really just trying to implement this so I have a better understanding of how Lean deals with structures/classes</p>



<a name="163994731"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163994731" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163994731">(Apr 23 2019 at 14:29)</a>:</h4>
<p>Also, am I able to say that 3 things are equal in one field without using "and"?</p>



<a name="163994748"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163994748" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163994748">(Apr 23 2019 at 14:29)</a>:</h4>
<p>like how I wrote above</p>



<a name="163994885"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163994885" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163994885">(Apr 23 2019 at 14:31)</a>:</h4>
<p>there are stupid indirect ways to say it, but using <code>and</code> is the reasonable one</p>



<a name="163995024"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163995024" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163995024">(Apr 23 2019 at 14:32)</a>:</h4>
<p>Okay. Unfortunate, but I guess it's better than defining two separate fields</p>



<a name="163995099"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163995099" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163995099">(Apr 23 2019 at 14:33)</a>:</h4>
<p>If you really want to you can build an API around this</p>



<a name="163995181"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163995181" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163995181">(Apr 23 2019 at 14:34)</a>:</h4>
<p>No thank you lol</p>



<a name="163995227"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163995227" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163995227">(Apr 23 2019 at 14:34)</a>:</h4>
<p>You will need lemmas about heaps saying that anyway</p>



<a name="163995273"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163995273" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163995273">(Apr 23 2019 at 14:35)</a>:</h4>
<p>Whatever is inside your field, you'll want a lemma asserting the three relevant equalities</p>



<a name="163995312"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163995312" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163995312">(Apr 23 2019 at 14:35)</a>:</h4>
<p>I don't know what you mean</p>



<a name="163995379"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163995379" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163995379">(Apr 23 2019 at 14:36)</a>:</h4>
<p>Why would I need a lemma? Are you talking about showing that some object is a heap?</p>



<a name="163995408"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163995408" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163995408">(Apr 23 2019 at 14:36)</a>:</h4>
<p>I'd expect that just implementing the classes wouldn't require lemmas</p>



<a name="163995431"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163995431" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163995431">(Apr 23 2019 at 14:36)</a>:</h4>
<p>No, he is talking about making it usable</p>



<a name="163995485"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163995485" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163995485">(Apr 23 2019 at 14:37)</a>:</h4>
<p>Oh, okay. So I can't refer to the fields until I define lemmas for them?</p>



<a name="163995586"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163995586" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163995586">(Apr 23 2019 at 14:39)</a>:</h4>
<p>You will have:</p>
<div class="codehilite"><pre><span></span><span class="n">class</span> <span class="n">heap</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">:=</span>
<span class="bp">...</span>

<span class="kn">namespace</span> <span class="n">heap</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">heap</span> <span class="n">X</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span>
<span class="kn">lemma</span> <span class="n">assoc1</span>  <span class="o">:</span> <span class="o">[[</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">]</span> <span class="n">d</span> <span class="n">e</span><span class="o">]</span> <span class="bp">=</span> <span class="o">[</span><span class="n">a</span> <span class="o">[</span><span class="n">d</span> <span class="n">c</span> <span class="n">b</span><span class="o">]</span> <span class="n">e</span><span class="o">]</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">lemma</span> <span class="n">assoc2</span>  <span class="o">:</span> <span class="o">[</span><span class="n">a</span> <span class="o">[</span><span class="n">d</span> <span class="n">c</span> <span class="n">b</span><span class="o">]</span> <span class="n">e</span><span class="o">]</span> <span class="bp">=</span> <span class="o">[</span><span class="n">a</span> <span class="n">b</span> <span class="o">[</span><span class="n">c</span> <span class="n">d</span> <span class="n">e</span><span class="o">]]</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">lemma</span> <span class="n">assoc3</span>  <span class="o">:</span> <span class="o">[[</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">]</span> <span class="n">d</span> <span class="n">e</span><span class="o">]</span> <span class="bp">=</span> <span class="o">[</span><span class="n">a</span> <span class="n">b</span> <span class="o">[</span><span class="n">c</span> <span class="n">d</span> <span class="n">e</span><span class="o">]]</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kn">end</span> <span class="n">heap</span>
</pre></div>



<a name="163995601"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163995601" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163995601">(Apr 23 2019 at 14:39)</a>:</h4>
<p>I would have three fields rather than an <code>and</code></p>



<a name="163995610"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163995610" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163995610">(Apr 23 2019 at 14:39)</a>:</h4>
<p>You can refer to them, otherwise you can't state the lemmas. What Patrick is saying is that with only the fields you'll have something that is cumbersome to use.</p>



<a name="163995614"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163995614" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163995614">(Apr 23 2019 at 14:39)</a>:</h4>
<p>yeah I'm putting it into 3 fields. I've realised that's easier</p>



<a name="163995629"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163995629" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163995629">(Apr 23 2019 at 14:39)</a>:</h4>
<p>The point is: whatever the implementaion chosen, after writing  those three lemmas, you will have your three equalities</p>



<a name="163995708"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163995708" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163995708">(Apr 23 2019 at 14:40)</a>:</h4>
<p>What does that change? Just being able to refer to the property without using semiheap.*?</p>



<a name="163995709"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163995709" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163995709">(Apr 23 2019 at 14:40)</a>:</h4>
<p>Of course if you put all three lemmas as fields then you don't have to state theses lemmas to use them (unless for some reason you want to change binder types, but that's a more advanced discussion)</p>



<a name="163995722"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163995722" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163995722">(Apr 23 2019 at 14:41)</a>:</h4>
<p>Also, is Type* a way of referring to an arbitrary Type level without defining a universe?</p>



<a name="163995769"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163995769" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163995769">(Apr 23 2019 at 14:41)</a>:</h4>
<p>And if you use redundant fields like that you will probably want a custom constructor</p>



<a name="163995886"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163995886" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163995886">(Apr 23 2019 at 14:43)</a>:</h4>
<p>How would a custom constructor help me?</p>



<a name="163995931"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163995931" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163995931">(Apr 23 2019 at 14:43)</a>:</h4>
<p>Sorry, but I'm still very new, and I don't really see the big picture yet</p>



<a name="163996078"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163996078" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163996078">(Apr 23 2019 at 14:45)</a>:</h4>
<p>I think the discussion would be much easier if you write something and then we comment it</p>



<a name="163996098"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163996098" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163996098">(Apr 23 2019 at 14:45)</a>:</h4>
<p>Abstract discussion won't help</p>



<a name="163996115"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163996115" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163996115">(Apr 23 2019 at 14:45)</a>:</h4>
<p>Yeah I agree. I'll post in just a second</p>



<a name="163997611"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163997611" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163997611">(Apr 23 2019 at 15:00)</a>:</h4>
<p>This is what I've got so far:</p>
<div class="codehilite"><pre><span></span><span class="n">class</span> <span class="n">semiheap</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">tern_op</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="o">)</span>
<span class="o">(</span><span class="n">para_assoc1</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span>
    <span class="n">tern_op</span> <span class="o">(</span><span class="n">tern_op</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="n">d</span> <span class="n">e</span> <span class="bp">=</span> <span class="n">tern_op</span> <span class="n">a</span> <span class="o">(</span><span class="n">tern_op</span> <span class="n">d</span> <span class="n">c</span> <span class="n">b</span><span class="o">)</span> <span class="n">e</span><span class="o">)</span>
<span class="o">(</span><span class="n">para_assoc2</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span>
    <span class="n">tern_op</span> <span class="o">(</span><span class="n">tern_op</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="n">d</span> <span class="n">e</span> <span class="bp">=</span> <span class="n">tern_op</span> <span class="n">a</span> <span class="n">b</span> <span class="o">(</span><span class="n">tern_op</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span><span class="o">))</span>
<span class="o">(</span><span class="n">para_assoc3</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span>
    <span class="n">tern_op</span> <span class="n">a</span> <span class="o">(</span><span class="n">tern_op</span> <span class="n">d</span> <span class="n">c</span> <span class="n">b</span><span class="o">)</span> <span class="n">e</span> <span class="bp">=</span> <span class="n">tern_op</span> <span class="n">a</span> <span class="n">b</span> <span class="o">(</span><span class="n">tern_op</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span><span class="o">))</span>


<span class="kn">namespace</span> <span class="n">semiheap</span>
<span class="kn">notation</span> <span class="bp">`</span><span class="o">[</span><span class="bp">`</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">`</span><span class="o">]</span><span class="bp">`</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">tern_op</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">semiheap</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span>

<span class="kn">lemma</span> <span class="n">para_assoc1</span> <span class="o">:</span> <span class="n">sorry</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kn">lemma</span> <span class="n">para_assoc2</span> <span class="o">:</span> <span class="n">sorry</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kn">lemma</span> <span class="n">para_assoc3</span> <span class="o">:</span> <span class="n">sorry</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kn">end</span> <span class="n">semiheap</span>
</pre></div>


<p>The semiheap as defined is fine. I'm just having trouble with the notation, since it throws an error saying I'm referencing local variables if I put it below them, and I don't know how to reference the semiheap alpha if I put it above.</p>



<a name="163998753"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163998753" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163998753">(Apr 23 2019 at 15:12)</a>:</h4>
<p>I don't think you can use space as a delimiter in this notation. You can play with</p>
<div class="codehilite"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="n">semiheap</span><span class="w"> </span><span class="p">(</span><span class="err">α</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nc">Type</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">:=</span><span class="w"></span>
<span class="p">(</span><span class="n">tern_op</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">α</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="err">α</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="err">α</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="err">α</span><span class="p">)</span><span class="w"></span>
<span class="p">(</span><span class="n">notation</span><span class="w"> </span><span class="n">`</span><span class="p">[</span><span class="n">`</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">`</span><span class="o">|</span><span class="n">`</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">`</span><span class="o">|</span><span class="n">`</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="n">`</span><span class="p">]</span><span class="n">`</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">tern_op</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">z</span><span class="p">)</span><span class="w"></span>
<span class="p">(</span><span class="n">para_assoc1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">∀</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">α</span><span class="p">,</span><span class="w"> </span><span class="p">[[</span><span class="n">a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">c</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">e</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">[</span><span class="n">d</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">b</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">e</span><span class="p">])</span><span class="w"></span>
<span class="p">(</span><span class="n">para_assoc2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">∀</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">α</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">[</span><span class="n">d</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">b</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">e</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">[</span><span class="n">c</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">e</span><span class="p">]])</span><span class="w"></span>
<span class="p">(</span><span class="n">para_assoc3</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">∀</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">α</span><span class="p">,</span><span class="w"> </span><span class="p">[[</span><span class="n">a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">c</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">e</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">[</span><span class="n">c</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">e</span><span class="p">]])</span><span class="w"></span>


<span class="n">def</span><span class="w"> </span><span class="n">semiheap</span><span class="o">.</span><span class="n">mk</span><span class="err">&#39;</span><span class="w"> </span><span class="p">{</span><span class="err">α</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nc">Type</span><span class="o">*</span><span class="p">}</span><span class="w"> </span><span class="p">(</span><span class="n">op</span><span class="w"> </span><span class="o">:</span><span class="err">α</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="err">α</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="err">α</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="err">α</span><span class="p">)</span><span class="w"></span>
<span class="p">(</span><span class="n">h1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">∀</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">α</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">op</span><span class="w"> </span><span class="p">(</span><span class="n">op</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">op</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">(</span><span class="n">op</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"></span>
<span class="p">(</span><span class="n">h2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">∀</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">α</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">op</span><span class="w"> </span><span class="p">(</span><span class="n">op</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">op</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="p">(</span><span class="n">op</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="n">e</span><span class="p">))</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">semiheap</span><span class="w"> </span><span class="err">α</span><span class="w"> </span><span class="o">:=</span><span class="w"></span>
<span class="p">{</span><span class="w"> </span><span class="n">tern_op</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">op</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="n">para_assoc1</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">h1</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="n">para_assoc2</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="err">λ</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="n">e</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">h1</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="err">▸</span><span class="w"> </span><span class="p">(</span><span class="n">h2</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="n">e</span><span class="p">),</span><span class="w"></span>
<span class="w">  </span><span class="n">para_assoc3</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">h2</span><span class="p">}</span><span class="w"></span>
</pre></div>



<a name="163998816"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163998816" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163998816">(Apr 23 2019 at 15:13)</a>:</h4>
<p>The function is the custom constructor, it lets you build a structure by providing only two equalities</p>



<a name="163999075"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163999075" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163999075">(Apr 23 2019 at 15:16)</a>:</h4>
<p>Why have we defined .mk'? What does it do? Also, what is ▸?</p>



<a name="163999113"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163999113" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163999113">(Apr 23 2019 at 15:17)</a>:</h4>
<p>Please first try to define an instance of <code>semiheap</code></p>



<a name="163999124"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163999124" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163999124">(Apr 23 2019 at 15:17)</a>:</h4>
<p>It clearly rewrote, but what does it do in general?</p>



<a name="163999130"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/163999130" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#163999130">(Apr 23 2019 at 15:17)</a>:</h4>
<p>Okay, I will</p>



<a name="164003046"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164003046" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164003046">(Apr 23 2019 at 16:01)</a>:</h4>
<p>I've got it.</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">tern_add</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="bp">→</span> <span class="bp">ℤ</span> <span class="bp">→</span> <span class="bp">ℤ</span> <span class="bp">→</span> <span class="bp">ℤ</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">,</span> <span class="n">a</span><span class="bp">+</span><span class="n">b</span><span class="bp">+</span><span class="n">c</span>
<span class="kn">instance</span> <span class="n">int_semiheap</span> <span class="o">:</span> <span class="n">semiheap</span> <span class="bp">ℤ</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="n">apply</span> <span class="n">semiheap</span><span class="bp">.</span><span class="n">mk&#39;</span> <span class="n">tern_add</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">tern_add</span><span class="o">,</span>
<span class="n">simp</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">tern_add</span><span class="o">,</span>
<span class="n">simp</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>



<a name="164003070"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164003070" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164003070">(Apr 23 2019 at 16:01)</a>:</h4>
<p>Thank you so much for your help.</p>



<a name="164003572"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164003572" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164003572">(Apr 23 2019 at 16:06)</a>:</h4>
<p>Does that code compile?</p>



<a name="164003623"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164003623" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164003623">(Apr 23 2019 at 16:07)</a>:</h4>
<p>Anyway, the point is you had to prove only para-associativity equalities instead of three</p>



<a name="164003676"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164003676" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164003676">(Apr 23 2019 at 16:07)</a>:</h4>
<p>You can also study (after adding <code>import tactic.abel</code> on top of your file):</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">tern_add</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="bp">→</span> <span class="bp">ℤ</span> <span class="bp">→</span> <span class="bp">ℤ</span> <span class="bp">→</span> <span class="bp">ℤ</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">,</span> <span class="n">a</span><span class="bp">+</span><span class="n">b</span><span class="bp">+</span><span class="n">c</span>

<span class="kn">example</span> <span class="o">:</span> <span class="n">semiheap</span> <span class="bp">ℤ</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">tern_op</span> <span class="o">:=</span> <span class="n">tern_add</span><span class="o">,</span>
  <span class="n">para_assoc1</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span> <span class="n">intros</span><span class="o">,</span> <span class="n">dsimp</span><span class="o">[</span><span class="n">tern_add</span><span class="o">],</span> <span class="n">abel</span> <span class="o">},</span>
  <span class="n">para_assoc2</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span> <span class="n">intros</span><span class="o">,</span> <span class="n">dsimp</span><span class="o">[</span><span class="n">tern_add</span><span class="o">],</span> <span class="n">abel</span> <span class="o">},</span>
  <span class="n">para_assoc3</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span> <span class="n">intros</span><span class="o">,</span> <span class="n">dsimp</span><span class="o">[</span><span class="n">tern_add</span><span class="o">],</span> <span class="n">abel</span> <span class="o">}</span> <span class="o">}</span>


<span class="kn">example</span> <span class="o">:</span> <span class="n">semiheap</span> <span class="bp">ℤ</span> <span class="o">:=</span>
<span class="n">semiheap</span><span class="bp">.</span><span class="n">mk&#39;</span> <span class="n">tern_add</span> <span class="o">(</span><span class="k">by</span> <span class="o">{</span> <span class="n">intros</span><span class="o">,</span> <span class="n">dsimp</span> <span class="o">[</span><span class="n">tern_add</span><span class="o">],</span> <span class="n">abel</span> <span class="o">})</span> <span class="o">(</span><span class="k">by</span> <span class="o">{</span> <span class="n">intros</span><span class="o">,</span> <span class="n">dsimp</span> <span class="o">[</span><span class="n">tern_add</span><span class="o">],</span> <span class="n">abel</span> <span class="o">}</span>
</pre></div>



<a name="164003782"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164003782" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164003782">(Apr 23 2019 at 16:08)</a>:</h4>
<p>you can also replace <code>dsimp [tern_add]</code> by <code>unfold tern_add</code></p>



<a name="164003941"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164003941" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164003941">(Apr 23 2019 at 16:10)</a>:</h4>
<p>Okay, I will. I'm currently implementing heaps as an extension of semiheaps. How do I avoid having to write the notation as a field over and over?</p>



<a name="164004090"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164004090" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164004090">(Apr 23 2019 at 16:12)</a>:</h4>
<p>you need to reissue the notation command after the semiheap definition. The one inside the definition has limited scope</p>



<a name="164004118"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164004118" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164004118">(Apr 23 2019 at 16:12)</a>:</h4>
<p>Gotcha. So at most I'll only have to write it twice</p>



<a name="164004140"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164004140" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164004140">(Apr 23 2019 at 16:13)</a>:</h4>
<p>yes</p>



<a name="164019736"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164019736" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164019736">(Apr 23 2019 at 19:07)</a>:</h4>
<p>Is the symmetric group defined anywhere in mathlib? If not, I'd like to go about implementing it, and in doing so would need some guidance</p>



<a name="164019868"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164019868" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164019868">(Apr 23 2019 at 19:08)</a>:</h4>
<p>It is:</p>
<div class="codehilite"><pre><span></span><span class="n">src</span><span class="bp">/</span><span class="n">data</span><span class="bp">/</span><span class="n">equiv</span><span class="bp">/</span><span class="n">basic</span><span class="bp">.</span><span class="n">lean</span><span class="o">:</span><span class="c">/-</span><span class="cm">- `perm α` is the type of bijections from `α` to itself. -/</span>
</pre></div>



<a name="164019920"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164019920" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164019920">(Apr 23 2019 at 19:09)</a>:</h4>
<p>Thank you</p>



<a name="164020042"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164020042" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164020042">(Apr 23 2019 at 19:10)</a>:</h4>
<p>Followup question, has Cayley's theorem been proven?</p>



<a name="164020295"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164020295" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164020295">(Apr 23 2019 at 19:13)</a>:</h4>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span> I guess you did Cayley somewhere, right?</p>



<a name="164020371"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164020371" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164020371">(Apr 23 2019 at 19:14)</a>:</h4>
<p>No.</p>



<a name="164020394"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164020394" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164020394">(Apr 23 2019 at 19:14)</a>:</h4>
<p>But it won't be hard.</p>



<a name="164020421"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164020421" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164020421">(Apr 23 2019 at 19:14)</a>:</h4>
<p><span class="user-mention" data-user-id="218940">@Greg Conneen</span> It would be a very nice project to start with!</p>



<a name="164020443"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164020443" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164020443">(Apr 23 2019 at 19:14)</a>:</h4>
<p>Okay. I assume it won't be. That sounds like a great thing to do.</p>



<a name="164020496"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164020496" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164020496">(Apr 23 2019 at 19:15)</a>:</h4>
<p>I'm going to need help understanding data.equiv.basic though</p>



<a name="164020674"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164020674" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164020674">(Apr 23 2019 at 19:17)</a>:</h4>
<p>It looks like α ≃ β means α is isomorphic to β, given the defn. perm α makes sense. I'm still not completely comfortable with set theory notation and techniques in Lean, since I was introduced almost exclusively through propositions</p>



<a name="164021104"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164021104" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164021104">(Apr 23 2019 at 19:21)</a>:</h4>
<p><span class="user-mention" data-user-id="218940">@Greg Conneen</span> Do you have an idea how you would formalise the statement?</p>



<a name="164021263"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164021263" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164021263">(Apr 23 2019 at 19:23)</a>:</h4>
<p>I'm looking into that now. The proof is trivial to me on paper. I should be fine in abstracting it. I'll definitely ask for help with it when I need it</p>



<a name="164021723"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164021723" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164021723">(Apr 23 2019 at 19:28)</a>:</h4>
<blockquote>
<p>It looks like α ≃ β means α is isomorphic to β</p>
</blockquote>
<p>This is an extremely confusing notation, but you'll get used to it</p>



<a name="164021787"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164021787" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164021787">(Apr 23 2019 at 19:29)</a>:</h4>
<p>The first piece of truth is <code>α ≃ β</code> is the type of isomorphisms from <code>α</code> to <code>β</code></p>



<a name="164021806"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164021806" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164021806">(Apr 23 2019 at 19:29)</a>:</h4>
<p>So it's not a <code>Prop</code>, it contains data</p>



<a name="164021815"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164021815" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164021815">(Apr 23 2019 at 19:29)</a>:</h4>
<p>oh no</p>



<a name="164021875"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164021875" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164021875">(Apr 23 2019 at 19:30)</a>:</h4>
<p>lol that's certainly unintuitive</p>



<a name="164021956"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164021956" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164021956">(Apr 23 2019 at 19:30)</a>:</h4>
<p>The next layer of confusion is that an isomorphism from <code>α</code> to <code>β</code> is not only a map from <code>α</code> to <code>β</code> which happens to be an isomorphism, it's a bundle containing such a map, the corresponding inverse map and two proofs</p>



<a name="164022067"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164022067" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164022067">(Apr 23 2019 at 19:31)</a>:</h4>
<p>you need to read <a href="https://github.com/leanprover-community/mathlib/blob/master/src/data/equiv/basic.lean" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/src/data/equiv/basic.lean">https://github.com/leanprover-community/mathlib/blob/master/src/data/equiv/basic.lean</a></p>



<a name="164022095"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164022095" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164022095">(Apr 23 2019 at 19:31)</a>:</h4>
<p>keeping the above explanation in mind</p>



<a name="164022151"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164022151" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164022151">(Apr 23 2019 at 19:32)</a>:</h4>
<p>That's perfectly fine. I can understand that such a map needs more info packaged in with it. So, what's the actual prop that A is iso to B?</p>



<a name="164022152"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164022152" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164022152">(Apr 23 2019 at 19:32)</a>:</h4>
<p>don't forget to first read back the section on coercions in TPIL</p>



<a name="164022169"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164022169" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164022169">(Apr 23 2019 at 19:32)</a>:</h4>
<p>And yeah I've been reading that file</p>



<a name="164022251"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164022251" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164022251">(Apr 23 2019 at 19:33)</a>:</h4>
<p><code>nonempty (α ≃ β)</code></p>



<a name="164022274"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164022274" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164022274">(Apr 23 2019 at 19:33)</a>:</h4>
<p>This is the Prop you are looking for</p>



<a name="164022456"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164022456" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164022456">(Apr 23 2019 at 19:35)</a>:</h4>
<p>Probably I missed that piece of information: at what stage of your math studies are you? (Knowing this will help choosing explanations for you)</p>



<a name="164022688"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164022688" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164022688">(Apr 23 2019 at 19:38)</a>:</h4>
<p>I don't think I've fully elaborated. I'm a 2nd year undergraduate math major currently taking my first semester of graduate real and complex analysis, and my third semester of graduate algebra. I plan on studying algebraic combinatorics, algebraic geometry, or algebraic topology. Either way, interested in algebra</p>



<a name="164022856"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164022856" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164022856">(Apr 23 2019 at 19:40)</a>:</h4>
<p>I'm afraid my knowledge of the American university system is clearly not good enough to understand that answer. Can you give a couple of examples of theorems you recently learned in your most advanced courses?</p>



<a name="164023106"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164023106" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164023106">(Apr 23 2019 at 19:42)</a>:</h4>
<blockquote>
<p><code>nonempty (α ≃ β)</code></p>
</blockquote>
<p>That just says alpha bijects with beta. You want an isomorphism of what structure?</p>



<a name="164023186"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164023186" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164023186">(Apr 23 2019 at 19:43)</a>:</h4>
<p>He doesn't need more structure. He is trying to formalise Cayley's theorem.</p>



<a name="164023555"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164023555" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164023555">(Apr 23 2019 at 19:48)</a>:</h4>
<p>Yeah. I'm currently in a course on wedderburn theory/commutative algebra. So, for example, we just covered the classification theorem for semisimple rings and semisimple algebras. In manifolds, we just covered the generalisation of stokes' theorem, and we just had an ending seminar on the Poincare lemma and the DeRham cohomology.</p>



<a name="164023653"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164023653" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164023653">(Apr 23 2019 at 19:49)</a>:</h4>
<p>Thanks, this I understand (but I have no idea how to relate this to your abstract answer)</p>



<a name="164023777"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164023777" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164023777">(Apr 23 2019 at 19:50)</a>:</h4>
<p>Well, I'm glad I could clarify for you</p>



<a name="164249738"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164249738" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164249738">(Apr 26 2019 at 10:27)</a>:</h4>
<p>What is the recommended/most elegant way to simplify/rewrite a hypothesis/assumption while re-stating the desired outcome of the simplification/rewriting? For example, doing</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">hyp</span> <span class="o">:</span> <span class="n">true</span> <span class="bp">∧</span> <span class="n">true</span> <span class="bp">=</span> <span class="n">false</span><span class="o">)</span> <span class="o">:</span> <span class="n">false</span> <span class="o">:=</span>
<span class="k">have</span> <span class="n">hyp</span> <span class="o">:</span> <span class="n">true</span> <span class="bp">=</span> <span class="n">false</span><span class="o">,</span> <span class="k">by</span> <span class="o">{</span> <span class="n">simp</span> <span class="n">at</span> <span class="n">hyp</span><span class="o">,</span> <span class="n">assumption</span> <span class="o">},</span>
<span class="n">sorry</span>
</pre></div>


<p>is not quite perfect as I have to write <code>by { simp at hyp, assumption }</code> (preferably, I'd like to simply write <code>by simp at hyp</code>) and leaves me with two hypotheses called <code>hyp</code>, namely</p>
<div class="codehilite"><pre><span></span><span class="n">hyp</span> <span class="o">:</span> <span class="n">true</span> <span class="bp">∧</span> <span class="n">true</span> <span class="bp">=</span> <span class="n">false</span><span class="o">,</span>
<span class="n">hyp</span> <span class="o">:</span> <span class="n">true</span> <span class="bp">=</span> <span class="n">false</span>
</pre></div>


<p>Is there something like <code>change</code> for hypotheses?</p>



<a name="164251420"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164251420" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164251420">(Apr 26 2019 at 10:59)</a>:</h4>
<p>There is <code>rwa</code> and <code>simpa</code>. Do those help you?</p>



<a name="164251567"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164251567" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164251567">(Apr 26 2019 at 11:01)</a>:</h4>
<p>Alright, that solves the former issue. Can I also somehow drop the non-simplified version from the list of assumptions?</p>



<a name="164251650"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164251650" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164251650">(Apr 26 2019 at 11:03)</a>:</h4>
<p><span class="user-mention" data-user-id="198376">@Kevin Kappelmann</span>  <code>replace hyp : bla, by foobar</code>?</p>



<a name="164251946"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164251946" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164251946">(Apr 26 2019 at 11:08)</a>:</h4>
<p>Yeah, that's exactly what I was looking for! thanks :) I do not think <code>replace</code> is mentioned in the tutorial. Is there some sort of document/website with "advanced tactics/APIs" that I can consult in such cases?</p>



<a name="164251990"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164251990" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164251990">(Apr 26 2019 at 11:09)</a>:</h4>
<p>Which tutorial?</p>



<a name="164251998"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164251998" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164251998">(Apr 26 2019 at 11:09)</a>:</h4>
<p>See the <code>docs/</code> folder in mathlib. There is some stuff there.</p>



<a name="164252005"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164252005" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164252005">(Apr 26 2019 at 11:10)</a>:</h4>
<p>This document: <a href="https://leanprover.github.io/theorem_proving_in_lean/theorem_proving_in_lean.pdf" target="_blank" title="https://leanprover.github.io/theorem_proving_in_lean/theorem_proving_in_lean.pdf">https://leanprover.github.io/theorem_proving_in_lean/theorem_proving_in_lean.pdf</a></p>



<a name="164253453"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164253453" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164253453">(Apr 26 2019 at 11:38)</a>:</h4>
<blockquote>
<p>Is there something like <code>change</code> for hypotheses?</p>
</blockquote>
<p>Yes, it's called <code>change</code></p>



<a name="164253515"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164253515" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164253515">(Apr 26 2019 at 11:39)</a>:</h4>
<p>If you have <code>hyp : 1 + 1 = 2</code> you can <code>change 2 = 2 at hyp</code></p>



<a name="164446721"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164446721" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164446721">(Apr 29 2019 at 12:20)</a>:</h4>
<p>It's me again :') I'm having some problems when using <code>let</code>-expressions + cases/induction. For example, this does not work</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">n</span> <span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">n</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="k">let</span> <span class="n">s</span> <span class="o">:=</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">,</span>
<span class="n">induction</span> <span class="n">n</span><span class="o">,</span>
<span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">zero</span> <span class="o">:</span> <span class="o">{</span><span class="n">sorry</span><span class="o">},</span> <span class="c1">-- error: could not find open goal of given case</span>
<span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="o">:</span> <span class="o">{</span><span class="n">sorry</span><span class="o">}</span>
<span class="kn">end</span>
</pre></div>


<p>whereas this works</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">n</span> <span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">n</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="n">induction</span> <span class="n">n</span><span class="o">,</span>
<span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">zero</span> <span class="o">:</span> <span class="o">{</span><span class="n">sorry</span><span class="o">},</span>
<span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="o">:</span> <span class="o">{</span><span class="n">sorry</span><span class="o">}</span>
<span class="kn">end</span>
</pre></div>


<p>Does someone know what I am doing wrong?</p>



<a name="164446952"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164446952" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164446952">(Apr 29 2019 at 12:24)</a>:</h4>
<p>Maybe that's a bug in <code>case</code>? You know that you don't need it, right?</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">n</span> <span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">n</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="k">let</span> <span class="n">s</span> <span class="o">:=</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">,</span>
<span class="n">induction</span> <span class="n">n</span><span class="o">,</span>
<span class="o">{</span><span class="n">sorry</span><span class="o">},</span>
<span class="o">{</span><span class="n">sorry</span><span class="o">}</span>
<span class="kn">end</span>
</pre></div>



<a name="164447000"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164447000" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164447000">(Apr 29 2019 at 12:25)</a>:</h4>
<p>Yep, I'd really like to keep the <code>case nat.xxx</code> annotations though to keep my proofs more readable.</p>



<a name="164447056"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164447056" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164447056">(Apr 29 2019 at 12:25)</a>:</h4>
<p>Make it a comment within the <code>{}</code>. And complain to the devs :-)</p>



<a name="164447163"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164447163" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164447163">(Apr 29 2019 at 12:27)</a>:</h4>
<p>Haha, alright :D Thanks</p>



<a name="164447324"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164447324" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164447324">(Apr 29 2019 at 12:29)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span> is this a bug?</p>



<a name="164447705"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164447705" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164447705">(Apr 29 2019 at 12:35)</a>:</h4>
<p>I think it is. I'll look into it</p>



<a name="164506505"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164506505" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164506505">(Apr 30 2019 at 02:51)</a>:</h4>
<p>Does <code>unfold</code> actually do anything other than change what the goal looks like? Isn't <code>#print</code> or <code>Ctrl-click</code> on what you're unfolding a replacement, since it's just a method of getting information about your goal? It seems that any proof can have the <code>unfold</code> statement removed, and it works just the same</p>



<a name="164506888"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164506888" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164506888">(Apr 30 2019 at 03:01)</a>:</h4>
<p>yes and no (and no). <code>unfold</code> will rewrite with equations that are not necessarily definitional equalities, so it might do more than just change the appearance of the goal. It's really a wrapper around <code>simp</code> with particular config options. <code>dunfold</code> is closer to your description, as it only does defeq simplifications. But there are two reasons that it's still not correct to say that it "doesn't actually do anything other than change what the goal looks like" and "any proof can have the <code>dunfold</code> statement removed and it works just the same". First, it does actually do something - it inserts an <code>id</code> term into the result (the partial proof being constructed). So you can see the result of <code>dsimp</code> and <code>dunfold</code> applications in the resulting proof if you <code>#print</code> it. This is done to keep typechecking time down by remembering the simplification path in the proof term.</p>
<p>The more important reason why <code>dunfold</code> and friends can't necessarily be removed from a proof is because many tactics depend on the syntactic shape of the goal or a hypothesis. For example, <code>rw</code> will not match against the goal if some definitional unfolding is required to see the constant that appears. For example if the goal is <code>2 * n = 0</code> where <code>n : nat</code>, then this is defeq to <code>n + n = 0</code> but <code>rw add_comm</code> would only work on the second form of the goal. So anything that "changes what the goal looks like" could potentially affect whether a later tactic succeeds. That said, many tactics don't care about anything beyond defeq, in particular <code>apply</code>, <code>refine</code> and <code>exact</code>, and in many cases you can remove superfluous <code>unfold</code> and <code>dunfold</code> tactics without breaking the proof.</p>



<a name="164832882"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164832882" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164832882">(May 03 2019 at 21:45)</a>:</h4>
<p><span class="user-mention" data-user-id="198376">@Kevin Kappelmann</span> I now have a fix for your <code>let</code> / <code>case</code> issue. It should be in the next nightly build of Lean 3.5.0c</p>



<a name="164884660"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164884660" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164884660">(May 04 2019 at 20:07)</a>:</h4>
<p>Real quick, what is a meta variable and why is <code>tactic.finish</code> absolutely packed with them? I'm not sure exactly what's going on, but it seems that any trivial propositional technique is proven immediately with <code>by finish</code></p>



<a name="164884711"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164884711" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164884711">(May 04 2019 at 20:08)</a>:</h4>
<p>What do you mean <code>finish</code> is packed with metavariable?</p>



<a name="164884724"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164884724" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164884724">(May 04 2019 at 20:09)</a>:</h4>
<p>A meta-variable is a kind of hole Lean will have to fill in. It can be the goal you need to solve or some implicit argument to be inferred by unification</p>



<a name="164884862"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164884862" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164884862">(May 04 2019 at 20:13)</a>:</h4>
<p>I just mean that when I pressed <code>Ctrl-Click</code> on <code>tactic.finish</code>, I came upon a file that was filled with the keyword <code>meta</code> and I wasn't sure what any of it meant</p>



<a name="164884865"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164884865" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164884865">(May 04 2019 at 20:14)</a>:</h4>
<p>oohh</p>



<a name="164884911"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164884911" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164884911">(May 04 2019 at 20:14)</a>:</h4>
<p>that's a different meta</p>



<a name="164884923"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164884923" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164884923">(May 04 2019 at 20:15)</a>:</h4>
<p>I suppose so, I just assumed that <code>meta def</code> was defining a metavariable, although I suppose that wouldn't make sense given my preconceived notion of what a metavariable is</p>



<a name="164884925"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164884925" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164884925">(May 04 2019 at 20:15)</a>:</h4>
<p><code>meta</code> in this context means "unsafe". It's code that won't be checked by Lean. It particular it doesn't have to be provably terminating</p>



<a name="164884946"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164884946" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164884946">(May 04 2019 at 20:15)</a>:</h4>
<p>Why would one ever need such a thing?</p>



<a name="164884950"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164884950" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164884950">(May 04 2019 at 20:15)</a>:</h4>
<p>Typically tactics (the commands you type between begin and end) are meta. They produce proofs that <em>will</em> be checked by Lean. But the way they produces those proofs is freestyle</p>



<a name="164885023"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885023" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885023">(May 04 2019 at 20:17)</a>:</h4>
<p>Ah, okay. So it's not just a cheeky way of making axioms. So the reason I can solve so many things with <code>by finish</code> is because all of the structures in <code>finish</code> are using this meta keyword? I assume without it, there wouldn't be a way of taking arbitrary propositions and figuring out how to solve them</p>



<a name="164885069"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885069" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885069">(May 04 2019 at 20:18)</a>:</h4>
<p>That is, <code>finish</code> wouldn't know how to solve a proposition handed to it if it weren't in a specific order of some sort</p>



<a name="164885070"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885070" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885070">(May 04 2019 at 20:18)</a>:</h4>
<p><code>meta</code> code can do non-terminating recursion, and it can also work with "reflected" versions of mathematical objects, i.e. their actual representations as <code>expr</code> objects in the C++ code.</p>



<a name="164885074"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885074" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885074">(May 04 2019 at 20:18)</a>:</h4>
<p><code>finish</code> constructs a proof for you</p>



<a name="164885086"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885086" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885086">(May 04 2019 at 20:19)</a>:</h4>
<p>Okay, that's really cool <span class="user-mention" data-user-id="110087">@Scott Morrison</span></p>



<a name="164885089"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885089" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885089">(May 04 2019 at 20:19)</a>:</h4>
<p>I don't think there is any risk of non-termination here. But the type of Lean expressions is meta, for reasons too long to explain (unless you understand what Scott wrote)</p>



<a name="164885133"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885133" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885133">(May 04 2019 at 20:20)</a>:</h4>
<p>This is one of the lovely things about Lean --- you can write new tactics (i.e. programs that construct proofs, but aren't necessarily themselves correct) in Lean itself.</p>



<a name="164885135"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885135" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885135">(May 04 2019 at 20:20)</a>:</h4>
<p>I understand C++ enough to generally know what he means</p>



<a name="164885145"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885145" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885145">(May 04 2019 at 20:20)</a>:</h4>
<p>In previous interactive theorem provers you needed to step out, either into the base implementation language, or some DSL, to write new tactics.</p>



<a name="164885155"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885155" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885155">(May 04 2019 at 20:21)</a>:</h4>
<p>So, even with meta, there's still no way to prove false? Because a bad tactic won't construct a good proof?</p>



<a name="164885159"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885159" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885159">(May 04 2019 at 20:21)</a>:</h4>
<p>That makes sense</p>



<a name="164885161"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885161" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885161">(May 04 2019 at 20:21)</a>:</h4>
<p>The <code>meta</code> keyword <em>protects</em> the real maths from these "helper" functions that we write to help construct proofs.</p>



<a name="164885165"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885165" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885165">(May 04 2019 at 20:21)</a>:</h4>
<p>ahh</p>



<a name="164885169"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885169" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885169">(May 04 2019 at 20:22)</a>:</h4>
<p>Exactly. The tactic framework lets you <em>run</em> meta code to produce proof terms, but those proof terms will be rejected if they refer to any <code>meta</code> functions.</p>



<a name="164885214"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885214" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885214">(May 04 2019 at 20:22)</a>:</h4>
<p>so, how would a noob go about using meta? Or, should I just not even touch the thing?</p>



<a name="164885226"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885226" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885226">(May 04 2019 at 20:23)</a>:</h4>
<p>It depends on your taste, background and goals</p>



<a name="164885227"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885227" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885227">(May 04 2019 at 20:23)</a>:</h4>
<p>Read <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/tactic_writing.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/tactic_writing.md">https://github.com/leanprover-community/mathlib/blob/master/docs/extras/tactic_writing.md</a></p>



<a name="164885234"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885234" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885234">(May 04 2019 at 20:23)</a>:</h4>
<p>And start reading all the files in <code>src/tactic/</code> in the mathlib repository.</p>



<a name="164885236"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885236" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885236">(May 04 2019 at 20:23)</a>:</h4>
<p>and ask here :-)</p>



<a name="164885242"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885242" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885242">(May 04 2019 at 20:23)</a>:</h4>
<p>Yes, reading that tutorial will give you a first glance at what it looks like</p>



<a name="164885244"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885244" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885244">(May 04 2019 at 20:24)</a>:</h4>
<p>Reading <code>src/tactic/</code> will give you a lot more (after a <em>lot</em> more time)</p>



<a name="164885297"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885297" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885297">(May 04 2019 at 20:24)</a>:</h4>
<p>Great, thank you. My goal generally is to git gud in Lean, but eventually I want to start implementing some actual maths. I expect that will take me some time, given I'll have to read quite a bit of mathlib</p>



<a name="164885311"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885311" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885311">(May 04 2019 at 20:25)</a>:</h4>
<p>You don't have to read all of mathlib before starting to implement actual maths</p>



<a name="164885428"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885428" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885428">(May 04 2019 at 20:28)</a>:</h4>
<p>sure, but I'd like to understand a chunk of what's already there on a fundamental level</p>



<a name="164885432"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885432" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885432">(May 04 2019 at 20:28)</a>:</h4>
<p>Do you have an idea what maths you'd like to do?</p>



<a name="164885440"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885440" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885440">(May 04 2019 at 20:29)</a>:</h4>
<p>If you're ever tempted to add documentation to stuff you're reading, documentation-only pull requests are very welcome. :-)</p>



<a name="164885457"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885457" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885457">(May 04 2019 at 20:29)</a>:</h4>
<p>I'd like to define a manifold, and maybe prove the inverse/implicit function theorem</p>



<a name="164885514"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885514" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885514">(May 04 2019 at 20:30)</a>:</h4>
<p>I just really need to look over how topology and euclidean space are implemented first</p>



<a name="164885519"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885519" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885519">(May 04 2019 at 20:30)</a>:</h4>
<p>Also, do we have the definition of a metric space?</p>



<a name="164885594"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885594" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885594">(May 04 2019 at 20:32)</a>:</h4>
<p><span class="user-mention" data-user-id="218940">@Greg Conneen</span> If you want to implement some actual maths in Lean, then don't try to get good at Lean first, just try to implement some actual maths in Lean, get stuck, ask for help here, and you will succeed.</p>



<a name="164885598"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885598" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885598">(May 04 2019 at 20:32)</a>:</h4>
<p>I am precisely working on the definition of a manifold. Work in progress (very much in a preliminary state) at <a href="https://github.com/sgouezel/mathlib/blob/aa7fbab39d1e6a01665e24e6197b09338e855467/src/geometry/manifolds/basic.lean#L1598" target="_blank" title="https://github.com/sgouezel/mathlib/blob/aa7fbab39d1e6a01665e24e6197b09338e855467/src/geometry/manifolds/basic.lean#L1598">https://github.com/sgouezel/mathlib/blob/aa7fbab39d1e6a01665e24e6197b09338e855467/src/geometry/manifolds/basic.lean#L1598</a></p>



<a name="164885608"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885608" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885608">(May 04 2019 at 20:32)</a>:</h4>
<p>I have no idea how to write tactics. Tactics are written in meta code because they can fail. You don't need to know anything about tactic-writing (which is what people use meta code for) to write maths.</p>



<a name="164885624"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885624" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885624">(May 04 2019 at 20:33)</a>:</h4>
<p>However, what you do need to know is what is already there and what is being worked on, because this changes <em>fast</em> here</p>



<a name="164885676"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885676" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885676">(May 04 2019 at 20:34)</a>:</h4>
<p>Yes we have metric spaces. You can see this yourself by firing up a project with mathlib as a dependency in VS Code and searching for metric space. This is a really important beginner skill to learn.</p>



<a name="164885695"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885695" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885695">(May 04 2019 at 20:35)</a>:</h4>
<p>Make sure that "the cog doesn't have a box around it" in "files to exclude" in VS Code. That way you can search your dependencies.</p>



<a name="164885701"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885701" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885701">(May 04 2019 at 20:35)</a>:</h4>
<p>Several people would like to define manifolds and people are sort of in the middle of things, so it might not be a perfect project right now for a beginner.</p>



<a name="164885752"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885752" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885752">(May 04 2019 at 20:36)</a>:</h4>
<p>Definitions are harder than theorems; proofs can be sloppy but it's important to get definitions right.</p>



<a name="164885756"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885756" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885756">(May 04 2019 at 20:36)</a>:</h4>
<p>One big obstruction to doing much with manifolds is that we don't have enough calculus, but again people are working on this and things are changing fast.</p>



<a name="164885771"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885771" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885771">(May 04 2019 at 20:37)</a>:</h4>
<p>Bump functions are still a little out of reach at the minute, but it won't be long until we have them.</p>



<a name="164885840"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885840" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885840">(May 04 2019 at 20:38)</a>:</h4>
<p>For polynomials we have multivariable ones and single variable ones; I am not an expert in either analysis or Lean-analysis, but I am wondering whether we are going to need a robust theory of calculus in one real variable, proving basic theorems such that the derivative of the integral is the function. I don't think we even have that.</p>



<a name="164885857"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885857" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885857">(May 04 2019 at 20:39)</a>:</h4>
<p>We have no complex analysis worth mentioning, not even integrating along a reasonable path.</p>



<a name="164885923"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164885923" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164885923">(May 04 2019 at 20:40)</a>:</h4>
<p>Because of our lack of analysis, this makes manifolds harder to do, however having goals like manifolds in mind is driving the library forwards in the right direction (as far as I am concerned). Lean seems to me to be focussing on the kind of mathematics mathematicians do, as opposed to the kind of mathematics that computer scientists have managed to pick up somehow.</p>



<a name="164886015"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164886015" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Conneen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164886015">(May 04 2019 at 20:43)</a>:</h4>
<p>Gotcha, thanks for the information. Do you think that complex would be a good thing to get working on, or do we not have it because it's hard to implement?</p>



<a name="164886260"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164886260" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164886260">(May 04 2019 at 20:49)</a>:</h4>
<p>I am not an analyst and it's been nearly 30 years since I thought about the basics, Cauchy's integral formula etc. I've never taught the course either, so I am not the person to ask.</p>



<a name="164886319"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164886319" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164886319">(May 04 2019 at 20:50)</a>:</h4>
<p>One thing I know was an issue is that someone has to make a decision about in what generality to define path integrals -- C^infinity paths isn't good enough because you want to integrate round semicircles and rectangles etc.</p>



<a name="164886332"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164886332" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164886332">(May 04 2019 at 20:51)</a>:</h4>
<p>I really don't know what's there already though; I know a lot of the algebra stuff in Lean but the analysis stuff is changing quickly at the minute.</p>



<a name="164886554"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164886554" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164886554">(May 04 2019 at 20:56)</a>:</h4>
<p>Kevin, the way this is going, we'll soon have manifolds with boundary <em>and</em> corners. When we'll have differential forms this will be much more than enough for rectangle and semi-circles</p>



<a name="164887338"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/164887338" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#164887338">(May 04 2019 at 21:17)</a>:</h4>
<p>Woo hoo we'll have de Rham. cohomology one day. Is this in any other theorem prover?</p>



<a name="167754387"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/167754387" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#167754387">(Jun 10 2019 at 12:24)</a>:</h4>
<p>Is it possible to "unimport" <code>core</code>/<code>prelude</code>, i.e. the basic definitions of <code>nat</code>, <code>eq</code>, etc, leaving an environment pretty much free of any definitions?</p>



<a name="167754427"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/167754427" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#167754427">(Jun 10 2019 at 12:25)</a>:</h4>
<p>You can put <code>prelude</code> at the top of your file</p>



<a name="167754438"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/167754438" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#167754438">(Jun 10 2019 at 12:25)</a>:</h4>
<p>which translates to "this file is part of the prelude" (so don't be importing all the prelude)</p>



<a name="167754444"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/167754444" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#167754444">(Jun 10 2019 at 12:25)</a>:</h4>
<p>I've never used it, I've just seen people suggest it</p>



<a name="167754516"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/167754516" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#167754516">(Jun 10 2019 at 12:26)</a>:</h4>
<p>Yup, that seems to work. Thank you!</p>



<a name="167898225"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/167898225" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#167898225">(Jun 11 2019 at 22:56)</a>:</h4>
<p>Is the notation <code>h.fn arg</code> given <code>class myclass (α: Type*) := (fn: α → ℕ)</code> and <code>[h: myclass α]</code> discouraged? It stops working for example if <code>fn: ℕ → α</code> because the type argument <code>α </code> to <code>myclass.fn</code> becomes explicit, i.e. <code>myclass.fn : Π (α : Type u_1) [c : myclass α], ℕ → α</code>.</p>



<a name="168518423"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168518423" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168518423">(Jun 19 2019 at 15:44)</a>:</h4>
<p>Given a positive integer n, how to define a vector with n entries? Thanks</p>



<a name="168518493"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168518493" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168518493">(Jun 19 2019 at 15:45)</a>:</h4>
<p><code>vector \alpha n</code></p>



<a name="168518616"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168518616" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168518616">(Jun 19 2019 at 15:46)</a>:</h4>
<p>Oh, and say x is the vector, how do we decribe its i-th entry?</p>



<a name="168518620"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168518620" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168518620">(Jun 19 2019 at 15:46)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">vector</span>
<span class="n">universes</span> <span class="n">u</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">vector</span> <span class="n">α</span> <span class="n">n</span>
</pre></div>



<a name="168518656"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168518656" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168518656">(Jun 19 2019 at 15:47)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">vector</span>
<span class="n">universes</span> <span class="n">u</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">vector</span> <span class="n">α</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span><span class="o">)</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">v</span><span class="bp">.</span><span class="n">nth</span> <span class="n">k</span>
</pre></div>



<a name="168519365"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168519365" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168519365">(Jun 19 2019 at 15:55)</a>:</h4>
<p>how to do summation from i=1 to n ?</p>



<a name="168519856"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168519856" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168519856">(Jun 19 2019 at 16:00)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">vector2</span>
<span class="n">universes</span> <span class="n">u</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">has_zero</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">has_add</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">vector</span> <span class="n">α</span> <span class="n">n</span><span class="o">)</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">v</span><span class="bp">.</span><span class="n">to_list</span><span class="bp">.</span><span class="n">sum</span>
</pre></div>



<a name="168521168"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168521168" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168521168">(Jun 19 2019 at 16:18)</a>:</h4>
<p>one more question: how do we define new 3-vector, say, (x,y,x+y) where x, y are variable?</p>



<a name="168521321"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168521321" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168521321">(Jun 19 2019 at 16:20)</a>:</h4>
<p>and more importantly, is there some online resource where I can read and get familiarized with these simple commands? I skimmed through theorem_proving_in_lean.pdf and couldn't find what I want... I feel like i'm asking too many noob questions like an idiot lol</p>



<a name="168521500"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168521500" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168521500">(Jun 19 2019 at 16:23)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">vector</span>
<span class="n">universes</span> <span class="n">u</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">has_add</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span>
<span class="bp">#</span><span class="kn">check</span> <span class="o">(</span><span class="bp">⟨</span><span class="o">[</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">x</span><span class="bp">+</span><span class="n">y</span><span class="o">],</span> <span class="n">rfl</span><span class="bp">⟩</span> <span class="o">:</span> <span class="n">vector</span> <span class="n">α</span> <span class="mi">3</span><span class="o">)</span>
</pre></div>



<a name="168521617"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168521617" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168521617">(Jun 19 2019 at 16:25)</a>:</h4>
<p>how about an n-vector like (x, 2x, 3x, ..., nx)? <span aria-label="mischievous" class="emoji emoji-1f61b" role="img" title="mischievous">:mischievous:</span></p>



<a name="168521647"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168521647" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168521647">(Jun 19 2019 at 16:25)</a>:</h4>
<blockquote>
<p>is there some online resource where I can read and get familiarized with these simple commands</p>
</blockquote>
<p>Unfortunately there isn't much beyond TPiL. You'll have to get used to reading source files. <a href="https://github.com/leanprover/lean/blob/master/library/data/vector.lean" target="_blank" title="https://github.com/leanprover/lean/blob/master/library/data/vector.lean">Here's data.vector</a>.</p>



<a name="168521728"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168521728" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168521728">(Jun 19 2019 at 16:26)</a>:</h4>
<blockquote>
<blockquote>
<p>is there some online resource where I can read and get familiarized with these simple commands</p>
</blockquote>
<p>Unfortunately there isn't much beyond TPiL. You'll have to get used to reading source files. <a href="https://github.com/leanprover/lean/blob/master/library/data/vector.lean" target="_blank" title="https://github.com/leanprover/lean/blob/master/library/data/vector.lean">Here's data.vector</a>.</p>
</blockquote>
<p>Oh i see, thanks</p>



<a name="168521872"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168521872" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168521872">(Jun 19 2019 at 16:28)</a>:</h4>
<p>Currently, if you want to figure these things out yourself, the best way is just to look through the library files in mathlib (and core). You can go to <code>data/vector2</code> in mathlib or the file Bryan mentioned in core. Also, operations on list might be useful to know for vectors. Other ways to find things you're searching for: </p>
<ul>
<li>Browse through files (either on Github or locally)</li>
<li>"Go to definition" and "peek definition" (F12 and alt-F12 / option-F12?)</li>
<li>Search in VSCode (ctrl+shift+F)</li>
<li>Search on Github</li>
<li>Execute <code>#print prefix vector</code> in Lean</li>
<li>Find lemmas using the tactic <code>library_search</code></li>
</ul>



<a name="168521944"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168521944" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168521944">(Jun 19 2019 at 16:29)</a>:</h4>
<blockquote>
<p>(x, 2x, 3x, ..., nx)</p>
</blockquote>
<p>without looking at the library: hopefully <code>vector.range</code> and <code>vector.map</code> both exists, from which you should be able to figure it out (if not, use <code>list.range</code> and/or <code>list.map</code>)</p>



<a name="168522426"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168522426" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168522426">(Jun 19 2019 at 16:35)</a>:</h4>
<blockquote>
<p>how about an n-vector like (x, 2x, 3x, ..., nx)? <span aria-label="mischievous" class="emoji emoji-1f61b" role="img" title="mischievous">:mischievous:</span></p>
</blockquote>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group_power</span> <span class="n">data</span><span class="bp">.</span><span class="n">pnat</span> <span class="n">data</span><span class="bp">.</span><span class="n">vector</span>
<span class="n">universes</span> <span class="n">u</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">has_add</span> <span class="n">α</span><span class="o">]</span>
<span class="n">def</span> <span class="n">multiple</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">α</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">x</span> <span class="c1">-- junk value</span>
<span class="bp">|</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">x</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">2</span><span class="o">)</span> <span class="o">:=</span> <span class="n">multiple</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="n">x</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="bp">#</span><span class="kn">check</span> <span class="o">(</span><span class="bp">⟨</span><span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">multiple</span> <span class="n">x</span> <span class="o">(</span><span class="n">i</span><span class="bp">+</span><span class="mi">1</span><span class="o">)),</span> <span class="k">by</span> <span class="n">simp</span><span class="bp">⟩</span> <span class="o">:</span> <span class="n">vector</span> <span class="n">α</span> <span class="n">n</span><span class="o">)</span>
</pre></div>



<a name="168523081"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168523081" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168523081">(Jun 19 2019 at 16:43)</a>:</h4>
<p>If \a is an <code>add_monoid</code>, you can use <code>add_monoid.smul</code> instead of <code>multiple</code></p>



<a name="168524430"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168524430" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168524430">(Jun 19 2019 at 17:00)</a>:</h4>
<blockquote>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">vector2</span>
<span class="n">universes</span> <span class="n">u</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">has_zero</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">has_add</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">vector</span> <span class="n">α</span> <span class="n">n</span><span class="o">)</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">v</span><span class="bp">.</span><span class="n">to_list</span><span class="bp">.</span><span class="n">sum</span>
</pre></div>


</blockquote>
<p>Is there a way to do summation without using vector?</p>



<a name="168524753"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168524753" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168524753">(Jun 19 2019 at 17:02)</a>:</h4>
<p>You might be interested in <code>finset.sum</code> and <code>finset.range</code>. The first gives you sums, the second gives you the <code>finset</code> "{0, ..., n-1}"</p>



<a name="168524885"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168524885" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168524885">(Jun 19 2019 at 17:04)</a>:</h4>
<p><span class="user-mention" data-user-id="218709">@Adrian Chu</span> the problem is that TPIL just deals with core Lean, and you are asking about how to use stuff in the maths library. When I was learning the basics, I found the maths library very intimidating, but when I realised that I should just stop reading the proofs and instead just look at the definitions, I found that I could proceed with my mathematics very nicely, which in turn led to more understanding, which in turn made reading the proofs which I had been ignoring all this time much easier.</p>
<p>One thing I learnt fairly quickly was to abstract exactly what I wanted. For example you asked how to make (x, 2x, 3x, ..., nx). But in fact you can break this down into smaller questions. Probably you know well how to make a function like <code>lam n, (n + 1) * x</code>, so then you realise that what you really need is how to make (f 0, f 1, ..., f m). Now from general functional programming you might know that they like things like working out how to take a function f and to apply it to a vector like (0 1 2 ... n) so now you have two smaller questions -- how to make a vector like (0 1 2 ... n) and how to apply a function to every element of a vector. By this stage we are in the world where these ideas have a common name -- <code>range</code> for (0 1 2 ... n) and <code>map</code> for applying a function to a bunch of things at once. Now you can begin to guess the actual names of the functions you want. </p>
<p>Learning to think this way was a very important stepping stone for me; I slowly began to realise that I was developing a method for being able to answer my own questions of this nature. I am still learning, but this is the way to think about it. For every question, figure out how to build it from general tools and then figure out where those general tools are, perhaps by figuring out first what they should be called.</p>



<a name="168525940"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168525940" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168525940">(Jun 19 2019 at 17:16)</a>:</h4>
<p>I see... I feel that TPiL is like a book teaching grammar, while mathlib is a dictionary. And knowing all the grammar does not immediately guarantee one can fluently read a dictionary, let alone writing sentences or paragraphs.</p>



<a name="168538087"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168538087" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168538087">(Jun 19 2019 at 19:27)</a>:</h4>
<p>If you look through something like <code>data.list.basic</code> and take a look at just the names and the statements of the theorems, you can learn a lot about mathlib's naming conventions. The description above (breaking what you want down into small pieces) is I think how you're supposed to think about functional programming; the same sort of themes come up again and again; import <code>data.finset</code> and then use <code>#check</code> to look at the types of <code>list.map</code> and <code>multiset.map</code> and <code>finset.map</code> and it slowly dawns on you that <code>map</code> means a very specific thing in this game. Then try <code>list.range</code> and <code>multiset.range</code> and <code>finset.range</code>. It will slowly dawn on you by people are suggesting that you use <code>vector.map</code> and <code>vector.range</code> without even knowing if these functions are defined in Lean -- and if they're not then it's not hard to make them.</p>



<a name="168565250"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168565250" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Luis Berlioz <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168565250">(Jun 20 2019 at 04:08)</a>:</h4>
<p>Can I place a variable declaration in the middle of a proof? <br>
For example instead of this:</p>
<div class="codehilite"><pre><span></span><span class="kn">variable</span> <span class="n">s</span> <span class="o">:</span> <span class="n">α</span>
<span class="kn">example</span> <span class="o">:</span> <span class="n">r</span> <span class="bp">→</span> <span class="o">(</span> <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">assume</span> <span class="n">hr</span> <span class="o">:</span> <span class="n">r</span><span class="o">,</span>
<span class="k">show</span> <span class="o">(</span> <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">r</span><span class="o">),</span> <span class="k">from</span>  <span class="bp">⟨</span> <span class="n">s</span><span class="o">,</span> <span class="n">hr</span> <span class="bp">⟩</span>
</pre></div>


<p>I want the variable <code>s : α </code> declared inside the proof, like:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="n">r</span> <span class="bp">→</span> <span class="o">(</span> <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">assume</span> <span class="n">hr</span> <span class="o">:</span> <span class="n">r</span><span class="o">,</span>
<span class="kn">variable</span> <span class="n">s</span> <span class="o">:</span> <span class="n">α</span>
<span class="k">show</span> <span class="o">(</span> <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">r</span><span class="o">),</span> <span class="k">from</span>  <span class="bp">⟨</span> <span class="n">s</span><span class="o">,</span> <span class="n">hr</span> <span class="bp">⟩</span>
</pre></div>



<a name="168565314"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168565314" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168565314">(Jun 20 2019 at 04:10)</a>:</h4>
<p>No, that's not possible. Maybe you mean <code>have</code> or <code>let</code>?</p>



<a name="168565329"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168565329" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168565329">(Jun 20 2019 at 04:11)</a>:</h4>
<p>The goal is to prove that some <code>alpha</code> exists. You can't just grab it out of nowhere.</p>



<a name="168565408"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168565408" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Luis Berlioz <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168565408">(Jun 20 2019 at 04:13)</a>:</h4>
<p>Ok, that makes sense.</p>



<a name="168583023"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168583023" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168583023">(Jun 20 2019 at 10:14)</a>:</h4>
<p>how to fix <br>
<code>def y := [1,2,3] 
#eval 4+y.nth 2</code> ? why can't I add?</p>



<a name="168583185"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168583185" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168583185">(Jun 20 2019 at 10:16)</a>:</h4>
<p>nth returns <code>option nat</code></p>



<a name="168583205"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168583205" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168583205">(Jun 20 2019 at 10:17)</a>:</h4>
<p>you should be able to use <code>y.nth_le 2 dec_trivial</code></p>



<a name="168583631"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168583631" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168583631">(Jun 20 2019 at 10:25)</a>:</h4>
<p>oh it works, thanks! but what do .nth_le and dec_trivial means?</p>



<a name="168583717"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168583717" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168583717">(Jun 20 2019 at 10:26)</a>:</h4>
<p>no one wants an array out of bounds exception</p>



<a name="168583726"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168583726" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168583726">(Jun 20 2019 at 10:26)</a>:</h4>
<p>the dec_trivial is a proof that 2 &lt; 3</p>



<a name="168584110"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168584110" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168584110">(Jun 20 2019 at 10:32)</a>:</h4>
<p>i see</p>



<a name="168585134"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168585134" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168585134">(Jun 20 2019 at 10:52)</a>:</h4>
<p>How about </p>
<div class="codehilite"><pre><span></span>def y := [1,2,3]
def g (i : fin 3) : ℕ := y.nth_le i-1
def f (i : fin 3) : ℕ := 4 + y.nth_le i-1 dec_trivial
</pre></div>


<p>? What's wrong?</p>



<a name="168587909"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168587909" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168587909">(Jun 20 2019 at 11:42)</a>:</h4>
<p>Clearly you intended to have parentheses around <code>i-1</code>, but I'm not sure what you are trying to achieve</p>



<a name="168588087"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168588087" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168588087">(Jun 20 2019 at 11:45)</a>:</h4>
<p>Yep, function application binds tighter than subtraction, so to express what you want you need to put parentheses around <code>i-1</code>. You're also missing a proof that <code>(i-i &lt; list.length y)</code> in <code>g</code> (no second argument is given).</p>



<a name="168589081"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168589081" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168589081">(Jun 20 2019 at 12:03)</a>:</h4>
<blockquote>
<p>Yep, function application binds tighter than subtraction, so to express what you want you need to put parentheses around <code>i-1</code>. You're also missing a proof that <code>(i-i &lt; list.length y)</code> in <code>g</code> (no second argument is given).</p>
</blockquote>
<p>How exactly should I give the proof then?</p>



<a name="168589164"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168589164" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168589164">(Jun 20 2019 at 12:04)</a>:</h4>
<p>You could use <code>fin.last</code> instead</p>



<a name="168589276"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168589276" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168589276">(Jun 20 2019 at 12:06)</a>:</h4>
<p>If you were doing this from scratch, you would be proving i-1 &lt; 3 given i &lt; 3. There are theorems in data.nat.basic to help with this</p>



<a name="168589294"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168589294" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168589294">(Jun 20 2019 at 12:06)</a>:</h4>
<p>alternatively, you can skip the proof and just handle the possibility of error using <code>nth</code></p>



<a name="168589705"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168589705" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168589705">(Jun 20 2019 at 12:14)</a>:</h4>
<p>I'm kinda surprised that <code>forall (n m k: nat), n &lt; m -&gt; n-k &lt; m</code> isn't already in mathlib.</p>



<a name="168590997"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168590997" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168590997">(Jun 20 2019 at 12:36)</a>:</h4>
<p>it's just the composition of lt_of_le_of_lt and sub_le</p>



<a name="168641043"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168641043" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168641043">(Jun 20 2019 at 22:45)</a>:</h4>
<p>That said, I think we should add it. Finding these lemmas is excruciating for beginners (who haven't even learnt that you can in principle guess the names of most basic facts, let alone learnt how to do it).</p>



<a name="168641134"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168641134" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168641134">(Jun 20 2019 at 22:47)</a>:</h4>
<p>How bad is the downside of swamping Lean with these sort of "composition of two lemmas" lemmas?</p>



<a name="168641154"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168641154" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168641154">(Jun 20 2019 at 22:47)</a>:</h4>
<p>there is a combinatorial explosion</p>



<a name="168641198"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168641198" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168641198">(Jun 20 2019 at 22:48)</a>:</h4>
<p>it's not even clear which compositions are the most common</p>



<a name="168641218"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168641218" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168641218">(Jun 20 2019 at 22:48)</a>:</h4>
<p>and we don't even have the complete set of basic lemmas</p>



<a name="168641245"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168641245" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168641245">(Jun 20 2019 at 22:49)</a>:</h4>
<p>I would rather put more smarts into <code>library_search</code>type provers than flood the library with random facts</p>



<a name="168643353"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168643353" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168643353">(Jun 20 2019 at 23:27)</a>:</h4>
<p>/me needs to get back to <code>back</code></p>



<a name="168646368"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168646368" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Tim Daly <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168646368">(Jun 21 2019 at 00:35)</a>:</h4>
<p>There need not be a combinatorial explosion, nor does the naming convention have to be so baroque.</p>
<p>It appears to me that Lean is using a flat namespace.  The naming convention makes it really hard to guess what you need.</p>
<p>Farmer and Carette (McMaster U.) have the notion of "tiny theories" which intrioduce a single axiom or a single signature. These can be combined to form larger objects which inherit the axioms and signatures. So, for instance, there would be a "commutative" axiom which can be inherited everywhere it makes sense.</p>
<p>This hierarchical organization enables re-use of axioms and signatures and allows the same name to occur in different paths in the inheritance graph.</p>



<a name="168646462"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168646462" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168646462">(Jun 21 2019 at 00:37)</a>:</h4>
<p>Lean has namespaces, which are used to label the major components in the theorem, or the broad area in which it lives</p>



<a name="168646544"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168646544" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168646544">(Jun 21 2019 at 00:39)</a>:</h4>
<p>The naming convention is designed to be easy to guess based on the statement, so you can think of a statement that you think is true and then search for the corresponding name. I'm curious how you would propose to improve on that scheme</p>



<a name="168646671"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168646671" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168646671">(Jun 21 2019 at 00:41)</a>:</h4>
<p>The number of theorems does increase exponentially as the depth increases. If there are n theorems, then there are O(n^2) ways to compose two of them, O(n^3) ways to compose three, and so on. Even 2n theorems is a major increase; n^2 is totally intractable</p>



<a name="168646829"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168646829" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Tim Daly <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168646829">(Jun 21 2019 at 00:44)</a>:</h4>
<p>Namespaces don't implement an inheritance graph in any generality. You'd like to state the commutative axiom in one place in the graph and have it available whereever it is used.  What you really want is genreal "name polymorphism" so that the name 'factor' can have different semantics in different contexts. Using 'dotted namespace notation' forces the user to manage the namespace. This doesn't scale.</p>



<a name="168646851"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168646851" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168646851">(Jun 21 2019 at 00:45)</a>:</h4>
<p>Well... only a fraction of those n^2 theorems actually make sense. I wish I had a better sense of what that fraction was. I guess this could be automated. :-)</p>



<a name="168646874"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168646874" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168646874">(Jun 21 2019 at 00:45)</a>:</h4>
<p><span class="user-mention" data-user-id="223495">@Tim Daly</span>, of course Lean does state the commutative axiom only once.</p>



<a name="168646924"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168646924" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168646924">(Jun 21 2019 at 00:46)</a>:</h4>
<p>(Okay, twice, once for "additive" structures and once for "multiplicative", which is lame, but still, it's only 2. :-)</p>



<a name="168647408"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168647408" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Tim Daly <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168647408">(Jun 21 2019 at 00:58)</a>:</h4>
<p>How does Lean handle a Lie algebra? Lie groups are skew-symmetric and they are non-associative. So</p>
<p>x*y = -y * x and</p>
<p>x * (y  * z) = (x * y) * z + y * (x * z)</p>
<p>Do you have to "built it from nothing" using an odd naming convention for things like "algebra.lie.cross_product_skew_symmetric."?</p>
<p>Axiom, which uses something similar to Farmer/Carette "tiny theories" has 10,000 functions but a much smaller set of names.</p>



<a name="168647526"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168647526" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168647526">(Jun 21 2019 at 01:01)</a>:</h4>
<p>As far as I'm aware no one has done anything on Lie algebras yet.</p>



<a name="168647779"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168647779" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168647779">(Jun 21 2019 at 01:08)</a>:</h4>
<p>We would normally use some naming convention based on the symbols in the axiom, but for core laws that have names we have a small set of name segments to describe the law. We've not dealt with these laws before, so I guess they would require a new terminology; I would use something like <code>lie_algebra.mul_anticomm</code> and <code>lie_algebra.jacobi</code> for these</p>



<a name="168647854"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168647854" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168647854">(Jun 21 2019 at 01:10)</a>:</h4>
<p>You should take a look at <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/contribute/naming.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/docs/contribute/naming.md">https://github.com/leanprover-community/mathlib/blob/master/docs/contribute/naming.md</a></p>



<a name="168647855"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168647855" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168647855">(Jun 21 2019 at 01:10)</a>:</h4>
<p>I wonder, actually, if we'd even want to use <code>mul</code> for a Lie algebra. It's true that it distributes over addition just as a "normal" multiplication does, but otherwise has little in common.</p>



<a name="168648328"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168648328" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Tim Daly <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168648328">(Jun 21 2019 at 01:23)</a>:</h4>
<p>This places the burden of finding multiplication in an algebra on the user's ability to infer names. Polymorphic names could be disambiguated by a prolog-like match algorithm. The naming convention "is what it is", of course.  But it seems to me that I have to read the original sources and "internalize" the names in my mind, which is a very small place.</p>



<a name="168648394"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168648394" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168648394">(Jun 21 2019 at 01:24)</a>:</h4>
<p>I'm not sure what problem you are trying to solve. There are multiple theorems with the same name in different namespaces, and we take care to have them be the same or clearly analogous</p>



<a name="168648474"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168648474" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168648474">(Jun 21 2019 at 01:26)</a>:</h4>
<p>If you have multiple theorems with the same name in scope (because you have opened multiple namespaces), it will disambiguate them based on the type</p>



<a name="168648560"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168648560" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168648560">(Jun 21 2019 at 01:29)</a>:</h4>
<p>isn't this tiny theory system the type class inference system in disguise?</p>



<a name="168648564"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168648564" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Tim Daly <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168648564">(Jun 21 2019 at 01:29)</a>:</h4>
<p>Namespaces are a kind of type in that case. If they were all "in scope" then there is no need for namespaces?</p>



<a name="168648615"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168648615" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168648615">(Jun 21 2019 at 01:30)</a>:</h4>
<p>specifically the often linked "unbundled type classes" section here: <a href="https://github.com/leanprover/lean/wiki/Refactoring-structures" target="_blank" title="https://github.com/leanprover/lean/wiki/Refactoring-structures">https://github.com/leanprover/lean/wiki/Refactoring-structures</a></p>



<a name="168648616"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168648616" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168648616">(Jun 21 2019 at 01:30)</a>:</h4>
<p>well no, namespaces are separate from types. The type system is DTT, the namespace system is just names and overloading</p>



<a name="168648617"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168648617" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Tim Daly <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168648617">(Jun 21 2019 at 01:30)</a>:</h4>
<p>Disguise? It is the type class inference problem.</p>



<a name="168648639"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168648639" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Tim Daly <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168648639">(Jun 21 2019 at 01:31)</a>:</h4>
<p>I admit ignorance of the full details. Further study on my part is needed.</p>



<a name="168648694"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168648694" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168648694">(Jun 21 2019 at 01:32)</a>:</h4>
<p>You can always refer to a theorem by its full name if the file that defines it has been imported. Opening a namespace just makes the name a bit shorter to reference</p>



<a name="168653056"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168653056" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168653056">(Jun 21 2019 at 03:35)</a>:</h4>
<p>Btw, when Lean 4 comes out one day, what will happen to mathlib?</p>



<a name="168653498"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168653498" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168653498">(Jun 21 2019 at 03:48)</a>:</h4>
<p>Lean 4 is already "out", but not production ready. When it is solid we will start working on a port</p>



<a name="168653519"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168653519" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168653519">(Jun 21 2019 at 03:49)</a>:</h4>
<p>there isn't much point working on it at scale yet because it's too unstable and unfinished, although testing out a single file might be worthwhile</p>



<a name="168653626"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168653626" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168653626">(Jun 21 2019 at 03:52)</a>:</h4>
<p>I see, then when it's stable enough, how much manual work is needed to update mathlib?</p>



<a name="168653653"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168653653" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168653653">(Jun 21 2019 at 03:53)</a>:</h4>
<p>(deleted)</p>



<a name="168653654"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168653654" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168653654">(Jun 21 2019 at 03:53)</a>:</h4>
<p>somewhere between "a significant endeavor" and "a total overhaul"</p>



<a name="168653715"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168653715" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168653715">(Jun 21 2019 at 03:54)</a>:</h4>
<p>If we can get any refactoring tools in lean 3.5c then it may make this a lot easier. There is a lot of silly busywork like changing the naming convention</p>



<a name="168666562"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168666562" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168666562">(Jun 21 2019 at 09:12)</a>:</h4>
<div class="codehilite"><pre><span></span>variable n : ℕ
def vec_exp1 (i : fin n) (x : vector ℕ n) (y : vector ℕ n) : ℕ :=
    (x.nth i)^(y.nth i)
def vec_exp2 (x : vector ℕ n) (y : vector ℕ n) : vector ℕ n :=
    ⟨(list.range n).map (λ i, vec_exp1 i x y), by simp⟩
</pre></div>



<a name="168666608"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168666608" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168666608">(Jun 21 2019 at 09:13)</a>:</h4>
<p>I am trying to compute the entry-wise exponential of two n-vector. but the last line has error: the term x has type vector N n but is expected to have type fin i. what is wrong??</p>



<a name="168666669"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168666669" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168666669">(Jun 21 2019 at 09:14)</a>:</h4>
<p>btw if i change n to 3, it works</p>



<a name="168666781"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168666781" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168666781">(Jun 21 2019 at 09:17)</a>:</h4>
<p>the variable <code>n : N</code> is getting added to <code>vec_exp1</code>, so it actually takes four arguments</p>



<a name="168666785"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168666785" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168666785">(Jun 21 2019 at 09:17)</a>:</h4>
<p>you should make it implicit by writing it in braces</p>



<a name="168667135"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168667135" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168667135">(Jun 21 2019 at 09:24)</a>:</h4>
<p>ah i see! but now I'm getting another error in the last line: vec_exp1 i, the term i has type \N but is expected to have type fin ?m_1. how can I fix it?</p>



<a name="168668282"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168668282" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168668282">(Jun 21 2019 at 09:48)</a>:</h4>
<p>If you hover over <code>vec_exp1</code> you can see it has type <code>vec_exp1 : Π {n : ℕ}, fin n → vector ℕ n → vector ℕ n → ℕ</code>. So it wants an input of type <code>fin n</code> and an input of type <code>vector ℕ n</code>. If you hover over <code>i</code> you see it has type <code>ℕ</code>. So now you can understand the error. How to fix it -- make the types correct ;-) Do you have a more specific question?</p>



<a name="168668574"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168668574" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168668574">(Jun 21 2019 at 09:54)</a>:</h4>
<p>Do you understand how to interpret <code>(list.range n).map</code>? Hover over <code>list.range</code>  to see it has type <code>ℕ → list ℕ</code>. So <code>list.range n</code> has type <code>list ℕ</code>. Now this clever <code>l.map</code> thing means <code>list.map l</code> and doing <code>#check list.map</code> you can see the type of that too. You can just unravel everything. Your code doesn't work because when you unravel it it doesn't make sense.</p>



<a name="168668701"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168668701" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168668701">(Jun 21 2019 at 09:57)</a>:</h4>
<p>Figuring out yourself what you want to do and then the types of the functions you want which will do them is a really good exercise for Lean beginners. It gets you thinking in the "functional programming" way.</p>



<a name="168668956"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168668956" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168668956">(Jun 21 2019 at 10:01)</a>:</h4>
<p>I think you would be better off using <code>vector.map</code> than <code>list.map</code> because you're dealing with vectors. I see there is no <code>vector.range</code> though. It would be a good exercise to define <code>vector.range</code> first. Its type should be this:</p>
<p><code>def vector.range : Π (n : ℕ), vector ℕ n := sorry</code></p>



<a name="168670254"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168670254" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168670254">(Jun 21 2019 at 10:28)</a>:</h4>
<blockquote>
<p>If you hover over <code>vec_exp1</code> you can see it has type <code>vec_exp1 : Π {n : ℕ}, fin n → vector ℕ n → vector ℕ n → ℕ</code>. So it wants an input of type <code>fin n</code> and an input of type <code>vector ℕ n</code>. If you hover over <code>i</code> you see it has type <code>ℕ</code>. So now you can understand the error. How to fix it -- make the types correct ;-) Do you have a more specific question?</p>
</blockquote>
<p>yeah, i understand the error but just don't know what how to make i of type fin n. Should I use something like <code>max i n</code>? Also, why does <code>#check max 3 4</code> works while <code>#eval max 3 4</code> don't?</p>



<a name="168670266"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168670266" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168670266">(Jun 21 2019 at 10:29)</a>:</h4>
<blockquote>
<p>I think you would be better off using <code>vector.map</code> than <code>list.map</code> because you're dealing with vectors. I see there is no <code>vector.range</code> though. It would be a good exercise to define <code>vector.range</code> first. Its type should be this:</p>
<p><code>def vector.range : Π (n : ℕ), vector ℕ n := sorry</code></p>
</blockquote>
<p>OK! i will try...</p>



<a name="168670605"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168670605" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168670605">(Jun 21 2019 at 10:35)</a>:</h4>
<p>Actually... why do you want to work with <code>vector</code>s?</p>



<a name="168670613"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168670613" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168670613">(Jun 21 2019 at 10:35)</a>:</h4>
<p>That's the annoying thing: you have to choose a data representation.</p>



<a name="168670617"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168670617" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168670617">(Jun 21 2019 at 10:35)</a>:</h4>
<p>It could be <code>list</code>, or <code>vector</code> or maps from <code>fin n</code>.</p>



<a name="168670620"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168670620" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168670620">(Jun 21 2019 at 10:35)</a>:</h4>
<p>Possibly other choices.</p>



<a name="168670630"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168670630" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168670630">(Jun 21 2019 at 10:36)</a>:</h4>
<p>What is the end goal?</p>



<a name="168670670"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168670670" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168670670">(Jun 21 2019 at 10:36)</a>:</h4>
<p>"Just goofing around" <em>is</em> a valid answer, in which case using <code>vector</code>s is totally fine.</p>



<a name="168671100"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168671100" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168671100">(Jun 21 2019 at 10:46)</a>:</h4>
<blockquote>
<p>What is the end goal?</p>
</blockquote>
<p>The goal is simply to have an n-tuple of numbers. Now you mention it, fin n \to \N does sounds a lot more simplier. I will use this....</p>



<a name="168672315"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168672315" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168672315">(Jun 21 2019 at 11:11)</a>:</h4>
<blockquote>
<p><code>fin n → ℕ</code> does sounds a lot more simplier.</p>
</blockquote>
<p>Depends...</p>



<a name="168672339"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168672339" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168672339">(Jun 21 2019 at 11:11)</a>:</h4>
<p>If you want to write down an explicit 5-tuple, I guess <code>vector</code> is easier.</p>



<a name="168675134"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168675134" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168675134">(Jun 21 2019 at 12:02)</a>:</h4>
<blockquote>
<blockquote>
<p><code>fin n → ℕ</code> does sounds a lot more simplier.</p>
</blockquote>
<p>Depends...</p>
</blockquote>
<p>say now i have  <code>f:fin n → ℕ</code> and want to calculate f(1)+...+f(n). do I have to convert f  to a vector and use <code>.tolist_sum</code> ? or is there a more direct way?</p>



<a name="168676828"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168676828" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168676828">(Jun 21 2019 at 12:29)</a>:</h4>
<p>Try <code>finset.univ.sum</code>.</p>



<a name="168684121"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168684121" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168684121">(Jun 21 2019 at 14:02)</a>:</h4>
<p>i know that int.gcd can find the gcd of two numbers. how about finding the gcd of n numbers? what is the best way?</p>



<a name="168684813"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168684813" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Huisinga <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168684813">(Jun 21 2019 at 14:12)</a>:</h4>
<p>since gcd is an associative function, you can foldr or foldl over the collection of numbers</p>



<a name="168688556"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168688556" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168688556">(Jun 21 2019 at 14:59)</a>:</h4>
<blockquote>
<p>yeah, i understand the error but just don't know what how to make i of type fin n. Should I use something like <code>max i n</code>?</p>
</blockquote>
<p>Do you understand how to make a term of type <code>fin n</code>? By definition, a term of type <code>fin n</code> is a pair, consisting of a natural number <code>i</code> and a proof that <code>i &lt; n</code>. In your function you seem to have a random natural number <code>i</code> with no conditions at all, so it will be impossible to prove that <code>i &lt; n</code>. That was why I was encouraging you to step back a bit and think about the functions you're using and what you're doing.</p>
<blockquote>
<p>Also, why does <code>#check max 3 4</code> works while <code>#eval max 3 4</code> don't?</p>
</blockquote>
<p><code>#eval max 3 4</code> works for me. Can you post a MWE?</p>



<a name="168689946"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168689946" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168689946">(Jun 21 2019 at 15:17)</a>:</h4>
<p>What does MWE stand for? lol</p>



<a name="168690011"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168690011" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168690011">(Jun 21 2019 at 15:18)</a>:</h4>
<p>And the error message for <code>#eval max 3 4</code> is "code generation failed, VM does not have code for lattice.lattice.conditionally_complete_linear_order_bot'"</p>



<a name="168690036"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168690036" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168690036">(Jun 21 2019 at 15:18)</a>:</h4>
<p>Minimal working example. I type <code>#eval max 3 4</code> and it worked fine. I was wondering exactly what you did. A MWE is something you can cut and paste so I can see the error you're seeing. Currently I can't do that becaue you're only posting the line which gave the error.</p>



<a name="168690588"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168690588" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168690588">(Jun 21 2019 at 15:27)</a>:</h4>
<p>Oh, I figured it out. It is because I imported ring_theory.principal_ideal_domain</p>



<a name="168697094"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168697094" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168697094">(Jun 21 2019 at 16:49)</a>:</h4>
<p>given positive integers a and b how can we prove that the sum of a b's is ab?</p>



<a name="168697161"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168697161" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168697161">(Jun 21 2019 at 16:50)</a>:</h4>
<p>How are you defining the sum of <code>a</code> <code>b</code>'s? The devil is in the detail for this one.</p>



<a name="168697177"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168697177" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168697177">(Jun 21 2019 at 16:50)</a>:</h4>
<p>And why do you want to prove it?</p>



<a name="168697472"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168697472" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168697472">(Jun 21 2019 at 16:53)</a>:</h4>
<p>You might decide the definition of <code>a * b</code> already answers your question</p>



<a name="168697479"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168697479" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168697479">(Jun 21 2019 at 16:53)</a>:</h4>
<p>Or possibly <code>b * a</code></p>



<a name="168697546"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168697546" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168697546">(Jun 21 2019 at 16:54)</a>:</h4>
<blockquote>
<p>How are you defining the sum of <code>a</code> <code>b</code>'s? The devil is in the detail for this one.</p>
</blockquote>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  I'm using <code>finset.univ.sum (λ i : fin a, b)</code></p>



<a name="168697685"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168697685" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168697685">(Jun 21 2019 at 16:56)</a>:</h4>
<blockquote>
<p>And why do you want to prove it?</p>
</blockquote>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> <br>
This is a crucial lemma in a theorem I wanna prove. Specifically, I need to prove that given positive integers b, c, the sum of b (b^c)'s is b^(c+1)</p>



<a name="168697749"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168697749" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168697749">(Jun 21 2019 at 16:57)</a>:</h4>
<p>Well this statement still has the phrase "the sum of <code>x</code> <code>y</code>s" in it so I could ask the same question again</p>



<a name="168697893"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168697893" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168697893">(Jun 21 2019 at 16:59)</a>:</h4>
<p>We all know the sum of X Ys is X * Y, so why not just formalize the statement using *</p>



<a name="168697904"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168697904" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168697904">(Jun 21 2019 at 16:59)</a>:</h4>
<blockquote>
<p>Well this statement still has the phrase "the sum of <code>x</code> <code>y</code>s" in it so I could ask the same question again</p>
</blockquote>
<p>I need to show <code>finset.univ.sum (λ i : fin a, b)=a*b</code></p>



<a name="168697933"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168697933" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168697933">(Jun 21 2019 at 16:59)</a>:</h4>
<p>OK, that's a statement that we should be able to prove</p>



<a name="168698356"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168698356" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168698356">(Jun 21 2019 at 17:05)</a>:</h4>
<p>I feel like this should be in the library. Is it <code>sum_const</code> or something? <em>shrug</em></p>



<a name="168698422"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168698422" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168698422">(Jun 21 2019 at 17:06)</a>:</h4>
<p><span class="user-mention" data-user-id="218709">@Adrian Chu</span> I would be tempted to find where <code>finset.sum</code> is defined in mathlib (just right click on it in VS Code and go to the definition) and take a look at the next 50 lemmas after its definition, to see if there is anything useful there.</p>



<a name="168698549"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168698549" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168698549">(Jun 21 2019 at 17:08)</a>:</h4>
<p>I found this</p>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">sum_const</span> <span class="o">(</span><span class="n">ι</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">cardinal</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">})</span> <span class="o">:</span> <span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="bp">_</span><span class="o">:</span><span class="n">ι</span><span class="o">,</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="n">mk</span> <span class="n">ι</span> <span class="bp">*</span> <span class="n">a</span> <span class="o">:=</span>
<span class="n">quotient</span><span class="bp">.</span><span class="n">induction_on</span> <span class="n">a</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">α</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span><span class="bp">;</span> <span class="n">exact</span>
  <span class="n">quotient</span><span class="bp">.</span><span class="n">sound</span> <span class="bp">⟨</span><span class="n">equiv</span><span class="bp">.</span><span class="n">sigma_equiv_prod</span> <span class="bp">_</span> <span class="bp">_⟩</span>
</pre></div>


<p>in set theory/cardinal</p>



<a name="168698817"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168698817" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168698817">(Jun 21 2019 at 17:12)</a>:</h4>
<p>That's the wrong kind of sum. This is exactly why the devil is in the detail.</p>



<a name="168698905"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168698905" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168698905">(Jun 21 2019 at 17:14)</a>:</h4>
<p>Was there nothing near finset.sum?</p>



<a name="168699318"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168699318" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168699318">(Jun 21 2019 at 17:21)</a>:</h4>
<p>I can't see what I want (possibly due to my own ignorance)</p>



<a name="168699536"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168699536" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168699536">(Jun 21 2019 at 17:24)</a>:</h4>
<p>Ok I'll take a look.</p>



<a name="168699569"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168699569" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168699569">(Jun 21 2019 at 17:24)</a>:</h4>
<p>It is indeed <code>finset.sum_const</code></p>



<a name="168699609"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168699609" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168699609">(Jun 21 2019 at 17:25)</a>:</h4>
<p>You could have just tried <code>#check finset.sum_const</code></p>



<a name="168700280"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168700280" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168700280">(Jun 21 2019 at 17:35)</a>:</h4>
<p>Aah, I bet you didn't have the right import.</p>



<a name="168700339"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168700339" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168700339">(Jun 21 2019 at 17:36)</a>:</h4>
<p><code>import algebra.big_operators</code></p>



<a name="168700370"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168700370" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168700370">(Jun 21 2019 at 17:36)</a>:</h4>
<p>Yeah, I don't know how to search for it if you don't have the right import. It would be nice if it was easy just to import everything temporarily.</p>



<a name="168700416"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168700416" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168700416">(Jun 21 2019 at 17:37)</a>:</h4>
<p>Oh wait, but you need that import for <code>finset.sum</code>...</p>



<a name="168701698"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168701698" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168701698">(Jun 21 2019 at 17:52)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">big_operators</span> <span class="n">data</span><span class="bp">.</span><span class="n">fintype</span>

<span class="kn">example</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">finset</span><span class="bp">.</span><span class="n">univ</span> <span class="o">:</span> <span class="n">finset</span> <span class="err">$</span> <span class="n">fin</span> <span class="n">a</span><span class="o">)</span><span class="bp">.</span><span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">finset</span><span class="bp">.</span><span class="n">sum_const</span><span class="o">,</span> <span class="n">finset</span><span class="bp">.</span><span class="n">card_univ</span><span class="o">,</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">card_fin</span><span class="o">,</span> <span class="n">add_monoid</span><span class="bp">.</span><span class="n">smul_eq_mul</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_id</span><span class="o">]</span>
</pre></div>



<a name="168702954"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168702954" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168702954">(Jun 21 2019 at 18:10)</a>:</h4>
<p>That's the way (or you can use simp instead of the last couple of things, I should think)</p>



<a name="168703000"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168703000" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168703000">(Jun 21 2019 at 18:11)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">):</span>  <span class="n">finset</span><span class="bp">.</span><span class="n">univ</span><span class="bp">.</span><span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span><span class="bp">=</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">finset</span><span class="bp">.</span><span class="n">sum_const</span><span class="o">,</span> <span class="n">finset</span><span class="bp">.</span><span class="n">card_univ</span><span class="o">,</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">card_fin</span><span class="o">]</span>
</pre></div>



<a name="168736064"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168736064" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168736064">(Jun 22 2019 at 04:49)</a>:</h4>
<p>Thanks guys!</p>



<a name="168741659"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168741659" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168741659">(Jun 22 2019 at 08:01)</a>:</h4>
<p>What command should I use to define a function f(x) from N to N with two cases, namely x &gt;= some fixed n and x &lt; n?</p>



<a name="168741707"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168741707" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168741707">(Jun 22 2019 at 08:02)</a>:</h4>
<p>Lean has <code>if ... then ... else</code></p>



<a name="168741737"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168741737" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168741737">(Jun 22 2019 at 08:03)</a>:</h4>
<p>The tactic you need to know to introduce it is <code>split_ifs</code>.</p>



<a name="168741787"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168741787" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168741787">(Jun 22 2019 at 08:04)</a>:</h4>
<p><code>if...then...else</code> is harder to use than you might think, because Lean will by default refuse to do a case split on a condition unless it knows an algorithm for deciding whether the condition is true or not. In your case this should be no trouble.</p>



<a name="168742140"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168742140" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168742140">(Jun 22 2019 at 08:15)</a>:</h4>
<p>given a function f : fin n -&gt; N, how can I extend it to N -&gt; N by defining it to be zero when the input is &gt;= n ?</p>



<a name="168742185"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168742185" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168742185">(Jun 22 2019 at 08:16)</a>:</h4>
<p><code>if h : x &lt; n then f &lt;x, h&gt; else 0</code></p>



<a name="168745111"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168745111" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168745111">(Jun 22 2019 at 10:01)</a>:</h4>
<p>You shouldn't think of <code>fin n</code> as some sort of subset of nat. There's a map from <code>fin n</code> to nat which forgets part of the structure. From your recent questions you seen to think that a term of type <code>fin n</code> is a nat. It's not -- it's a pair.</p>



<a name="168745330"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168745330" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168745330">(Jun 22 2019 at 10:09)</a>:</h4>
<blockquote>
<p>You shouldn't think of <code>fin n</code> as some sort of subset of nat. There's a map from <code>fin n</code> to nat which forgets part of the structure. From your recent questions you seen to think that a term of type <code>fin n</code> is a nat. It's not -- it's a pair.</p>
</blockquote>
<p>ya, i know, i just didn't know that we can directly write <code>if h : x &lt; n</code> instead of <code>if x&lt;n</code></p>



<a name="168745519"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168745519" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168745519">(Jun 22 2019 at 10:14)</a>:</h4>
<p>What is the correct syntax to define such a function <code>def f (x : ℕ) : ℕ := if x &lt; 10 then x else f (x-3)</code> recursively? (since I don't want to use mod for some other reason)</p>



<a name="168747175"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168747175" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168747175">(Jun 22 2019 at 11:11)</a>:</h4>
<p>You will have to prove, somehow, that your function is well-defined. One thing you could do is just use the equation compiler, but that would stink a bit in this situation. You could define f zero = 0, f 1 = 1, ..., and then f (n+10) to be f(n+7). That might work.</p>



<a name="168747238"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168747238" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168747238">(Jun 22 2019 at 11:13)</a>:</h4>
<p>you only have to go up to n+3</p>



<a name="168747242"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168747242" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168747242">(Jun 22 2019 at 11:13)</a>:</h4>
<p>I'm not so sure it's as easy as that, because f(7) is not f(4)</p>



<a name="168747297"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168747297" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168747297">(Jun 22 2019 at 11:14)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">f</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span>
<span class="bp">|</span> <span class="n">x</span><span class="bp">@</span><span class="o">(</span><span class="n">y</span><span class="bp">+</span><span class="mi">3</span><span class="o">)</span> <span class="o">:=</span> <span class="k">if</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">10</span> <span class="k">then</span> <span class="n">x</span> <span class="k">else</span> <span class="n">f</span> <span class="n">y</span>
<span class="bp">|</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">x</span>
</pre></div>



<a name="168747306"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168747306" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168747306">(Jun 22 2019 at 11:15)</a>:</h4>
<p>Nice!</p>



<a name="168747308"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168747308" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168747308">(Jun 22 2019 at 11:15)</a>:</h4>
<p>it still has 4 cases though</p>



<a name="168747312"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168747312" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168747312">(Jun 22 2019 at 11:15)</a>:</h4>
<p>I have never had to push the equation compiler to its limits, so I don't really know these tricks.</p>



<a name="168747357"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168747357" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168747357">(Jun 22 2019 at 11:16)</a>:</h4>
<p>try replacing <code>3</code> with <code>100</code></p>



<a name="168748314"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168748314" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168748314">(Jun 22 2019 at 11:48)</a>:</h4>
<p>I see... Thanks.</p>



<a name="168748654"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168748654" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168748654">(Jun 22 2019 at 11:59)</a>:</h4>
<blockquote>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">f</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span>
<span class="bp">|</span> <span class="n">x</span><span class="bp">@</span><span class="o">(</span><span class="n">y</span><span class="bp">+</span><span class="mi">3</span><span class="o">)</span> <span class="o">:=</span> <span class="k">if</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">10</span> <span class="k">then</span> <span class="n">x</span> <span class="k">else</span> <span class="n">f</span> <span class="n">y</span>
<span class="bp">|</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">x</span>
</pre></div>


</blockquote>
<p>But can someone please explain a bit what does this means?</p>



<a name="168748701"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168748701" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168748701">(Jun 22 2019 at 12:00)</a>:</h4>
<p>Have you read the section about the equation compiler in TPIL?</p>



<a name="168748716"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168748716" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168748716">(Jun 22 2019 at 12:00)</a>:</h4>
<p>It says "if x = y + 3 for some other nat y then do the first thing, else do the second thing"</p>



<a name="168748785"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168748785" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168748785">(Jun 22 2019 at 12:03)</a>:</h4>
<p>well not yet. you are right, i should read it first :)</p>



<a name="168754082"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168754082" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168754082">(Jun 22 2019 at 14:58)</a>:</h4>
<p>Now i have read the relevant sections in TPIL. But I still got a problem: How can I check the well foundedness of</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">f</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">×</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span> <span class="bp">×</span> <span class="bp">ℕ</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">y</span><span class="bp">+</span><span class="mi">3</span><span class="o">,</span> <span class="n">z</span><span class="bp">+</span><span class="mi">3</span><span class="o">)</span> <span class="o">:=</span> <span class="k">if</span> <span class="o">((</span><span class="n">y</span><span class="bp">+</span><span class="mi">3</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="mi">10</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">((</span><span class="n">z</span><span class="bp">+</span><span class="mi">3</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="mi">10</span><span class="o">)</span> <span class="k">then</span> <span class="o">(</span><span class="n">y</span><span class="bp">+</span><span class="mi">3</span><span class="o">,</span> <span class="n">z</span><span class="bp">+</span><span class="mi">3</span><span class="o">)</span> <span class="k">else</span> <span class="n">f</span> <span class="o">(</span><span class="n">y</span><span class="o">,</span> <span class="n">z</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">y</span><span class="o">,</span> <span class="n">z</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">y</span><span class="o">,</span> <span class="n">z</span><span class="o">)</span>
</pre></div>


<p>?</p>



<a name="168756726"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168756726" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168756726">(Jun 22 2019 at 16:22)</a>:</h4>
<p>Some hints are here: <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/well_founded_recursion.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/well_founded_recursion.md">https://github.com/leanprover-community/mathlib/blob/master/docs/extras/well_founded_recursion.md</a></p>



<a name="168774276"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168774276" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168774276">(Jun 23 2019 at 02:19)</a>:</h4>
<p>I had a go at this <a href="https://bryangingechen.github.io/lean/lean-web-editor/#code=import%20data.prod%0A%2F-%0Aset_option%20pp.all%20true%0A-%2F%0A%0Adef%20f%20%3A%20%E2%84%95%20%C3%97%20%E2%84%95%20%E2%86%92%20%E2%84%95%20%C3%97%20%E2%84%95%0A%7C%20%28y%2B3%2C%20z%2B3%29%20%3A%3D%20have%20h%20%3A%20%28y%2C%20z%29.lex%20%28%3C%29%20%28%3C%29%20%28y%2B3%2C%20z%2B3%29%20%3A%3D%20begin%0A%20%20simp%20%5Bprod.lex_def%5D%2C%0A%20%20have%20hy%20%3A%20y%20%3C%20y%20%2B%203%20%3A%3D%20nat.lt_add_of_pos_right%20%28dec_trivial%29%2C%0A%20%20exact%20or.inl%20hy%2C%0Aend%2C%0A%20%20if%20%28%28y%2B3%29%20%3C%2010%29%20%E2%88%A7%20%28%28z%2B3%29%20%3C%2010%29%20then%0A%20%20%20%20%28y%2B3%2C%20z%2B3%29%20else%20f%20%28y%2C%20z%29%0A%7C%20%28y%2C%20z%29%20%3A%3D%20%28y%2C%20z%29%0A%0Adef%20f_curry%20%3A%20%E2%84%95%20%E2%86%92%20%E2%84%95%20%E2%86%92%20%E2%84%95%20%C3%97%20%E2%84%95%0A%7C%20%28y%2B3%29%20%28z%2B3%29%20%3A%3D%20if%20%28%28y%2B3%29%20%3C%2010%29%20%E2%88%A7%20%28%28z%2B3%29%20%3C%2010%29%20then%0A%20%20%20%20%28y%2B3%2C%20z%2B3%29%20else%20f_curry%20y%20z%0A%7C%20y%20z%20%3A%3D%20%28y%2C%20z%29%0A%0Adef%20f'%20%28p%20%3A%20%E2%84%95%20%C3%97%20%E2%84%95%29%20%3A%20%E2%84%95%20%C3%97%20%E2%84%95%20%3A%3D%20f_curry%20p.1%20p.2" target="_blank" title="https://bryangingechen.github.io/lean/lean-web-editor/#code=import%20data.prod%0A%2F-%0Aset_option%20pp.all%20true%0A-%2F%0A%0Adef%20f%20%3A%20%E2%84%95%20%C3%97%20%E2%84%95%20%E2%86%92%20%E2%84%95%20%C3%97%20%E2%84%95%0A%7C%20%28y%2B3%2C%20z%2B3%29%20%3A%3D%20have%20h%20%3A%20%28y%2C%20z%29.lex%20%28%3C%29%20%28%3C%29%20%28y%2B3%2C%20z%2B3%29%20%3A%3D%20begin%0A%20%20simp%20%5Bprod.lex_def%5D%2C%0A%20%20have%20hy%20%3A%20y%20%3C%20y%20%2B%203%20%3A%3D%20nat.lt_add_of_pos_right%20%28dec_trivial%29%2C%0A%20%20exact%20or.inl%20hy%2C%0Aend%2C%0A%20%20if%20%28%28y%2B3%29%20%3C%2010%29%20%E2%88%A7%20%28%28z%2B3%29%20%3C%2010%29%20then%0A%20%20%20%20%28y%2B3%2C%20z%2B3%29%20else%20f%20%28y%2C%20z%29%0A%7C%20%28y%2C%20z%29%20%3A%3D%20%28y%2C%20z%29%0A%0Adef%20f_curry%20%3A%20%E2%84%95%20%E2%86%92%20%E2%84%95%20%E2%86%92%20%E2%84%95%20%C3%97%20%E2%84%95%0A%7C%20%28y%2B3%29%20%28z%2B3%29%20%3A%3D%20if%20%28%28y%2B3%29%20%3C%2010%29%20%E2%88%A7%20%28%28z%2B3%29%20%3C%2010%29%20then%0A%20%20%20%20%28y%2B3%2C%20z%2B3%29%20else%20f_curry%20y%20z%0A%7C%20y%20z%20%3A%3D%20%28y%2C%20z%29%0A%0Adef%20f'%20%28p%20%3A%20%E2%84%95%20%C3%97%20%E2%84%95%29%20%3A%20%E2%84%95%20%C3%97%20%E2%84%95%20%3A%3D%20f_curry%20p.1%20p.2">here (web editor link)</a>:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">prod</span>
<span class="c">/-</span><span class="cm"></span>
<span class="cm">set_option pp.all true</span>
<span class="cm">-/</span>

<span class="n">def</span> <span class="n">f</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">×</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span> <span class="bp">×</span> <span class="bp">ℕ</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">y</span><span class="bp">+</span><span class="mi">3</span><span class="o">,</span> <span class="n">z</span><span class="bp">+</span><span class="mi">3</span><span class="o">)</span> <span class="o">:=</span> <span class="k">have</span> <span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">y</span><span class="o">,</span> <span class="n">z</span><span class="o">)</span><span class="bp">.</span><span class="n">lex</span> <span class="o">(</span><span class="bp">&lt;</span><span class="o">)</span> <span class="o">(</span><span class="bp">&lt;</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span><span class="bp">+</span><span class="mi">3</span><span class="o">,</span> <span class="n">z</span><span class="bp">+</span><span class="mi">3</span><span class="o">)</span> <span class="o">:=</span> <span class="k">begin</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">prod</span><span class="bp">.</span><span class="n">lex_def</span><span class="o">],</span>
  <span class="k">have</span> <span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">+</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">lt_add_of_pos_right</span> <span class="o">(</span><span class="n">dec_trivial</span><span class="o">),</span>
  <span class="n">exact</span> <span class="n">or</span><span class="bp">.</span><span class="n">inl</span> <span class="n">hy</span><span class="o">,</span>
<span class="kn">end</span><span class="o">,</span>
  <span class="k">if</span> <span class="o">((</span><span class="n">y</span><span class="bp">+</span><span class="mi">3</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="mi">10</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">((</span><span class="n">z</span><span class="bp">+</span><span class="mi">3</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="mi">10</span><span class="o">)</span> <span class="k">then</span>
    <span class="o">(</span><span class="n">y</span><span class="bp">+</span><span class="mi">3</span><span class="o">,</span> <span class="n">z</span><span class="bp">+</span><span class="mi">3</span><span class="o">)</span> <span class="k">else</span> <span class="n">f</span> <span class="o">(</span><span class="n">y</span><span class="o">,</span> <span class="n">z</span><span class="o">)</span> <span class="c1">-- error here, see below</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">y</span><span class="o">,</span> <span class="n">z</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">y</span><span class="o">,</span> <span class="n">z</span><span class="o">)</span>
</pre></div>


<p>However, I'm not able to satisfy the equation compiler either:</p>
<div class="codehilite"><pre><span></span>failed to prove recursive application is decreasing, well founded relation
  @has_well_founded.r (ℕ × ℕ)
    (@prod.has_well_founded ℕ ℕ (@has_well_founded_of_has_sizeof ℕ nat.has_sizeof)
       (@has_well_founded_of_has_sizeof ℕ nat.has_sizeof))
Possible solutions:
  - Use &#39;using_well_founded&#39; keyword in the end of your definition to specify tactics for synthesizing well founded relations and decreasing proofs.
  - The default decreasing tactic uses the &#39;assumption&#39; tactic, thus hints (aka local proofs) can be provided using &#39;have&#39;-expressions.
The nested exception contains the failure state for the decreasing tactic.
nested exception message:
match failed
state:
f : ℕ × ℕ → ℕ × ℕ,
y z : ℕ,
h : prod.lex has_lt.lt has_lt.lt (y, z) (y + 3, z + 3)
⊢ prod.lex has_lt.lt has_lt.lt (y, z) (y + 3, z + 3)
</pre></div>


<p>(Isn't <code>h</code> the same thing as the goal? Using <code>pp.all true</code> doesn't reveal any differences either)</p>
<p>I think it's easier to define <code>f</code> by working with the curried version, like this:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">f_curry</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span> <span class="bp">×</span> <span class="bp">ℕ</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">y</span><span class="bp">+</span><span class="mi">3</span><span class="o">)</span> <span class="o">(</span><span class="n">z</span><span class="bp">+</span><span class="mi">3</span><span class="o">)</span> <span class="o">:=</span> <span class="k">if</span> <span class="o">((</span><span class="n">y</span><span class="bp">+</span><span class="mi">3</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="mi">10</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">((</span><span class="n">z</span><span class="bp">+</span><span class="mi">3</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="mi">10</span><span class="o">)</span> <span class="k">then</span>
    <span class="o">(</span><span class="n">y</span><span class="bp">+</span><span class="mi">3</span><span class="o">,</span> <span class="n">z</span><span class="bp">+</span><span class="mi">3</span><span class="o">)</span> <span class="k">else</span> <span class="n">f_curry</span> <span class="n">y</span> <span class="n">z</span>
<span class="bp">|</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:=</span> <span class="o">(</span><span class="n">y</span><span class="o">,</span> <span class="n">z</span><span class="o">)</span>

<span class="n">def</span> <span class="n">f&#39;</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">×</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">×</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="n">f_curry</span> <span class="n">p</span><span class="bp">.</span><span class="mi">1</span> <span class="n">p</span><span class="bp">.</span><span class="mi">2</span>
</pre></div>



<a name="168774487"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168774487" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168774487">(Jun 23 2019 at 02:26)</a>:</h4>
<p>I think, from the trajectory of the questions, that <span class="user-mention" data-user-id="218709">@Adrian Chu</span> wants to know how to do general recursions, rather than breaking them down into structural recursions. It looks like this:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">f</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">×</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span> <span class="bp">×</span> <span class="bp">ℕ</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="o">:=</span>
  <span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">10</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="mi">10</span> <span class="k">then</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="k">else</span>
  <span class="k">have</span> <span class="n">has_well_founded</span><span class="bp">.</span><span class="n">r</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="mi">3</span><span class="o">,</span> <span class="n">y</span> <span class="bp">-</span> <span class="mi">3</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">),</span> <span class="k">from</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">f</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="mi">3</span><span class="o">,</span> <span class="n">y</span> <span class="bp">-</span> <span class="mi">3</span><span class="o">)</span>
<span class="n">using_well_founded</span> <span class="o">{</span> <span class="n">dec_tac</span> <span class="o">:=</span> <span class="bp">`</span><span class="o">[</span><span class="n">assumption</span><span class="o">]</span> <span class="o">}</span>
</pre></div>


<p>You have to give a proof that <code>(x - 3, y - 3) &lt; (x, y)</code> according to some well founded relation. The default one here is lexicographic order on the natural numbers, which works in this case but may need to be replaced with something else in other examples</p>



<a name="168776942"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168776942" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168776942">(Jun 23 2019 at 03:57)</a>:</h4>
<p>I see.. I didn't know we have `[assumption]</p>



<a name="168776998"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168776998" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168776998">(Jun 23 2019 at 03:59)</a>:</h4>
<p>I am trying to prove the following variant of Bazout lemma:</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">baz</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">coprime</span> <span class="n">a</span> <span class="n">b</span><span class="o">):</span> <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">a</span><span class="bp">*</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">y</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>


<p>As pointed before, we can use <code>gcd_a</code> and <code>gcd_b</code></p>



<a name="168777157"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168777157" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168777157">(Jun 23 2019 at 04:04)</a>:</h4>
<p>but the trouble is gcd_a, gcd_b can be negative</p>



<a name="168777167"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168777167" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168777167">(Jun 23 2019 at 04:05)</a>:</h4>
<p>so my plan is to keep adding multiples of a*b to <code>-gcd_a a b</code> and <code>gcd_b a b</code> repsectively until they are both &gt;= 0</p>



<a name="168777217"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168777217" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168777217">(Jun 23 2019 at 04:07)</a>:</h4>
<p>But I run into 2 problems. First, (as an example,) given a recursive function like </p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">f</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span>  <span class="bp">ℕ</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">y</span><span class="bp">+</span><span class="mi">3</span><span class="o">)</span> <span class="o">:=</span> <span class="k">if</span> <span class="n">h</span><span class="o">:(</span><span class="n">y</span><span class="bp">+</span><span class="mi">3</span><span class="bp">&lt;</span><span class="mi">10</span><span class="o">)</span> <span class="k">then</span> <span class="o">(</span><span class="n">y</span><span class="bp">+</span><span class="mi">3</span><span class="o">)</span> <span class="k">else</span> <span class="n">f</span> <span class="n">y</span>
<span class="bp">|</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">y</span>
</pre></div>


<p>how can we show that f x &lt; 10 for all x ?</p>



<a name="168777283"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168777283" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168777283">(Jun 23 2019 at 04:09)</a>:</h4>
<p>second, given a function f from Z to Z and a proof that f x &gt;=0 for all x, how can we define a new function F from Z to N using f?</p>



<a name="168778028"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168778028" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168778028">(Jun 23 2019 at 04:35)</a>:</h4>
<p>Rather than "repeatedly adding multiples of a*b", just add <code>k*a*b</code> for some k. This avoids all the mess of determining any well founded recursion, but it leaves the question - what is k?</p>



<a name="168778068"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168778068" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168778068">(Jun 23 2019 at 04:36)</a>:</h4>
<p>Also <code>baz</code> is really obviously false when <code>a = b = 0</code></p>



<a name="168778069"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168778069" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168778069">(Jun 23 2019 at 04:36)</a>:</h4>
<p>or more generally when they aren't coprime</p>



<a name="168778286"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168778286" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168778286">(Jun 23 2019 at 04:44)</a>:</h4>
<blockquote>
<p>Also <code>baz</code> is really obviously false when <code>a = b = 0</code></p>
</blockquote>
<p>oops, I carelessly left out the coprime condition. now fixed</p>



<a name="168778336"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168778336" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168778336">(Jun 23 2019 at 04:46)</a>:</h4>
<p>If a and b are both nonzero, then <code>a*b</code> is also nonzero, so it is at least 1 and hence <code>k*a*b</code> is at least k. So you can pick k to be <code>gcd_a a b</code> and then <code>k*a*b - gcd_a a b</code> will be nonnegative</p>



<a name="168778404"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168778404" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168778404">(Jun 23 2019 at 04:49)</a>:</h4>
<blockquote>
<p>Rather than "repeatedly adding multiples of a*b", just add <code>k*a*b</code> for some k. This avoids all the mess of determining any well founded recursion, but it leaves the question - what is k?</p>
</blockquote>
<p>Yes, I have thought of that, we can choose <code>k=max (nat_abs (nat.gcd_a x y)) (nat_abs (nat.gcd_b x y))</code></p>



<a name="168778408"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168778408" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168778408">(Jun 23 2019 at 04:49)</a>:</h4>
<p>yes yours is simpler!</p>



<a name="168778449"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168778449" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168778449">(Jun 23 2019 at 04:50)</a>:</h4>
<p>You can use either <code>to_nat</code> or <code>nat_abs</code> to turn a nonnegative int into a nat</p>



<a name="168778503"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168778503" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168778503">(Jun 23 2019 at 04:52)</a>:</h4>
<p>ok, let me try now</p>



<a name="168778787"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168778787" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168778787">(Jun 23 2019 at 05:02)</a>:</h4>
<blockquote>
<p>If a and b are both nonzero, then <code>a*b</code> is also nonzero, so it is at least 1 and hence <code>k*a*b</code> is at least k. So you can pick k to be <code>gcd_a a b</code> and then <code>k*a*b - gcd_a a b</code> will be nonnegative</p>
</blockquote>
<p>i was mistaken. we should add <code>k*b</code> to <code>-gcd_a a b</code> and add <code>k*a</code> to <code>gcd_b a b</code></p>



<a name="168778857"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168778857" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168778857">(Jun 23 2019 at 05:04)</a>:</h4>
<p>and take <code>k = max (nat_abs (nat.gcd_a a b)) (nat_abs (nat.gcd_b a b))</code></p>



<a name="168790463"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168790463" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168790463">(Jun 23 2019 at 11:26)</a>:</h4>
<p>May I ask how to prove<br>
<code>theorem test (a : ℤ) (ha : a &gt;= 0) : a = nat_abs a</code> ?</p>



<a name="168790473"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168790473" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168790473">(Jun 23 2019 at 11:26)</a>:</h4>
<p>Does cases on a work?</p>



<a name="168790476"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168790476" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168790476">(Jun 23 2019 at 11:26)</a>:</h4>
<p>Alternatively just use library_search.</p>



<a name="168790483"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168790483" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168790483">(Jun 23 2019 at 11:27)</a>:</h4>
<p>You might want to import data.int.basic before you search</p>



<a name="168790548"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168790548" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168790548">(Jun 23 2019 at 11:28)</a>:</h4>
<p>Here's where I'm up to: <a href="https://github.com/kbuzzard/xena/blob/cd8e0de23adf8c0e7c56d39f1b6f5a55d93bf6ef/Examples/mario_glueing.lean#L144" target="_blank" title="https://github.com/kbuzzard/xena/blob/cd8e0de23adf8c0e7c56d39f1b6f5a55d93bf6ef/Examples/mario_glueing.lean#L144">https://github.com/kbuzzard/xena/blob/cd8e0de23adf8c0e7c56d39f1b6f5a55d93bf6ef/Examples/mario_glueing.lean#L144</a></p>



<a name="168792098"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168792098" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168792098">(Jun 23 2019 at 12:17)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">open</span> <span class="n">int</span>
<span class="kn">theorem</span> <span class="n">test</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">a</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">,</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">nat_abs</span> <span class="n">a</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">of_nat</span> <span class="n">n</span><span class="o">)</span> <span class="n">h</span> <span class="o">:=</span> <span class="n">rfl</span>
</pre></div>



<a name="168792143"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168792143" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168792143">(Jun 23 2019 at 12:18)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">int</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">open</span> <span class="n">int</span>
<span class="kn">theorem</span> <span class="n">test</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">nat_abs</span> <span class="n">a</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">nat_abs_of_nonneg</span> <span class="n">ha</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span>
</pre></div>



<a name="168795776"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168795776" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168795776">(Jun 23 2019 at 14:22)</a>:</h4>
<p>Ah, so we already have this theorem. Thanks</p>



<a name="168796607"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168796607" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168796607">(Jun 23 2019 at 14:50)</a>:</h4>
<p>I am proving using <code>calc</code>, the first and last expression has type <code>nat</code> but some of the intermediate steps have type <code>int</code></p>



<a name="168796623"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168796623" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168796623">(Jun 23 2019 at 14:51)</a>:</h4>
<p>apply <code>int.coe_nat_inj</code></p>



<a name="168796624"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168796624" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168796624">(Jun 23 2019 at 14:51)</a>:</h4>
<p>which hence give type mismatch error</p>



<a name="168796632"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168796632" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168796632">(Jun 23 2019 at 14:51)</a>:</h4>
<p>before starting the calc block</p>



<a name="168797693"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168797693" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168797693">(Jun 23 2019 at 15:27)</a>:</h4>
<p>can someone kindly write a simple example to illustrate how a proof involving <code>int.coe_nat_inj</code> and <code>calc</code>  should look like? since I can't find this in mathlib</p>



<a name="168798063"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168798063" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168798063">(Jun 23 2019 at 15:40)</a>:</h4>
<p>you can't find the theorem?</p>



<a name="168798070"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168798070" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168798070">(Jun 23 2019 at 15:41)</a>:</h4>
<p>show me your proof and I'll fix it</p>



<a name="168798166"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168798166" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168798166">(Jun 23 2019 at 15:44)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="o">:=</span>
<span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_inj</span> <span class="err">$</span> <span class="k">calc</span>
   <span class="err">↑</span><span class="n">x</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:</span> <span class="n">h1</span><span class="bp">.</span><span class="n">symm</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">y</span> <span class="o">:</span> <span class="n">h2</span>
</pre></div>



<a name="168798244"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168798244" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168798244">(Jun 23 2019 at 15:47)</a>:</h4>
<p>wow thanks.</p>



<a name="168798285"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168798285" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168798285">(Jun 23 2019 at 15:48)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">baz</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">coprime</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">a</span><span class="bp">*</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">let</span> <span class="n">k</span> <span class="o">:=</span> <span class="n">max</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)),</span>
  <span class="k">let</span> <span class="n">x</span> <span class="o">:=</span> <span class="bp">-</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="o">(</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">nat_abs</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">nat_abs</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">fapply</span> <span class="n">exists</span><span class="bp">.</span><span class="n">intro</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">nat_abs</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">fapply</span> <span class="n">exists</span><span class="bp">.</span><span class="n">intro</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">nat_abs</span> <span class="n">y</span><span class="o">,</span>
  <span class="k">calc</span>
    <span class="n">a</span><span class="bp">*</span><span class="o">(</span><span class="n">nat_abs</span> <span class="n">x</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="o">(</span><span class="n">nat_abs</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">sorry</span>
<span class="kn">end</span>
</pre></div>



<a name="168798287"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168798287" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168798287">(Jun 23 2019 at 15:48)</a>:</h4>
<p>bit by bit, I'm first dealing with the last <code>sorry</code>. do you think i should use <code>int.coe_nat_inj</code> here?</p>



<a name="168798403"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168798403" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168798403">(Jun 23 2019 at 15:52)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">baz</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">coprime</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">a</span><span class="bp">*</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">let</span> <span class="n">k</span> <span class="o">:=</span> <span class="n">max</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)),</span>
  <span class="k">let</span> <span class="n">x</span> <span class="o">:=</span> <span class="bp">-</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="o">(</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">nat_abs</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">nat_abs</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">existsi</span> <span class="n">nat_abs</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">existsi</span> <span class="n">nat_abs</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_inj</span><span class="o">,</span>
  <span class="k">calc</span>
    <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="o">(</span><span class="n">nat_abs</span> <span class="n">x</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">*</span><span class="o">(</span><span class="n">nat_abs</span> <span class="n">x</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="err">←</span> <span class="n">hx</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">y</span> <span class="o">:</span> <span class="k">by</span> <span class="n">sorry</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="err">←</span> <span class="n">hy</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">end</span>
</pre></div>



<a name="168798581"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168798581" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168798581">(Jun 23 2019 at 15:59)</a>:</h4>
<p>thx, i'll keep working on it</p>



<a name="168799229"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168799229" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168799229">(Jun 23 2019 at 16:20)</a>:</h4>
<p>what should replace <code>sorry</code> in this step? +_+ why doesn't <code>left_distrib</code> works?</p>
<div class="codehilite"><pre><span></span><span class="n">a</span><span class="bp">*</span><span class="o">(</span><span class="bp">-</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span>
<span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">a</span><span class="bp">*</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="bp">*</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="n">sorry</span>
</pre></div>



<a name="168799239"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168799239" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168799239">(Jun 23 2019 at 16:21)</a>:</h4>
<p>it's not just <code>left_distrib</code>, you also associated + and distributed <code>-</code> over <code>*</code></p>



<a name="168799278"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168799278" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168799278">(Jun 23 2019 at 16:22)</a>:</h4>
<p><code>simp [mul_add]</code> should do it</p>



<a name="168799286"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168799286" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168799286">(Jun 23 2019 at 16:23)</a>:</h4>
<p><code>by simp [mul_add]</code> doesnt work...</p>



<a name="168799337"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168799337" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168799337">(Jun 23 2019 at 16:24)</a>:</h4>
<p>look at what you get, and add theorems that make them look more alike</p>



<a name="168799451"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168799451" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168799451">(Jun 23 2019 at 16:28)</a>:</h4>
<p>i need <code>mul_assoc</code> !!</p>



<a name="168822645"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168822645" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168822645">(Jun 24 2019 at 05:05)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">baz</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">a</span><span class="bp">*</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">let</span> <span class="n">k</span> <span class="o">:=</span> <span class="n">max</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)),</span>
  <span class="k">let</span> <span class="n">x</span> <span class="o">:=</span> <span class="bp">-</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">nat_abs</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">nat_abs</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">existsi</span> <span class="n">nat_abs</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">existsi</span> <span class="n">nat_abs</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_inj</span><span class="o">,</span>
  <span class="k">calc</span>
    <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="o">(</span><span class="n">nat_abs</span> <span class="n">x</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hx</span><span class="bp">.</span><span class="n">symm</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">a</span><span class="bp">*</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">,</span> <span class="n">add_assoc</span><span class="o">,</span> <span class="n">h</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">a</span><span class="bp">*</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">sorry</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">a</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">add_neg_self</span><span class="o">,</span> <span class="n">mul_comm</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">y</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hy</span><span class="bp">.</span><span class="n">symm</span><span class="o">]</span>
<span class="kn">end</span>
</pre></div>



<a name="168822703"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168822703" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168822703">(Jun 24 2019 at 05:06)</a>:</h4>
<p>I have trouble to finish the last sorry (on the 5th last line)</p>



<a name="168822720"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168822720" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168822720">(Jun 24 2019 at 05:07)</a>:</h4>
<p>I know that i should use <code>gcd_eq_gcd_ab</code>, but type problems  of Z and N keep coming up, and I don't know how to use  ↑ correctly</p>



<a name="168825903"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168825903" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168825903">(Jun 24 2019 at 06:34)</a>:</h4>
<p>make sure to bracket things correctly so that the work is isolated</p>



<a name="168825930"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168825930" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168825930">(Jun 24 2019 at 06:34)</a>:</h4>
<p>when you write <code>a+b+c+d</code> that gets associated as <code>((a+b)+c)+d</code>, so you are mixing different concerns</p>



<a name="168825960"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168825960" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168825960">(Jun 24 2019 at 06:36)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">baz</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">a</span><span class="bp">*</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">let</span> <span class="n">k</span> <span class="o">:=</span> <span class="n">max</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)),</span>
  <span class="k">let</span> <span class="n">x</span> <span class="o">:=</span> <span class="bp">-</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">nat_abs</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">nat_abs</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">existsi</span> <span class="n">nat_abs</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">existsi</span> <span class="n">nat_abs</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_inj</span><span class="o">,</span>
  <span class="k">calc</span>
    <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="o">(</span><span class="n">nat_abs</span> <span class="n">x</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hx</span><span class="bp">.</span><span class="n">symm</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">a</span><span class="bp">*</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">,</span> <span class="n">add_assoc</span><span class="o">,</span> <span class="n">h</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">a</span><span class="bp">*</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">gcd_eq_gcd_ab</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">a</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">add_neg_self</span><span class="o">,</span> <span class="n">mul_comm</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">y</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hy</span><span class="bp">.</span><span class="n">symm</span><span class="o">]</span>
<span class="kn">end</span>
</pre></div>



<a name="168826122"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168826122" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168826122">(Jun 24 2019 at 06:38)</a>:</h4>
<p>nope, this doesnt work, it has error message :</p>
<p>rewrite tactic failed, did not find instance of the pattern in the target expression<br>
  gcd ?m_4 ?m_5<br>
state:<br>
a b : ℕ,<br>
h : nat.gcd a b = 1,<br>
k : ℕ := max (nat_abs (gcd_a ↑a ↑b)) (nat_abs (gcd_b ↑a ↑b)),<br>
x : ℤ := -nat.gcd_a a b + ↑b * ↑k,<br>
y : ℤ := nat.gcd_b a b + ↑a * ↑k,<br>
hx : x = ↑(nat_abs x),<br>
hy : y = ↑(nat_abs y)<br>
⊢ -↑a * nat.gcd_a a b + ↑(nat.gcd a b) + ↑a * ↑b * ↑k =<br>
    -↑a * nat.gcd_a a b + (↑a * nat.gcd_a a b + ↑b * nat.gcd_b a b) + ↑a * ↑b * ↑k<br>
state:<br>
a b : ℕ,<br>
h : nat.gcd a b = 1,<br>
k : ℕ := max (nat_abs (gcd_a ↑a ↑b)) (nat_abs (gcd_b ↑a ↑b)),<br>
x : ℤ := -nat.gcd_a a b + ↑b * ↑k,<br>
y : ℤ := nat.gcd_b a b + ↑a * ↑k,<br>
hx : x = ↑(nat_abs x),<br>
hy : y = ↑(nat_abs y)<br>
⊢ ↑(a * nat_abs x + 1) = ↑(b * nat_abs y)</p>



<a name="168826782"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168826782" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168826782">(Jun 24 2019 at 06:52)</a>:</h4>
<p>this works for me:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">int</span><span class="bp">.</span><span class="n">gcd</span>
<span class="kn">open</span> <span class="n">nat</span> <span class="n">int</span>
<span class="kn">lemma</span> <span class="n">baz</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">a</span><span class="bp">*</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">let</span> <span class="n">k</span> <span class="o">:=</span> <span class="n">max</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)),</span>
  <span class="k">let</span> <span class="n">x</span> <span class="o">:=</span> <span class="bp">-</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">nat_abs</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">nat_abs</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">existsi</span> <span class="n">nat_abs</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">existsi</span> <span class="n">nat_abs</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_inj</span><span class="o">,</span>
  <span class="k">calc</span>
    <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="o">(</span><span class="n">nat_abs</span> <span class="n">x</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hx</span><span class="bp">.</span><span class="n">symm</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">a</span><span class="bp">*</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">,</span> <span class="n">add_assoc</span><span class="o">,</span> <span class="n">h</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">a</span><span class="bp">*</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">gcd_eq_gcd_ab</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">a</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">add_neg_self</span><span class="o">,</span> <span class="n">mul_comm</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">y</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hy</span><span class="bp">.</span><span class="n">symm</span><span class="o">]</span>
<span class="kn">end</span>
</pre></div>



<a name="168826864"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168826864" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168826864">(Jun 24 2019 at 06:54)</a>:</h4>
<p>it's not clear to me what you have open, but it seems to work with <code>nat</code> and <code>int</code> open</p>



<a name="168826877"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168826877" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168826877">(Jun 24 2019 at 06:55)</a>:</h4>
<p>maybe you have something else imported so that <code>gcd</code> means something else?</p>



<a name="168827791"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168827791" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168827791">(Jun 24 2019 at 07:14)</a>:</h4>
<p>I opened euclidean domain, thats why. but actually i don't need it. Thanks!</p>



<a name="168835461"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168835461" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168835461">(Jun 24 2019 at 09:45)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">baz</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">a</span><span class="bp">*</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">let</span> <span class="n">k</span> <span class="o">:=</span> <span class="n">max</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)),</span>
  <span class="k">let</span> <span class="n">x</span> <span class="o">:=</span> <span class="bp">-</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hxx</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="o">:=</span>
    <span class="k">calc</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="bp">-</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">sorry</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="bp">-</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="o">(</span><span class="n">max</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)))</span>
           <span class="o">:</span> <span class="k">by</span> <span class="n">sorry</span> <span class="c1">--simp [le_max_left]</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">sorry</span><span class="c1">--simp</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
</pre></div>


<p>this time is about the 2nd and 3rd <code>sorry</code>. why dont those corresponding commands (which I commented above) work?</p>



<a name="168841318"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168841318" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168841318">(Jun 24 2019 at 11:32)</a>:</h4>
<p>I insert my canonical remark. [It would be easier for people like me if you could just post fully working code. I need to open things, maybe import things, etc; can you do this part of the job for me please?].</p>



<a name="168841441"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168841441" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168841441">(Jun 24 2019 at 11:34)</a>:</h4>
<p>But the answer to your question might be that the first sorry won't work because <code>simp</code> is designed to prove equalities, not inequalities, and the second proof should probably be <code>rfl</code> because it looks to me like it's true by definition.</p>



<a name="168841553"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168841553" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168841553">(Jun 24 2019 at 11:36)</a>:</h4>
<p>All the simplifier does is that it proves things of the form X = Y by attempting to simplify both sides into a canonical form and then checking that they're true by definition. A simp lemma is of the form A = B, and if A is a sub-term in X then the simplifier will replace A by B; that's why simp lemmas should have (complicated) = (simpler) in that order.</p>



<a name="168841913"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168841913" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168841913">(Jun 24 2019 at 11:42)</a>:</h4>
<blockquote>
<p>I insert my canonical remark. [It would be easier for people like me if you could just post fully working code. I need to open things, maybe import things, etc; can you do this part of the job for me please?].</p>
</blockquote>
<p>ok sure!</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">int</span><span class="bp">.</span><span class="n">basic</span> <span class="n">data</span><span class="bp">.</span><span class="n">int</span><span class="bp">.</span><span class="n">gcd</span>
<span class="kn">open</span> <span class="n">nat</span> <span class="n">int</span>

<span class="kn">lemma</span> <span class="n">baz</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">a</span><span class="bp">*</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">let</span> <span class="n">k</span> <span class="o">:=</span> <span class="n">max</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)),</span>
  <span class="k">let</span> <span class="n">x</span> <span class="o">:=</span> <span class="bp">-</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hxx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span> <span class="o">:=</span>
    <span class="k">calc</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="bp">-</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">sorry</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="bp">-</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="o">(</span><span class="n">max</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">sorry</span> <span class="c1">--simp [le_max_left]</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="n">sorry</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">nat_abs</span> <span class="n">x</span> <span class="o">:=</span> <span class="o">(</span><span class="n">nat_abs_of_nonneg</span> <span class="n">hxx</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">nat_abs</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">existsi</span> <span class="n">nat_abs</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">existsi</span> <span class="n">nat_abs</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_inj</span><span class="o">,</span>
  <span class="k">calc</span>
    <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="o">(</span><span class="n">nat_abs</span> <span class="n">x</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hx</span><span class="bp">.</span><span class="n">symm</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">a</span><span class="bp">*</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">,</span> <span class="n">add_assoc</span><span class="o">,</span> <span class="n">h</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">a</span><span class="bp">*</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">gcd_eq_gcd_ab</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">a</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">add_neg_self</span><span class="o">,</span> <span class="n">mul_comm</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">y</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hy</span><span class="bp">.</span><span class="n">symm</span><span class="o">]</span>
<span class="kn">end</span>
</pre></div>



<a name="168842049"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168842049" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168842049">(Jun 24 2019 at 11:44)</a>:</h4>
<p>for the 3rd sorry, rfl doesnt work...</p>



<a name="168842067"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168842067" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168842067">(Jun 24 2019 at 11:44)</a>:</h4>
<blockquote>
<p>All the simplifier does is that it proves things of the form X = Y by attempting to simplify both sides into a canonical form and then checking that they're true by definition. A simp lemma is of the form A = B, and if A is a sub-term in X then the simplifier will replace A by B; that's why simp lemmas should have (complicated) = (simpler) in that order.</p>
</blockquote>
<p>ah, i see</p>



<a name="168842238"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168842238" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168842238">(Jun 24 2019 at 11:47)</a>:</h4>
<div class="codehilite"><pre><span></span>    <span class="k">calc</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="bp">-</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">sorry</span>
</pre></div>


<p>a=1 and b=0 is a counterexample to this. This is the problem with skipping stuff -- even if your later two sorries are fixed the code might be unusable anyway.</p>



<a name="168842349"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168842349" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168842349">(Jun 24 2019 at 11:49)</a>:</h4>
<p>no, we cant have a=1, b=0 because of the hypothesis h</p>



<a name="168842361"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168842361" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168842361">(Jun 24 2019 at 11:49)</a>:</h4>
<p>1 and 0 are coprime</p>



<a name="168842365"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168842365" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168842365">(Jun 24 2019 at 11:49)</a>:</h4>
<p>The problem with the final sorry is that <code>k</code> is defined using the max on nat, and the other max is on int.</p>



<a name="168842427"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168842427" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168842427">(Jun 24 2019 at 11:50)</a>:</h4>
<p>oh no! :(</p>



<a name="168842449"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168842449" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168842449">(Jun 24 2019 at 11:50)</a>:</h4>
<p>i need to add more hypothesis then</p>



<a name="168842509"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168842509" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168842509">(Jun 24 2019 at 11:51)</a>:</h4>
<blockquote>
<p>The problem with the final sorry is that <code>k</code> is defined using the max on nat, and the other max is on int.</p>
</blockquote>
<p>how should I get around?</p>



<a name="168842683"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168842683" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168842683">(Jun 24 2019 at 11:54)</a>:</h4>
<p>There might be some magic tactic which does it, I've not tried those new cast tactics. If not, then you have to fix things up yourself. </p>
<p>My recommendation would be to change every single variable into an int as soon as possible, make all the problems go away, and then just prove that various things are &gt;= 0 at the end and then cast them back to nats.</p>



<a name="168842703"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168842703" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168842703">(Jun 24 2019 at 11:54)</a>:</h4>
<p>I would keep the max on nat, because that's the definition of k</p>



<a name="168842707"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168842707" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168842707">(Jun 24 2019 at 11:54)</a>:</h4>
<p>You're just in the typical nat/int hell which several of my students found themselves in over the summer. In my mind, if your proof uses ints, then why even use nats at all? Just use ints with a proof that they're &gt;= 0.</p>



<a name="168842730"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168842730" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168842730">(Jun 24 2019 at 11:55)</a>:</h4>
<p>it might help to write some up arrows because it's important to know where they are</p>



<a name="168842734"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168842734" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168842734">(Jun 24 2019 at 11:55)</a>:</h4>
<p>Maybe this would be a great place to test out the cast tactics. Did they get written up in the tactics docs?</p>



<a name="168842798"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168842798" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168842798">(Jun 24 2019 at 11:56)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/blob/master/docs/tactics.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/docs/tactics.md">https://github.com/leanprover-community/mathlib/blob/master/docs/tactics.md</a></p>
<p>They're right at the bottom. Maybe these can help. I've never used them though.</p>



<a name="168842833"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168842833" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168842833">(Jun 24 2019 at 11:56)</a>:</h4>
<p>to use the cast tactics, you have to actually have a specific goal that you can use them with</p>



<a name="168842871"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168842871" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168842871">(Jun 24 2019 at 11:57)</a>:</h4>
<p>distributing the arrows in this case is easily enough done by simp, that's already working in the example</p>



<a name="168849016"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168849016" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168849016">(Jun 24 2019 at 13:27)</a>:</h4>
<p>yes, i should definitely use int instead of nat. because I have to add the condition that a, b &gt;0 anyway, as you pointed out</p>



<a name="168849713"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168849713" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168849713">(Jun 24 2019 at 13:36)</a>:</h4>
<p>but since gcd_a and gcd_b are for nat instead of int, other troubles will arise...</p>



<a name="168853863"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168853863" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168853863">(Jun 24 2019 at 14:24)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">int</span><span class="bp">.</span><span class="n">basic</span> <span class="n">data</span><span class="bp">.</span><span class="n">int</span><span class="bp">.</span><span class="n">gcd</span>
<span class="kn">open</span> <span class="n">nat</span> <span class="n">int</span>

<span class="kn">lemma</span> <span class="n">baz</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span>
    <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">a</span><span class="bp">*</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">let</span> <span class="n">k</span> <span class="o">:=</span> <span class="n">max</span> <span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)),</span>
  <span class="k">let</span> <span class="n">x</span> <span class="o">:=</span> <span class="bp">-</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hxx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span> <span class="o">:=</span>
    <span class="k">calc</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="bp">-</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">sorry</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="bp">-</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="o">(</span><span class="n">max</span> <span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)))</span> <span class="o">:</span>
        <span class="k">by</span> <span class="n">sorry</span> <span class="c1">-- rw le_max_left</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">nat_abs</span> <span class="n">x</span> <span class="o">:=</span> <span class="o">(</span><span class="n">nat_abs_of_nonneg</span> <span class="n">hxx</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">nat_abs</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">existsi</span> <span class="n">nat_abs</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">existsi</span> <span class="n">nat_abs</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_inj</span><span class="o">,</span>
  <span class="k">calc</span>
    <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="o">(</span><span class="n">nat_abs</span> <span class="n">x</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hx</span><span class="bp">.</span><span class="n">symm</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">a</span><span class="bp">*</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">,</span> <span class="n">add_assoc</span><span class="o">,</span> <span class="n">h</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">a</span><span class="bp">*</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">gcd_eq_gcd_ab</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">a</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">add_neg_self</span><span class="o">,</span> <span class="n">mul_comm</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">y</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hy</span><span class="bp">.</span><span class="n">symm</span><span class="o">]</span>
<span class="kn">end</span>
</pre></div>



<a name="168853912"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168853912" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168853912">(Jun 24 2019 at 14:25)</a>:</h4>
<p>now i have changed the definition of k so that everything should be in int. why <code>rw le_max_left </code> still doesnt work?</p>



<a name="168857486"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168857486" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168857486">(Jun 24 2019 at 15:05)</a>:</h4>
<p>oh, i know why, its because i need a proof for <code>(b:nat)(a:int)(c:int)(a&lt;=c) : b*a &lt;= b*c</code>. i guess this is proven somewhere already?</p>



<a name="168859399"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168859399" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168859399">(Jun 24 2019 at 15:25)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">int</span><span class="bp">.</span><span class="n">basic</span> <span class="n">data</span><span class="bp">.</span><span class="n">int</span><span class="bp">.</span><span class="n">gcd</span>
<span class="kn">open</span> <span class="n">nat</span> <span class="n">int</span>

<span class="kn">lemma</span> <span class="n">baz</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span>
    <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">a</span><span class="bp">*</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">let</span> <span class="n">k</span> <span class="o">:=</span> <span class="n">max</span> <span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)),</span>
  <span class="k">let</span> <span class="n">x</span> <span class="o">:=</span> <span class="bp">-</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hxx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span> <span class="o">:=</span>
    <span class="k">calc</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">b</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">sorry</span> <span class="c1">-- rw hb ...?</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="o">(</span><span class="err">↑</span><span class="n">b</span> <span class="bp">-</span> <span class="err">↑</span><span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">b</span><span class="bp">*</span><span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="bp">-</span> <span class="err">↑</span><span class="mi">1</span><span class="bp">*</span><span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span>
        <span class="o">:</span> <span class="n">sub_mul</span> <span class="o">(</span><span class="err">↑</span><span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="err">↑</span><span class="mi">1</span><span class="o">)</span> <span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="n">b</span><span class="bp">*</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="bp">-</span> <span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="k">by</span> <span class="n">sorry</span> <span class="c1">-- ...?</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="bp">-</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="o">(</span><span class="n">max</span> <span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)))</span> <span class="o">:</span>
        <span class="k">by</span> <span class="n">sorry</span> <span class="c1">-- rw le_max_left ...?</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">nat_abs</span> <span class="n">x</span> <span class="o">:=</span> <span class="o">(</span><span class="n">nat_abs_of_nonneg</span> <span class="n">hxx</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">nat_abs</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">existsi</span> <span class="n">nat_abs</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">existsi</span> <span class="n">nat_abs</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_inj</span><span class="o">,</span>
  <span class="k">calc</span>
    <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="o">(</span><span class="n">nat_abs</span> <span class="n">x</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hx</span><span class="bp">.</span><span class="n">symm</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">a</span><span class="bp">*</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">,</span> <span class="n">add_assoc</span><span class="o">,</span> <span class="n">h</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">a</span><span class="bp">*</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">gcd_eq_gcd_ab</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">a</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">add_neg_self</span><span class="o">,</span> <span class="n">mul_comm</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">y</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hy</span><span class="bp">.</span><span class="n">symm</span><span class="o">]</span>
<span class="kn">end</span>
</pre></div>



<a name="168859748"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168859748" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168859748">(Jun 24 2019 at 15:29)</a>:</h4>
<p>OK, I can finally see the end. Only 3 sorry's (the first 3) are left to be filled, which I believe can be done using existing theorems. Can someone please tell me what the right commands are? Thanks!</p>



<a name="168861621"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168861621" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168861621">(Jun 24 2019 at 15:53)</a>:</h4>
<p>Did you try library search?</p>



<a name="168862027"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168862027" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168862027">(Jun 24 2019 at 15:58)</a>:</h4>
<p>How to do <code>library_search</code>? <span aria-label="exhausted" class="emoji emoji-1f625" role="img" title="exhausted">:exhausted:</span></p>



<a name="168862066"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168862066" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168862066">(Jun 24 2019 at 15:58)</a>:</h4>
<p>Read the documentation for <code>library_search</code>?</p>



<a name="168862199"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168862199" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168862199">(Jun 24 2019 at 16:00)</a>:</h4>
<p>in <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/tactics.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/docs/tactics.md">https://github.com/leanprover-community/mathlib/blob/master/docs/tactics.md</a></p>



<a name="168862716"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168862716" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168862716">(Jun 24 2019 at 16:08)</a>:</h4>
<blockquote>
<p>Read the documentation for <code>library_search</code>?</p>
</blockquote>
<p>Ya, I just noticed this, embarrassing lol</p>



<a name="168863189"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168863189" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168863189">(Jun 24 2019 at 16:16)</a>:</h4>
<p>library_search times out :(</p>



<a name="168863686"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168863686" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168863686">(Jun 24 2019 at 16:24)</a>:</h4>
<p>So your first sorry is a proof of</p>
<div class="codehilite"><pre><span></span> 0 * nat_abs (gcd_a a b) ≤ (b - 1) * (nat_abs (gcd_a a b))
</pre></div>


<p>You wrote <code>rw hb</code>, and here <code>hb : b &gt;= 1</code>. NB that's not the canonical way to write that inequality, the canonical way is <code>1 &lt;= b</code>. Yes, it does make a difference :-/</p>
<p>But you probably know what rw really does. For <code>rw h</code> to work, <code>h</code> must really be of the form <code>A = B</code>, and then <code>rw</code> takes the A's and replaces them with B's. So this is not a rewrite at all. What it is is a theorem. It's the theorem that x &lt;= y and c &gt;= 0 then x * c &lt;= y * c. And that theorem will have a name, which you can either guess (once you understand the naming conventions), remember (once you've used Lean for a while) or look up using library-search (if it works).</p>



<a name="168863743"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168863743" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168863743">(Jun 24 2019 at 16:25)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">library_search</span> <span class="c1">-- works!</span>
</pre></div>



<a name="168864060"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168864060" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168864060">(Jun 24 2019 at 16:30)</a>:</h4>
<p>Your second sorry seems to be of the form</p>
<div class="codehilite"><pre><span></span>↑b*↑(nat_abs (gcd_a a b)) - ↑1*↑(nat_abs (gcd_a a b)) ≤ b*(nat_abs (gcd_a a b)) - gcd_a a b
</pre></div>


<p>Why are you proving an inequality? It looks to me like this should be an equality. It seems to me that there are three issues here. The first is the inequality. The second is that a bunch of arrows disappeared (either because you didn't write them and they're still there really, or because you really are switching from integers to naturals). To sort that out you'll either need some cast tactic, or you should just work with integers all the way through. The final thing is the issue that you are implicitly assuming <code>1 * x = x</code>. That's a theorem, it's not true by definition, so it will have a name (I guess the name is <code>one_mul</code>), and that theorem needs to be applied somehow (by rewriting I guess) to get rid of that 1.</p>



<a name="168864547"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168864547" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168864547">(Jun 24 2019 at 16:39)</a>:</h4>
<p>The third sorry is</p>
<div class="codehilite"><pre><span></span>-gcd_a a b + b*↑(nat_abs (gcd_a a b))
 ≤ -gcd_a a b + b*(max ↑(nat_abs (gcd_a a b)) ↑(nat_abs (gcd_b a b)))
</pre></div>


<p>You want to use <code>le_max_left</code> but again there are several steps which you're leaving out. As well as le_max_left there's the analogous theorem for the first sorry, but this time with conclusion <code>c * a &lt;= c * b</code> (different conclusion = different theorem name), and you're also using the fact that a &lt;= b implies c + a &lt;= c + b. I think the simplifier is not well suited for these questions -- but I might be wrong. In some sense this is the problem with calc mode. You could just enter tactic mode again with a begin end, and then do the rewriting yourself.</p>
<div class="codehilite"><pre><span></span>    <span class="k">calc</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">b</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">sorry</span> <span class="c1">-- rw hb ...?</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="o">(</span><span class="err">↑</span><span class="n">b</span> <span class="bp">-</span> <span class="err">↑</span><span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">b</span><span class="bp">*</span><span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="bp">-</span> <span class="err">↑</span><span class="mi">1</span><span class="bp">*</span><span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span>
        <span class="o">:</span> <span class="n">sub_mul</span> <span class="o">(</span><span class="err">↑</span><span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="err">↑</span><span class="mi">1</span><span class="o">)</span> <span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="n">b</span><span class="bp">*</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="bp">-</span> <span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="k">by</span> <span class="n">sorry</span> <span class="c1">-- ...?</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="bp">-</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="o">(</span><span class="n">max</span> <span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)))</span> <span class="o">:</span>
        <span class="k">begin</span>
          <span class="n">apply</span> <span class="n">add_le_add_left</span><span class="o">,</span>
          <span class="n">apply</span> <span class="n">mul_le_mul_of_nonneg_left</span><span class="o">,</span>
            <span class="n">exact</span> <span class="n">le_max_left</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span>
          <span class="c1">-- etc</span>
          <span class="n">sorry</span>
        <span class="kn">end</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span>
</pre></div>


<p>Tactic mode is the best mode really. You wrote <code>rw le_max_left</code> but that doesn't even make sense; you can only rewrite equalities. You are not thinking about what is really happening. What is really happening is that you are constantly applying little lemmas. The proof of <code>c + d * a &lt;= c + d * (max a b)</code> is really not a rewrite. It is an application of several unrelated facts about inequalities, each of which has been painstakingly proved by the library creators. One of them is le_max_left but there are others.</p>



<a name="168864836"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168864836" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168864836">(Jun 24 2019 at 16:43)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">int</span><span class="bp">.</span><span class="n">basic</span> <span class="n">data</span><span class="bp">.</span><span class="n">int</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">library_search</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">ordered_ring</span>
<span class="kn">open</span> <span class="n">nat</span> <span class="n">int</span>

<span class="kn">lemma</span> <span class="n">baz</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span>
    <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">a</span><span class="bp">*</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">let</span> <span class="n">k</span> <span class="o">:=</span> <span class="n">max</span> <span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)),</span>
  <span class="k">let</span> <span class="n">x</span> <span class="o">:=</span> <span class="bp">-</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hb</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="err">↑</span><span class="n">b</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hxx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span> <span class="o">:=</span>
    <span class="k">calc</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="o">(</span><span class="err">↑</span><span class="n">b</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="o">:</span>
        <span class="k">by</span> <span class="n">exact</span> <span class="n">mul_le_mul_of_nonneg_right</span> <span class="n">hb</span> <span class="n">hg</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="o">(</span><span class="err">↑</span><span class="n">b</span> <span class="bp">-</span> <span class="err">↑</span><span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">b</span><span class="bp">*</span><span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="bp">-</span> <span class="err">↑</span><span class="mi">1</span><span class="bp">*</span><span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="o">:</span>
        <span class="n">sub_mul</span> <span class="o">(</span><span class="err">↑</span><span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="err">↑</span><span class="mi">1</span><span class="o">)</span> <span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="bp">-</span> <span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="n">b</span><span class="bp">*</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="bp">-</span> <span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="k">by</span> <span class="n">sorry</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="bp">-</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="o">(</span><span class="n">max</span> <span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="err">↑</span><span class="o">(</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)))</span> <span class="o">:</span>
        <span class="k">by</span> <span class="n">sorry</span> <span class="c1">-- rw le_max_left ...?</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">nat_abs</span> <span class="n">x</span> <span class="o">:=</span> <span class="o">(</span><span class="n">nat_abs_of_nonneg</span> <span class="n">hxx</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">nat_abs</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">existsi</span> <span class="n">nat_abs</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">existsi</span> <span class="n">nat_abs</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_inj</span><span class="o">,</span>
  <span class="k">calc</span>
    <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="o">(</span><span class="n">nat_abs</span> <span class="n">x</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hx</span><span class="bp">.</span><span class="n">symm</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">a</span><span class="bp">*</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">,</span> <span class="n">add_assoc</span><span class="o">,</span> <span class="n">h</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">a</span><span class="bp">*</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">gcd_eq_gcd_ab</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">a</span><span class="bp">*</span><span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">add_neg_self</span><span class="o">,</span> <span class="n">mul_comm</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">y</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hy</span><span class="bp">.</span><span class="n">symm</span><span class="o">]</span>
<span class="kn">end</span>
</pre></div>



<a name="168864938"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168864938" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168864938">(Jun 24 2019 at 16:44)</a>:</h4>
<p>This is my attempt to resolve the first sorry, but I got an enormous error message. As for the second sorry, it should be an inequality since gcd_a can be negative. I will come back to this tomorrow, its so late at night. Anyway, thanks~</p>



<a name="168865211"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168865211" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168865211">(Jun 24 2019 at 16:48)</a>:</h4>
<blockquote>
<p>As for the second sorry, it should be an inequality since gcd_a can be negative.</p>
</blockquote>
<p>Oh, apologies! I thought these were the nat ones. In which case my comments apply about how things like a &lt;= b implies c - a &gt;= c - b are not immediate or automatic, they are theorems which need applying. You'll also need one_mul, and the fact that z &lt;= abs z.</p>



<a name="168865408"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168865408" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168865408">(Jun 24 2019 at 16:52)</a>:</h4>
<p>The enormous error message is only enormous because Lean has expanded everything out for you to explain what the problem is. If it just said "I was expecting a proof that something was &lt;= something, and you gave me a proof that something was &lt;= something" then it would be confusing. But</p>
<div class="codehilite"><pre><span></span>type mismatch at application
  mul_le_mul_of_nonneg_right hb
term
  hb
has type
  @has_le.le nat nat.has_le 0
    (@has_sub.sub nat nat.has_sub
       (@coe nat nat (@coe_to_lift nat nat (@coe_base nat nat (@nat.cast_coe nat nat.has_zero nat.has_one nat.has_add)))
          b)
       1)
but is expected to have type
  @has_le.le int
    (@preorder.to_has_le int
       ...
</pre></div>


<p>says that <code>hb</code> has type <code>@has_le.le nat ...</code> (i.e. it's a proof that one nat is &lt;= another nat) and you attempted to insert it into a function which was expecting something of type <code>@has_le.le int ...</code> i.e. expecting a proof that one int is &lt;= another int.</p>



<a name="168865616"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168865616" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168865616">(Jun 24 2019 at 16:55)</a>:</h4>
<p>replacing <code>by exact mul_le_mul_of_nonneg_right</code> with the more refined "attempt to solve the goal with this function but give me the inputs as new goals" <code>refine</code> tactic</p>
<div class="codehilite"><pre><span></span>begin refine mul_le_mul_of_nonneg_right _ _, sorry, sorry end
</pre></div>


<p>shows you what the problem is. You now need to fill in those two holes, and the results you have are not good enough because they have the wrong type. Did I mention the idea of just using integers everywhere by the way?</p>



<a name="168866030"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168866030" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168866030">(Jun 24 2019 at 17:00)</a>:</h4>
<blockquote>
<p>Did I mention the idea of just using integers everywhere by the way?</p>
</blockquote>
<p>but gcd_a, gcd_b are defined for nat instead of int</p>



<a name="168866043"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168866043" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168866043">(Jun 24 2019 at 17:00)</a>:</h4>
<p>But this issue is just a general pain in type theory. Do you understand how to use these new cast tactics? The first hole needs a resolution of this issue</p>
<div class="codehilite"><pre><span></span>hb : 0 ≤ ↑b - 1
⊢ 0 ≤ ↑b - 1
</pre></div>


<p>Here your hypothesis <code>hb</code> has an arrow in, which turns out to be a cast from <code>nat</code> to <code>nat</code>. You can see all the gory details of everything by <code>set_option pp.all true</code>. Setting this option will give you some real insight into how the computer is thinking about what you are doing. In particular you cannot cast from a nat to an int by just putting an up-arrow -- Lean doesn't know where you're casting to.</p>



<a name="168866118"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168866118" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168866118">(Jun 24 2019 at 17:01)</a>:</h4>
<blockquote>
<blockquote>
<p>Did I mention the idea of just using integers everywhere by the way?</p>
</blockquote>
<p>but gcd_a, gcd_b are defined for nat instead of int</p>
</blockquote>
<p>Feed them absolute values of ints? I don't know if this is a feasible solution.</p>



<a name="168866318"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168866318" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168866318">(Jun 24 2019 at 17:04)</a>:</h4>
<blockquote>
<blockquote>
<blockquote>
<p>Did I mention the idea of just using integers everywhere by the way?</p>
</blockquote>
<p>but gcd_a, gcd_b are defined for nat instead of int</p>
</blockquote>
<p>Feed them absolute values of ints? I don't know if this is a feasible solution.</p>
</blockquote>
<p>i will try tomorrow</p>



<a name="168866850"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168866850" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168866850">(Jun 24 2019 at 17:11)</a>:</h4>
<p>I don't know if this is feasible. All I see when I look at your code though is a bunch of stuff about ints, with subtractions etc. You might well find the int analogue of the <code>gcd_a</code> functions in <code>data.int.basic</code> somewhere or maybe even in core.</p>



<a name="168867991"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168867991" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168867991">(Jun 24 2019 at 17:27)</a>:</h4>
<p>Maybe now we have <code>norm_cast</code> you don't need to make everything an integer. This little lemma might be a nice test case. I just tried it on the first sorry and had positive results:</p>
<div class="codehilite"><pre><span></span>    calc (0 : ℤ) = 0 * nat_abs (gcd_a a b) : by simp
    ... ≤ (↑b - 1) * (nat_abs (gcd_a a b)) :
        begin apply mul_le_mul_of_nonneg_right,
          {norm_cast at hb ⊢, exact hb},
          {norm_cast, simp}
        end
</pre></div>



<a name="168868375"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168868375" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168868375">(Jun 24 2019 at 17:32)</a>:</h4>
<p>For the next one you need the theorem that a &lt;= b implies c - b &lt;= c - a (note how I always stick with &lt;=, otherwise there would be lots of ways of saying inequalities; there is a "canonical form" for many expressions in Lean and it is only slowly dawning on me how important this is in practice). To find that theorem you see that the conclusion is of the form "a subtraction is less than or equal to a subtraction" so I type "apply sub_le_sub" and then I press ctrl-space in VS Code and see a list of all Lean's theorems that start <code>sub_le_sub</code> and all their types too, so it's easy to find the one I want. That's another way of finding out the right name for a theorem.</p>



<a name="168875750"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168875750" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168875750">(Jun 24 2019 at 18:57)</a>:</h4>
<p><span class="user-mention" data-user-id="218709">@Adrian Chu</span> I don't think you're going in the right direction. The first thing to understand is natural numbers are bad. You never noticed because real world always insert coercions to integers and all the coercion related lemmas. My advice is to first state and prove the integer version. Then we'll talk about deducing the evil version. Here is the exercise I propose:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">euclidean_domain</span>
<span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">linarith</span>
<span class="kn">open</span> <span class="n">euclidean_domain</span>

<span class="kn">lemma</span> <span class="n">foo</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span>
    <span class="bp">∃</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">a</span><span class="bp">*</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">y</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">let</span> <span class="n">u</span> <span class="o">:=</span> <span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">v</span> <span class="o">:=</span> <span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">k</span> <span class="o">:=</span> <span class="n">max</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">),</span>
  <span class="n">use</span> <span class="o">[</span><span class="bp">-</span><span class="n">u</span><span class="bp">+</span><span class="n">b</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span> <span class="n">v</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">k</span><span class="o">],</span>
  <span class="n">repeat</span> <span class="o">{</span> <span class="n">split</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="k">show</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">*</span><span class="n">u</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">v</span><span class="o">,</span> <span class="k">from</span> <span class="n">sorry</span><span class="o">,</span>
    <span class="n">ring</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">suffices</span> <span class="o">:</span> <span class="n">u</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">max</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">),</span> <span class="k">by</span> <span class="n">linarith</span><span class="o">,</span>
    <span class="c1">-- now you can `calc`</span>
    <span class="n">sorry</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">sorry</span> <span class="o">}</span>
<span class="kn">end</span>
</pre></div>



<a name="168875884"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168875884" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168875884">(Jun 24 2019 at 18:58)</a>:</h4>
<p>each <code>calc</code> block is 4 lines long</p>



<a name="168875916"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168875916" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168875916">(Jun 24 2019 at 18:59)</a>:</h4>
<p>The first sorry is 20 characters (including spaces)</p>



<a name="168877209"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168877209" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168877209">(Jun 24 2019 at 19:16)</a>:</h4>
<p>Hmm, do we have any lemma relating <code>nat.gcd</code> and <code>euclidean_domain.gcd</code>?</p>



<a name="168877349"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168877349" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168877349">(Jun 24 2019 at 19:19)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> maybe?</p>



<a name="168877368"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168877368" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168877368">(Jun 24 2019 at 19:19)</a>:</h4>
<p>I'm not too familiar with that part of the lib...</p>



<a name="168877373"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168877373" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168877373">(Jun 24 2019 at 19:19)</a>:</h4>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span> ?</p>



<a name="168877439"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168877439" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168877439">(Jun 24 2019 at 19:20)</a>:</h4>
<p>I don't know, but I think there is glue between <code>nat.gcd</code> and <code>int.gcd</code>, and then also between <code>int.gcd</code> and <code>euclidean_domain.gcd</code>...</p>



<a name="168877452"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168877452" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168877452">(Jun 24 2019 at 19:20)</a>:</h4>
<p>Where would that be?</p>



<a name="168877481"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168877481" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168877481">(Jun 24 2019 at 19:21)</a>:</h4>
<p>Not sure... my memories might be wrong.</p>



<a name="168877567"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168877567" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168877567">(Jun 24 2019 at 19:22)</a>:</h4>
<p>Going from the int version of Adrian's lemma to the evil version is trivial except for:</p>
<div class="codehilite"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span>
<span class="err">⊢</span> <span class="n">gcd</span> <span class="err">↑</span><span class="n">a</span> <span class="err">↑</span><span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span>
</pre></div>



<a name="168877750"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168877750" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168877750">(Jun 24 2019 at 19:25)</a>:</h4>
<p>Hmm... if library_search can't close that, then we probably don't have it.</p>



<a name="168877876"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168877876" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168877876">(Jun 24 2019 at 19:27)</a>:</h4>
<p>I'm sure British people can prove this</p>



<a name="168878243"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168878243" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168878243">(Jun 24 2019 at 19:32)</a>:</h4>
<p>Maybe show they both have the same universal property? ;-)</p>



<a name="168878547"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168878547" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168878547">(Jun 24 2019 at 19:36)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">int</span><span class="bp">.</span><span class="n">gcd</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">rw</span> <span class="err">←</span><span class="n">h</span><span class="bp">;</span> <span class="n">unfold</span> <span class="n">int</span><span class="bp">.</span><span class="n">gcd</span><span class="bp">;</span> <span class="n">congr&#39;</span>
</pre></div>



<a name="168878603"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168878603" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168878603">(Jun 24 2019 at 19:38)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">int</span><span class="bp">.</span><span class="n">gcd</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">convert</span> <span class="n">h</span>
</pre></div>



<a name="168878755"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168878755" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168878755">(Jun 24 2019 at 19:39)</a>:</h4>
<p>I was slightly surprised this worked until I realised that <code>int.nat_abs (\u m) = m</code> was defeq for m a nat.</p>



<a name="168878842"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168878842" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168878842">(Jun 24 2019 at 19:40)</a>:</h4>
<p>Nice! This bridges to <code>int.gcd</code> but not to <code>euclidean_domain.gcd</code></p>



<a name="168879427"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168879427" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168879427">(Jun 24 2019 at 19:49)</a>:</h4>
<p>and the <code>by convert</code> is useless...</p>



<a name="168879526"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168879526" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168879526">(Jun 24 2019 at 19:50)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">int</span><span class="bp">.</span><span class="n">gcd</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">h</span>
</pre></div>


<p>Oh yeah! I used <code>convert</code> because I "knew" there would be trouble with the cast to int and back.</p>



<a name="168879571"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168879571" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168879571">(Jun 24 2019 at 19:51)</a>:</h4>
<p>but the game is to use <code>euclidean_domain.gcd</code></p>



<a name="168880379"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168880379" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168880379">(Jun 24 2019 at 20:00)</a>:</h4>
<div class="codehilite"><pre><span></span>#eval euclidean_domain.gcd (-1 : ℤ) (1 : ℤ) -- -1
#eval int.gcd (-1 : ℤ) (1 : ℤ) -- +1
</pre></div>


<p>:-(</p>



<a name="168881009"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168881009" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168881009">(Jun 24 2019 at 20:08)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">int</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">apply</span> <span class="n">gcd</span><span class="bp">.</span><span class="n">induction</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">x</span><span class="o">,</span> <span class="n">rw</span> <span class="n">gcd_zero_left</span><span class="o">,</span> <span class="n">exact</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_zero_left</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="n">x</span><span class="o">))</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">a</span> <span class="n">b</span> <span class="n">ha</span> <span class="n">hab</span><span class="o">,</span>
  <span class="n">convert</span> <span class="n">hab</span> <span class="kn">using</span> <span class="mi">1</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">gcd_val</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
  <span class="c1">-- ⊢ int.gcd a b = int.gcd (b % a) a</span>
  <span class="n">sorry</span>
<span class="kn">end</span>
</pre></div>


<p>This code (thanks, whoever wrote gcd.induction!) reduces the question to <code> int.gcd a b = int.gcd (b % a) a</code>.</p>



<a name="168881093"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168881093" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168881093">(Jun 24 2019 at 20:09)</a>:</h4>
<p>...which is almost a question about nat.gcd apart from the fact that one needs to relate |b%a| to |b|%|a|.</p>



<a name="168881330"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168881330" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168881330">(Jun 24 2019 at 20:13)</a>:</h4>
<p>What you are doing is not what I asked for</p>



<a name="168881361"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168881361" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168881361">(Jun 24 2019 at 20:13)</a>:</h4>
<p>why don't you formalise the question?</p>



<a name="168881384"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168881384" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168881384">(Jun 24 2019 at 20:13)</a>:</h4>
<p>I did!</p>



<a name="168881432"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168881432" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168881432">(Jun 24 2019 at 20:14)</a>:</h4>
<p>Oh -- I misunderstood the arrows.</p>



<a name="168881435"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168881435" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168881435">(Jun 24 2019 at 20:14)</a>:</h4>
<blockquote>
<p>Going from the int version of Adrian's lemma to the evil version is trivial except for:</p>
<div class="codehilite"><pre><span></span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span>
<span class="err">⊢</span> <span class="n">gcd</span> <span class="err">↑</span><span class="n">a</span> <span class="err">↑</span><span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span>
</pre></div>


</blockquote>



<a name="168881438"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168881438" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168881438">(Jun 24 2019 at 20:14)</a>:</h4>
<p>I thought I did that one.</p>



<a name="168881460"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168881460" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168881460">(Jun 24 2019 at 20:14)</a>:</h4>
<p>I have Lean code which looks like that on my screen right now, with int open :-)</p>



<a name="168881482"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168881482" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168881482">(Jun 24 2019 at 20:14)</a>:</h4>
<p>You need to open <code>euclidean_domain</code> instead</p>



<a name="168881497"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168881497" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168881497">(Jun 24 2019 at 20:15)</a>:</h4>
<p>you didn't post a MWE ;-)</p>



<a name="168881523"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168881523" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168881523">(Jun 24 2019 at 20:15)</a>:</h4>
<p>I did</p>



<a name="168881530"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168881530" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168881530">(Jun 24 2019 at 20:15)</a>:</h4>
<p>a few messages above</p>



<a name="168881532"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168881532" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168881532">(Jun 24 2019 at 20:15)</a>:</h4>
<p>anyway</p>



<a name="168881548"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168881548" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168881548">(Jun 24 2019 at 20:15)</a>:</h4>
<p>It was too minimal -- I guessed you'd opened the wrong thing :-)</p>
<p>I still propose we prove the thing I said about int. You can't use the inductive predicate for euclidean_domain.gcd on nats.</p>



<a name="168881620"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168881620" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168881620">(Jun 24 2019 at 20:16)</a>:</h4>
<p>So unless you want to get your hands dirty, we prove some statement which is valid for all ints (as I was in the middle of doing) and then deduce the nat thing via some dirty work.</p>



<a name="168881622"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168881622" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168881622">(Jun 24 2019 at 20:16)</a>:</h4>
<p>The context was my first message to Adrian, which included all imports and open</p>



<a name="168881667"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168881667" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168881667">(Jun 24 2019 at 20:17)</a>:</h4>
<p>And the best statement I could find which was true for all ints was the one I posted.</p>



<a name="168881860"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168881860" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168881860">(Jun 24 2019 at 20:20)</a>:</h4>
<p>bleurgh we need (a b : int), both &gt;=0 implies euclidean_domain.gcd a b &gt;=0 :-/</p>



<a name="168883133"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168883133" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168883133">(Jun 24 2019 at 20:37)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">useful</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">b</span> <span class="err">%</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="n">b</span><span class="o">)</span> <span class="err">%</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>


<p>Meh.</p>



<a name="168884494"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168884494" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168884494">(Jun 24 2019 at 20:56)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">euclidean_domain</span>

<span class="kn">open</span> <span class="n">euclidean_domain</span>

<span class="kn">theorem</span> <span class="n">useful</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">b</span> <span class="err">%</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="n">b</span><span class="o">)</span> <span class="err">%</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">theorem</span> <span class="n">useful2</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≥</span> <span class="mi">0</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">≥</span> <span class="mi">0</span> <span class="bp">→</span> <span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">≥</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">theorem</span> <span class="n">abs_gcd_eq_int_gcd</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">int</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">apply</span> <span class="n">gcd</span><span class="bp">.</span><span class="n">induction</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">x</span><span class="o">,</span> <span class="n">rw</span> <span class="n">gcd_zero_left</span><span class="o">,</span> <span class="n">exact</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_zero_left</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="n">x</span><span class="o">))</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">a</span> <span class="n">b</span> <span class="n">ha</span> <span class="n">hab</span><span class="o">,</span>
  <span class="n">convert</span> <span class="n">hab</span> <span class="kn">using</span> <span class="mi">1</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">gcd_val</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
  <span class="c1">--goal now : a ≠ 0 → int.gcd a b = int.gcd (b % a) a -- should be in mathlib</span>
  <span class="n">unfold</span> <span class="n">int</span><span class="bp">.</span><span class="n">gcd</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">useful</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">x</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">→</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="o">(</span><span class="n">y</span> <span class="err">%</span> <span class="n">x</span><span class="o">)</span> <span class="n">x</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hx</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">x</span> <span class="k">with</span> <span class="n">x</span><span class="o">,</span> <span class="n">revert</span> <span class="n">hx</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span>
    <span class="n">simp</span> <span class="c1">-- nat.gcd equation lemma</span>
  <span class="o">},</span>
  <span class="k">have</span> <span class="n">h2</span> <span class="o">:</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">h3</span><span class="o">,</span> <span class="n">ha</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">eq_zero_of_nat_abs_eq_zero</span> <span class="n">h3</span><span class="o">),</span> <span class="c1">-- missing a trick here</span>
  <span class="n">generalize</span> <span class="n">h3</span> <span class="o">:</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">A</span><span class="o">,</span>
  <span class="n">generalize</span> <span class="o">:</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">B</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">h</span><span class="o">,</span> <span class="n">rwa</span> <span class="err">←</span><span class="n">h3</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">theorem</span> <span class="n">patrick</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">gcd</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">show</span> <span class="n">gcd</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="n">b</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span>
  <span class="n">rw</span> <span class="err">←</span><span class="n">h</span><span class="o">,</span>
  <span class="k">show</span> <span class="bp">_</span> <span class="bp">=</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">),</span>
  <span class="n">rw</span> <span class="err">←</span><span class="n">abs_gcd_eq_int_gcd</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="n">b</span><span class="o">,</span>
  <span class="n">convert</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat_nat_abs_eq_of_nonneg</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
  <span class="c1">-- ⊢ euclidean_domain.gcd ↑a ↑b ≥ 0</span>
  <span class="n">apply</span> <span class="n">useful2</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat_nonneg</span> <span class="bp">_</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>


<p>Two sorries at the top. <span class="user-mention" data-user-id="110044">@Chris Hughes</span> <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> what tricks am I missing?</p>



<a name="168884513"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168884513" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168884513">(Jun 24 2019 at 20:56)</a>:</h4>
<p>The goal is to prove theorem <code>patrick</code>.</p>



<a name="168887163"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168887163" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168887163">(Jun 24 2019 at 21:37)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">useful2</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≥</span> <span class="mi">0</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">≥</span> <span class="mi">0</span> <span class="bp">→</span> <span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">≥</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">apply</span> <span class="n">gcd</span><span class="bp">.</span><span class="n">induction</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
    <span class="n">intros</span> <span class="n">x</span> <span class="n">h</span> <span class="n">hx</span><span class="o">,</span> <span class="n">rwa</span> <span class="n">gcd_zero_left</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">c</span> <span class="n">d</span> <span class="n">hcn</span> <span class="n">h</span> <span class="n">hc</span> <span class="n">hd</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">gcd_val</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">h</span> <span class="bp">_</span> <span class="n">hc</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">int</span><span class="bp">.</span><span class="n">mod_nonneg</span> <span class="n">d</span> <span class="n">hcn</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>



<a name="168887964"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168887964" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168887964">(Jun 24 2019 at 21:48)</a>:</h4>
<p>Personally I would question why you want to prove that theorem?</p>



<a name="168888593"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168888593" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168888593">(Jun 24 2019 at 21:57)</a>:</h4>
<p>I don't see why euclidean_domain.gcd is getting involved at all if the goal is to prove adrian's original statement</p>



<a name="168889874"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168889874" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168889874">(Jun 24 2019 at 22:17)</a>:</h4>
<p>Yeah I already tried that but Patrick moaned</p>



<a name="168889950"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168889950" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168889950">(Jun 24 2019 at 22:18)</a>:</h4>
<p>I'm having trouble working with <code>-A % B</code> with (A B : nat) and <code>int.mod</code></p>



<a name="168889991"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168889991" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168889991">(Jun 24 2019 at 22:19)</a>:</h4>
<div class="codehilite"><pre><span></span>1 goal
B : ℕ,
A : ℕ,
⊢ int.nat_abs (-↑A % ↑B) = int.nat_abs (-↑A) % B
</pre></div>



<a name="168890963"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168890963" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168890963">(Jun 24 2019 at 22:34)</a>:</h4>
<p>That's the last goal but it's bedtime</p>



<a name="168891065"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168891065" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168891065">(Jun 24 2019 at 22:36)</a>:</h4>
<p>The left mod is int.mod</p>



<a name="168891573"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168891573" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168891573">(Jun 24 2019 at 22:45)</a>:</h4>
<p>Aargh I don't think some of these are true :-/</p>



<a name="168891593"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168891593" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168891593">(Jun 24 2019 at 22:45)</a>:</h4>
<p>No wonder I was struggling :-)</p>



<a name="168891663"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168891663" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168891663">(Jun 24 2019 at 22:46)</a>:</h4>
<p>Do we have a tool which checks statements like these for a few random values of the integers in question?</p>



<a name="168891697"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168891697" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168891697">(Jun 24 2019 at 22:47)</a>:</h4>
<p>sure, you can use list ops to make a mini quickcheck</p>



<a name="168891798"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168891798" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168891798">(Jun 24 2019 at 22:49)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="bp">#</span><span class="kn">eval</span> <span class="n">do</span>
  <span class="n">A</span> <span class="err">←</span> <span class="n">list</span><span class="bp">.</span><span class="n">range</span> <span class="mi">10</span><span class="o">,</span>
  <span class="n">B</span> <span class="err">←</span> <span class="n">list</span><span class="bp">.</span><span class="n">range</span> <span class="mi">10</span><span class="o">,</span>
  <span class="n">guard</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="o">(</span><span class="bp">-</span><span class="err">↑</span><span class="n">A</span> <span class="err">%</span> <span class="err">↑</span><span class="n">B</span><span class="o">)</span> <span class="bp">≠</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="o">(</span><span class="bp">-</span><span class="err">↑</span><span class="n">A</span><span class="o">)</span> <span class="err">%</span> <span class="n">B</span><span class="o">),</span>
  <span class="n">return</span> <span class="o">(</span><span class="n">A</span><span class="o">,</span> <span class="n">B</span><span class="o">)</span>
<span class="c1">-- [(1, 3), ...]</span>
</pre></div>



<a name="168947675"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168947675" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168947675">(Jun 25 2019 at 15:14)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="218709">Adrian Chu</span> I don't think you're going in the right direction. The first thing to understand is natural numbers are bad. You never noticed because real world always insert coercions to integers and all the coercion related lemmas. My advice is to first state and prove the integer version. Then we'll talk about deducing the evil version. Here is the exercise I propose:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">euclidean_domain</span>
<span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">linarith</span>
<span class="kn">open</span> <span class="n">euclidean_domain</span>

<span class="kn">lemma</span> <span class="n">foo</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span>
    <span class="bp">∃</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">a</span><span class="bp">*</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">y</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">let</span> <span class="n">u</span> <span class="o">:=</span> <span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">v</span> <span class="o">:=</span> <span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">k</span> <span class="o">:=</span> <span class="n">max</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">),</span>
  <span class="n">use</span> <span class="o">[</span><span class="bp">-</span><span class="n">u</span><span class="bp">+</span><span class="n">b</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span> <span class="n">v</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">k</span><span class="o">],</span>
  <span class="n">repeat</span> <span class="o">{</span> <span class="n">split</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="k">show</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">*</span><span class="n">u</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">v</span><span class="o">,</span> <span class="k">from</span> <span class="n">sorry</span><span class="o">,</span>
    <span class="n">ring</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">suffices</span> <span class="o">:</span> <span class="n">u</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">max</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">),</span> <span class="k">by</span> <span class="n">linarith</span><span class="o">,</span>
    <span class="c1">-- now you can `calc`</span>
    <span class="n">sorry</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">sorry</span> <span class="o">}</span>
<span class="kn">end</span>
</pre></div>


</blockquote>
<p>So i guess i should try finishing this version of my lemma, and forget everything about nat.gcd</p>



<a name="168947873"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168947873" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168947873">(Jun 25 2019 at 15:17)</a>:</h4>
<p>If you can afford that then of course everything becomes much easier. I still think it's a problem that mathlib has at least three gcd with no lemmas relating them in the case of integers</p>



<a name="168947884"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168947884" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168947884">(Jun 25 2019 at 15:17)</a>:</h4>
<p>Did you manage to fill in the sorries in my exercise?</p>



<a name="168947953"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168947953" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168947953">(Jun 25 2019 at 15:18)</a>:</h4>
<p>I am working on them now</p>



<a name="168948117"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168948117" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168948117">(Jun 25 2019 at 15:20)</a>:</h4>
<p>Ok, I hope I inserted them wisely. I first wrote the full proof and then removed it to help you getting better training. Don't hesitate to ask questions if it's still too painful</p>



<a name="168950201"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168950201" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168950201">(Jun 25 2019 at 15:50)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">euclidean_domain</span>
<span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">linarith</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">library_search</span>
<span class="kn">open</span> <span class="n">euclidean_domain</span>

<span class="kn">lemma</span> <span class="n">foo</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span>
    <span class="bp">∃</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">a</span><span class="bp">*</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">y</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">let</span> <span class="n">u</span> <span class="o">:=</span> <span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">v</span> <span class="o">:=</span> <span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">k</span> <span class="o">:=</span> <span class="n">max</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">),</span>
  <span class="k">have</span> <span class="n">hk</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">k</span> <span class="o">:=</span>
    <span class="k">calc</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="n">u</span> <span class="o">:</span> <span class="n">abs_nonneg</span> <span class="n">u</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="n">max</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">)</span> <span class="o">:</span> <span class="n">le_max_left</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">)</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">k</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="n">use</span> <span class="o">[</span><span class="bp">-</span><span class="n">u</span><span class="bp">+</span><span class="n">b</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span> <span class="n">v</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">k</span><span class="o">],</span>
  <span class="n">repeat</span> <span class="o">{</span> <span class="n">split</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="k">show</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">*</span><span class="n">u</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">v</span><span class="o">,</span> <span class="k">from</span> <span class="n">sorry</span><span class="o">,</span>
    <span class="n">ring</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">suffices</span> <span class="o">:</span> <span class="n">u</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">max</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">),</span> <span class="k">by</span> <span class="n">linarith</span><span class="o">,</span>
    <span class="k">calc</span> <span class="n">u</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="n">u</span> <span class="o">:</span> <span class="k">by</span> <span class="n">exact</span> <span class="n">le_max_left</span> <span class="n">u</span> <span class="o">(</span><span class="bp">-</span><span class="n">u</span><span class="o">)</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="n">max</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">)</span> <span class="o">:</span> <span class="n">le_max_left</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">)</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">max</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">max</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">exact</span> <span class="n">mul_le_mul_of_nonneg_right</span> <span class="n">hb</span> <span class="n">hk</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">suffices</span> <span class="o">:</span> <span class="bp">-</span><span class="n">v</span> <span class="bp">≤</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">max</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">),</span> <span class="k">by</span> <span class="n">linarith</span><span class="o">,</span>
    <span class="k">calc</span> <span class="bp">-</span><span class="n">v</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="bp">-</span><span class="n">v</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">exact</span> <span class="n">le_max_left</span> <span class="o">(</span><span class="bp">-</span><span class="n">v</span><span class="o">)</span> <span class="o">(</span><span class="bp">-</span><span class="o">(</span><span class="bp">-</span><span class="n">v</span><span class="o">))</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">abs</span> <span class="n">v</span> <span class="o">:</span> <span class="n">abs_neg</span> <span class="n">v</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="n">max</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">)</span> <span class="o">:</span> <span class="n">le_max_right</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">)</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">max</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">max</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">exact</span> <span class="n">mul_le_mul_of_nonneg_right</span> <span class="n">ha</span> <span class="n">hk</span><span class="o">}</span>
<span class="kn">end</span>
</pre></div>



<a name="168950242"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168950242" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168950242">(Jun 25 2019 at 15:50)</a>:</h4>
<p>I'm not able to figure out the first sorry (with 20 characters only). i know we need to use <code>gcd_eq_gcd_ab</code> <span class="user-mention" data-user-id="110031">@Patrick Massot</span></p>



<a name="168950598"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168950598" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168950598">(Jun 25 2019 at 15:55)</a>:</h4>
<blockquote>
<p>Personally I would question why you want to prove that theorem?</p>
</blockquote>
<p>This is a crucial lemma in a theorem i want to prove</p>



<a name="168950684"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168950684" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168950684">(Jun 25 2019 at 15:57)</a>:</h4>
<blockquote>
<blockquote>
<p>Personally I would question why you want to prove that theorem?</p>
</blockquote>
<p>This is a crucial lemma in a theorem i want to prove</p>
</blockquote>
<p>I think that "that theorem" might have referred to the compatibility of the various notions of <code>gcd</code> which we have in Lean.</p>



<a name="168951452"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168951452" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168951452">(Jun 25 2019 at 16:06)</a>:</h4>
<p>You can shorten your first calc block to</p>
<div class="codehilite"><pre><span></span><span class="k">calc</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="n">u</span> <span class="o">:</span> <span class="n">abs_nonneg</span> <span class="n">u</span>
      <span class="bp">...</span> <span class="bp">≤</span> <span class="bp">_</span> <span class="o">:</span> <span class="n">le_max_left</span> <span class="bp">_</span> <span class="bp">_</span>
</pre></div>


<p>(or of course you can say <code>have hk : 0 ≤ k, from le_trans (abs_nonneg u) (le_max_left _ _),</code>)</p>



<a name="168951491"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168951491" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168951491">(Jun 25 2019 at 16:06)</a>:</h4>
<p>The sorry you couldn't do is <code>h ▸ gcd_eq_gcd_ab a b</code></p>



<a name="168951572"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168951572" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168951572">(Jun 25 2019 at 16:07)</a>:</h4>
<p>I hope you've learn a couple of tricks (those are no so easy to document)</p>



<a name="168951723"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168951723" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168951723">(Jun 25 2019 at 16:09)</a>:</h4>
<p>wow thanks a lot!</p>



<a name="168951742"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168951742" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168951742">(Jun 25 2019 at 16:09)</a>:</h4>
<p>i can finally move one to the second lemma, and then my main theorem :)</p>



<a name="168951744"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168951744" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168951744">(Jun 25 2019 at 16:09)</a>:</h4>
<p>The triangle is term mode's version of the rewrite tactic.</p>



<a name="168955379"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168955379" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168955379">(Jun 25 2019 at 16:53)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">euclidean_domain</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">big_operators</span> <span class="n">data</span><span class="bp">.</span><span class="n">finset</span>

<span class="kn">open</span> <span class="n">euclidean_domain</span>

<span class="n">def</span> <span class="n">fin_n_to_list</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">x</span><span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">list</span> <span class="bp">ℤ</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="k">then</span> <span class="n">x</span> <span class="bp">⟨</span><span class="n">i</span><span class="o">,</span> <span class="n">h</span><span class="bp">⟩</span> <span class="k">else</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">def</span> <span class="n">n_lcm</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="o">:=</span>
  <span class="n">list</span><span class="bp">.</span><span class="n">foldl</span> <span class="n">lcm</span> <span class="mi">1</span> <span class="o">(</span><span class="n">fin_n_to_list</span> <span class="n">x</span><span class="o">)</span>

<span class="kn">lemma</span> <span class="n">n_lcm_coprime</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span><span class="o">,</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">x</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">hy</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">y</span><span class="o">)</span>
  <span class="o">(</span><span class="n">coprime</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span><span class="o">,</span> <span class="n">gcd</span> <span class="o">(</span><span class="n">x</span> <span class="n">i</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">gcd</span> <span class="o">(</span><span class="n">n_lcm</span> <span class="n">x</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>



<a name="168955506"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168955506" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168955506">(Jun 25 2019 at 16:54)</a>:</h4>
<p>i will start to prove this lemma. is my formulation of definitions and the statement of lemma appropriate?</p>



<a name="168956553"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168956553" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168956553">(Jun 25 2019 at 17:07)</a>:</h4>
<p>Why are you using maps <code>fin n -&gt; int</code> at all? You are carrying around the length of your list, but you could just read it off by looking at the length of the list.</p>



<a name="168957099"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168957099" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168957099">(Jun 25 2019 at 17:13)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">euclidean_domain</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">big_operators</span> <span class="n">data</span><span class="bp">.</span><span class="n">finset</span>

<span class="kn">open</span> <span class="n">euclidean_domain</span>

<span class="n">def</span> <span class="n">list</span><span class="bp">.</span><span class="n">lcm</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">list</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="o">:=</span>
  <span class="n">list</span><span class="bp">.</span><span class="n">foldl</span> <span class="n">lcm</span> <span class="mi">1</span> <span class="n">x</span>

<span class="kn">lemma</span> <span class="n">list</span><span class="bp">.</span><span class="n">lcm_coprime</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">list</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">hy</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">y</span><span class="o">)</span>
  <span class="o">(</span><span class="n">coprime</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">x</span><span class="o">,</span> <span class="n">gcd</span> <span class="n">s</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">gcd</span> <span class="o">(</span><span class="n">x</span><span class="bp">.</span><span class="n">lcm</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>


<p>No <code>n</code> in sight -- it's never needed.</p>



<a name="168957196"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168957196" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168957196">(Jun 25 2019 at 17:14)</a>:</h4>
<p>Note also <code>x.lcm</code> for <code>list.lcm x</code>, it's a cool thing which I only recently understood.</p>



<a name="168957270"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168957270" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168957270">(Jun 25 2019 at 17:15)</a>:</h4>
<p>The CS purists might even say that these should all be theorems about multisets not lists, because the lcm does not depend on the order, so why are you carrying that around?</p>



<a name="168998075"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168998075" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168998075">(Jun 26 2019 at 04:04)</a>:</h4>
<p>a naive question: can a list have infinite length?</p>



<a name="168998413"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168998413" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168998413">(Jun 26 2019 at 04:13)</a>:</h4>
<p>No</p>



<a name="168998539"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168998539" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168998539">(Jun 26 2019 at 04:16)</a>:</h4>
<p>Nope, they can not.</p>



<a name="168998540"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168998540" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168998540">(Jun 26 2019 at 04:16)</a>:</h4>
<p><code>list.length</code> is defined for all lists, and it is a function to <code>nat</code>.</p>



<a name="168998541"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168998541" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168998541">(Jun 26 2019 at 04:16)</a>:</h4>
<p>Infinite lists are usually called "streams", and they need a different implementation. Not sure if we have them in Lean.</p>



<a name="168998549"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168998549" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168998549">(Jun 26 2019 at 04:16)</a>:</h4>
<p>Sorry... laggy internet connection...</p>



<a name="168998675"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168998675" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168998675">(Jun 26 2019 at 04:20)</a>:</h4>
<p>we have streams, they are just defined as <code>stream A := nat -&gt; A</code></p>



<a name="168998689"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168998689" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168998689">(Jun 26 2019 at 04:21)</a>:</h4>
<p>i see. all I want is an n-tuple of numbers. so i will use list Z instead of fin n -&gt; Z.</p>



<a name="168998690"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168998690" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168998690">(Jun 26 2019 at 04:21)</a>:</h4>
<p>There are also lazy lists, which are more like haskell lists in implementation but are still finite according to the theory. But in meta land you can construct infinite lazy lists</p>



<a name="168998753"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168998753" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168998753">(Jun 26 2019 at 04:22)</a>:</h4>
<blockquote>
<p>i see. all I want is an n-tuple of numbers. so i will use list Z instead of fin n -&gt; Z.</p>
</blockquote>
<p>The question is... is your <code>n</code> fixed? Because with a list, you don't know if it has length <code>n</code>.</p>



<a name="168998851"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168998851" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168998851">(Jun 26 2019 at 04:25)</a>:</h4>
<p>no, the lemma (and my main theorem) just need an arbitrary finite number of positive integers as inputs.</p>



<a name="168998894"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168998894" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168998894">(Jun 26 2019 at 04:26)</a>:</h4>
<p>so list should be good</p>



<a name="168999684"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168999684" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168999684">(Jun 26 2019 at 04:48)</a>:</h4>
<p>i just realized a problem. in my main theorem, i have a statement involving a^b, where a and b are positive integers. but since we are now letting a, b be int instead of nat, i cant use the default a^b function</p>



<a name="168999817"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/168999817" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#168999817">(Jun 26 2019 at 04:53)</a>:</h4>
<p>well i can use (nat_abs a)^(nat_abs b). its a bit ugly, but nvm</p>



<a name="169000582"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169000582" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169000582">(Jun 26 2019 at 05:13)</a>:</h4>
<p>I think you should keep them as nats rather than do something like that</p>



<a name="169000589"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169000589" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169000589">(Jun 26 2019 at 05:13)</a>:</h4>
<p>if they are actually nats then there's nothing wrong with that</p>



<a name="169001233"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169001233" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169001233">(Jun 26 2019 at 05:28)</a>:</h4>
<p><span class="user-mention" data-user-id="218709">@Adrian Chu</span> You can let <code>a</code> and <code>b</code> be <code>nat</code>s but nevertheless use <code>int.gcd</code> instead of <code>nat.gcd</code>.</p>



<a name="169001234"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169001234" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169001234">(Jun 26 2019 at 05:28)</a>:</h4>
<p>I agree that it's quite messy.</p>



<a name="169002015"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169002015" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169002015">(Jun 26 2019 at 05:45)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="218709">Adrian Chu</span> You can let <code>a</code> and <code>b</code> be <code>nat</code>s but nevertheless use <code>int.gcd</code> instead of <code>nat.gcd</code>.</p>
</blockquote>
<p>I don't think we can, since this gives error:</p>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">mythm</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">list</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">hr</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">z</span> <span class="err">∈</span> <span class="n">r</span><span class="o">,</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">z</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">s</span><span class="o">)</span>
  <span class="o">(</span><span class="n">coprime</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">z</span> <span class="err">∈</span> <span class="n">r</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">z</span> <span class="n">s</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>



<a name="169002082"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169002082" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169002082">(Jun 26 2019 at 05:47)</a>:</h4>
<p>what error? You may need to put some up arrows in there</p>



<a name="169002151"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169002151" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169002151">(Jun 26 2019 at 05:49)</a>:</h4>
<p>OK, fixed</p>



<a name="169002570"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169002570" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169002570">(Jun 26 2019 at 06:01)</a>:</h4>
<p>let x : list nat and I want to sum it. if for some reason I want to use <code>finset.univ.sum</code> instead of <code>x.sum</code>, what is the correct syntax?</p>



<a name="169002693"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169002693" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169002693">(Jun 26 2019 at 06:04)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">fintype</span>

<span class="kn">variable</span> <span class="n">x</span> <span class="o">:</span> <span class="n">list</span> <span class="bp">ℕ</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">finset</span><span class="bp">.</span><span class="n">univ</span><span class="bp">.</span><span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">x</span><span class="bp">.</span><span class="n">nth</span> <span class="n">i</span><span class="o">)</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">finset</span><span class="bp">.</span><span class="n">univ</span><span class="bp">.</span><span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">x</span><span class="bp">.</span><span class="n">range</span><span class="o">,</span> <span class="n">x</span><span class="bp">.</span><span class="n">nth</span> <span class="n">i</span><span class="o">)</span>
</pre></div>


<p>this doesnt work</p>



<a name="169002715"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169002715" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169002715">(Jun 26 2019 at 06:05)</a>:</h4>
<p>You need to <code>range</code> of the <code>length</code> of the list.</p>



<a name="169002720"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169002720" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169002720">(Jun 26 2019 at 06:05)</a>:</h4>
<p>Why do you want to use <code>finset.sum</code>?</p>



<a name="169002725"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169002725" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169002725">(Jun 26 2019 at 06:05)</a>:</h4>
<p>If so... shouldn't you be using <code>finset nat</code> instead of <code>list nat</code>?</p>



<a name="169002853"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169002853" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169002853">(Jun 26 2019 at 06:09)</a>:</h4>
<p>well I have <code>x : list nat</code> and <code>r : list nat</code>, lists of positive integers of the same length, and i want to sum (i-th term of x)^(i-th term of r) over i</p>



<a name="169002866"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169002866" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169002866">(Jun 26 2019 at 06:09)</a>:</h4>
<p>i thought using <code>finset.univ.sum</code> is the easiest</p>



<a name="169002917"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169002917" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169002917">(Jun 26 2019 at 06:10)</a>:</h4>
<p>I would do something like <code>zip_with</code> to put the powers together and <code>list.sum</code> to add them up</p>



<a name="169002928"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169002928" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169002928">(Jun 26 2019 at 06:10)</a>:</h4>
<blockquote>
<p>well I have <code>x : list nat</code> and <code>r : list nat</code>, lists of positive integers of the same length, and i want to sum (i-th term of x)^(i-th term of r) over i</p>
</blockquote>
<p>??? why are they of the same length?</p>



<a name="169002949"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169002949" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169002949">(Jun 26 2019 at 06:11)</a>:</h4>
<blockquote>
<blockquote>
<p>well I have <code>x : list nat</code> and <code>r : list nat</code>, lists of positive integers of the same length, and i want to sum (i-th term of x)^(i-th term of r) over i</p>
</blockquote>
<p>??? why are they of the same length?</p>
</blockquote>
<p>by assumption</p>



<a name="169005531"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169005531" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169005531">(Jun 26 2019 at 07:13)</a>:</h4>
<p>Can you arrange to have a <code>list (nat x nat)</code>?</p>



<a name="169006265"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169006265" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169006265">(Jun 26 2019 at 07:29)</a>:</h4>
<blockquote>
<p>Can you arrange to have a <code>list (nat x nat)</code>?</p>
</blockquote>
<p>how will this help?</p>



<a name="169006369"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169006369" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Huisinga <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169006369">(Jun 26 2019 at 07:31)</a>:</h4>
<p>it ensures that you have two lists of the same size, but is this really the easiest way to do it? why not pass a proof that the lengths are equal instead?</p>



<a name="169006384"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169006384" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169006384">(Jun 26 2019 at 07:31)</a>:</h4>
<p>it separates the information somewhat and generally makes the proofs harder</p>



<a name="169006472"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169006472" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169006472">(Jun 26 2019 at 07:32)</a>:</h4>
<p>I don't know about the direction of this thread though. What is the actual goal? I think the encoding decisions are being made without a good idea of the target theorem and that's bad news</p>



<a name="169006489"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169006489" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169006489">(Jun 26 2019 at 07:33)</a>:</h4>
<p>okok, let me write out the complete thm</p>



<a name="169006690"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169006690" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169006690">(Jun 26 2019 at 07:37)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">fintype</span>

<span class="kn">theorem</span> <span class="n">mythm</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">hr</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">r</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">s</span><span class="o">)</span>
  <span class="o">(</span><span class="n">coprime</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">coprime</span> <span class="o">(</span><span class="n">r</span> <span class="n">i</span><span class="o">)</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">x</span> <span class="n">i</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">finset</span><span class="bp">.</span><span class="n">univ</span><span class="bp">.</span><span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="n">x</span> <span class="n">i</span><span class="o">)</span><span class="err">^</span><span class="o">(</span><span class="n">r</span> <span class="n">i</span><span class="o">))</span> <span class="bp">=</span> <span class="n">y</span><span class="err">^</span><span class="n">s</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>



<a name="169006696"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169006696" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169006696">(Jun 26 2019 at 07:37)</a>:</h4>
<p>this is the original form of my theorem</p>



<a name="169006759"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169006759" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169006759">(Jun 26 2019 at 07:38)</a>:</h4>
<p>and we can discuss whether  (1) to use nat or int, and (2) to use fin n -&gt; nat or list nat</p>



<a name="169006867"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169006867" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Huisinga <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169006867">(Jun 26 2019 at 07:40)</a>:</h4>
<p>the only adv of fin n -&gt; nat i can think of is that fin n -&gt; nat can be handy when dealing with nested inductive types</p>



<a name="169006962"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169006962" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169006962">(Jun 26 2019 at 07:43)</a>:</h4>
<p>and I will use these 2 lemmas</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">fintype</span>
<span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">euclidean_domain</span>
<span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">big_operators</span>

<span class="kn">open</span> <span class="n">euclidean_domain</span>

<span class="n">def</span> <span class="n">fin_n_to_list</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">x</span><span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">list</span> <span class="bp">ℕ</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="k">then</span> <span class="n">x</span> <span class="bp">⟨</span><span class="n">i</span><span class="o">,</span> <span class="n">h</span><span class="bp">⟩</span> <span class="k">else</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">def</span> <span class="n">n_lcm</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span>
  <span class="n">list</span><span class="bp">.</span><span class="n">foldl</span> <span class="n">nat</span><span class="bp">.</span><span class="n">lcm</span> <span class="mi">1</span> <span class="o">(</span><span class="n">fin_n_to_list</span> <span class="n">x</span><span class="o">)</span>

<span class="kn">lemma</span> <span class="n">n_lcm_coprime</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">coprime</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">coprime</span> <span class="o">(</span><span class="n">x</span> <span class="n">i</span><span class="o">)</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">nat</span><span class="bp">.</span><span class="n">coprime</span> <span class="o">(</span><span class="n">n_lcm</span> <span class="n">x</span><span class="o">)</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">sorry</span> <span class="c1">-- not yet proven</span>

<span class="kn">lemma</span> <span class="n">bazout</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span>
    <span class="bp">∃</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">a</span><span class="bp">*</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">y</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">sorry</span> <span class="c1">-- already proven</span>
</pre></div>



<a name="169007185"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169007185" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169007185">(Jun 26 2019 at 07:47)</a>:</h4>
<p>The statement of <code>mythm</code> looks fine, except that you can replace <code>fin n</code> with any fintype <code>A</code>, and the <code>0 &lt;= y</code> is redundant</p>



<a name="169014710"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169014710" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169014710">(Jun 26 2019 at 09:58)</a>:</h4>
<p>no... i just tried, the conversion between int and nat is so frustrating (since my bazout lemma is using int). i want to use int in mythm. do we have a^b for a, b in int ?</p>



<a name="169014943"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169014943" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169014943">(Jun 26 2019 at 10:02)</a>:</h4>
<p>You want to have your bezout lemma on nat too</p>



<a name="169015511"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169015511" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169015511">(Jun 26 2019 at 10:13)</a>:</h4>
<p>good idea, i can make a new lemma bazout2 for nat using bazout</p>



<a name="169016013"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169016013" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169016013">(Jun 26 2019 at 10:22)</a>:</h4>
<p>my strategy now is to use a, b : nat, but use euclidean_domain.gcd (a:int) b</p>



<a name="169016523"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169016523" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169016523">(Jun 26 2019 at 10:30)</a>:</h4>
<p>Since you seem to already have a solution, I will show you how I would have proven your original bezout theorem:</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">bezout</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span>
    <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">a</span><span class="bp">*</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">let</span> <span class="n">k</span> <span class="o">:=</span> <span class="n">max</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">x</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="o">:=</span> <span class="n">b</span><span class="bp">*</span><span class="n">k</span> <span class="bp">-</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="o">:=</span> <span class="n">a</span><span class="bp">*</span><span class="n">k</span> <span class="bp">+</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
  <span class="n">refine</span> <span class="bp">⟨</span><span class="n">int</span><span class="bp">.</span><span class="n">to_nat</span> <span class="n">x</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">to_nat</span> <span class="n">y</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_inj</span> <span class="bp">_⟩</span><span class="o">,</span>
  <span class="n">suffices</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">int</span><span class="bp">.</span><span class="n">to_nat</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">int</span><span class="bp">.</span><span class="n">to_nat</span> <span class="n">y</span><span class="o">,</span> <span class="o">{</span><span class="n">simpa</span><span class="o">},</span>
  <span class="k">have</span> <span class="n">k1</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">k</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">le_add_left</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">ha&#39;</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_le</span><span class="bp">.</span><span class="mi">2</span> <span class="n">ha</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hb&#39;</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">b</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_le</span><span class="bp">.</span><span class="mi">2</span> <span class="n">hb</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">x0</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">refine</span> <span class="n">sub_nonneg</span><span class="bp">.</span><span class="mi">2</span> <span class="bp">_</span><span class="o">,</span>
    <span class="k">have</span> <span class="o">:=</span> <span class="n">mul_le_mul_of_nonneg_right</span> <span class="n">hb&#39;</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_nonneg</span> <span class="n">k</span><span class="o">),</span>
    <span class="n">rw</span> <span class="n">one_mul</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">le_trans</span> <span class="o">(</span><span class="n">le_trans</span> <span class="n">int</span><span class="bp">.</span><span class="n">le_nat_abs</span> <span class="bp">_</span><span class="o">)</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_le</span><span class="bp">.</span><span class="mi">2</span> <span class="bp">_</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">nat</span><span class="bp">.</span><span class="n">le_succ_of_le</span> <span class="o">(</span><span class="n">le_max_left</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span> <span class="o">},</span>
  <span class="k">have</span> <span class="n">y0</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">y</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">refine</span> <span class="n">sub_le_iff_le_add</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">_</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">zero_sub</span><span class="o">,</span>
    <span class="k">have</span> <span class="o">:=</span> <span class="n">mul_le_mul_of_nonneg_right</span> <span class="n">ha&#39;</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_nonneg</span> <span class="n">k</span><span class="o">),</span>
    <span class="n">rw</span> <span class="n">one_mul</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">le_trans</span> <span class="o">(</span><span class="n">le_trans</span> <span class="n">int</span><span class="bp">.</span><span class="n">le_nat_abs</span> <span class="bp">_</span><span class="o">)</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">nat_abs_neg</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_le</span><span class="o">],</span>
    <span class="n">exact</span> <span class="n">nat</span><span class="bp">.</span><span class="n">le_succ_of_le</span> <span class="o">(</span><span class="n">le_max_right</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span> <span class="o">},</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">to_nat_of_nonneg</span> <span class="n">x0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">to_nat_of_nonneg</span> <span class="n">y0</span><span class="o">],</span>
  <span class="k">have</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd_eq_gcd_ab</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_one</span><span class="o">]</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">this</span><span class="o">,</span> <span class="n">mul_sub</span><span class="o">,</span> <span class="err">←</span> <span class="n">add_assoc</span><span class="o">,</span> <span class="n">sub_add_cancel</span><span class="o">,</span> <span class="n">mul_left_comm</span><span class="o">,</span> <span class="err">←</span> <span class="n">mul_add</span><span class="o">],</span>
<span class="kn">end</span>
</pre></div>


<p>I don't think it's necessary to ban the use of nats as long as you are conscientious in your use of the up arrow. In particular if it makes you use more unusual functions with a worse interface then it's not worth it</p>



<a name="169018155"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169018155" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169018155">(Jun 26 2019 at 11:00)</a>:</h4>
<p>I think this is completely crazy. How can it be a good idea to have <code>nat.gcd</code>, <code>int.gcd</code> and <code>euclidean_domain.gcd</code> and not a single lemma relating those?</p>



<a name="169018175"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169018175" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169018175">(Jun 26 2019 at 11:00)</a>:</h4>
<p>Of course there should be such lemmas</p>



<a name="169018192"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169018192" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169018192">(Jun 26 2019 at 11:01)</a>:</h4>
<p>but we don't need the other gcds for this theorem</p>



<a name="169018289"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169018289" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169018289">(Jun 26 2019 at 11:02)</a>:</h4>
<p>The proof of this theorem is much nicer with <code>euclidean_domain.gcd</code>. Your proof is hideous, even if it could be nicer using <code>norm_cast</code></p>



<a name="169018308"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169018308" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169018308">(Jun 26 2019 at 11:02)</a>:</h4>
<p>None of the proof has to do with gcd</p>



<a name="169018357"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169018357" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169018357">(Jun 26 2019 at 11:03)</a>:</h4>
<p>It's quite possible that norm_cast can be used in a few places, but it's mostly about dealing with max and simple algebra</p>



<a name="169018368"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169018368" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169018368">(Jun 26 2019 at 11:03)</a>:</h4>
<p>also I don't really care about calc blocks</p>



<a name="169018490"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169018490" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169018490">(Jun 26 2019 at 11:05)</a>:</h4>
<p>Are you saying that there is a completely different proof that uses <code>euclidean_domain.gcd</code> with some different lemmas about it? I'm mostly following adrian's proof sketch here</p>



<a name="169018544"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169018544" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169018544">(Jun 26 2019 at 11:06)</a>:</h4>
<p>The fact that we have</p>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">gcd_eq_gcd_ab</span> <span class="o">:</span> <span class="o">(</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:=</span> <span class="bp">...</span>
</pre></div>


<p>and this proof is still nearly 30 lines is what is so jarring.</p>



<a name="169018563"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169018563" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169018563">(Jun 26 2019 at 11:06)</a>:</h4>
<p>This theorem is proving something completely different</p>



<a name="169018568"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169018568" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169018568">(Jun 26 2019 at 11:06)</a>:</h4>
<p>Hmm, I guess gcd_a is probably an int, so there's some content getting all the signs right</p>



<a name="169018581"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169018581" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169018581">(Jun 26 2019 at 11:07)</a>:</h4>
<p>The important part is the fact that you can shift around solutions by a multiple</p>



<a name="169018586"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169018586" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169018586">(Jun 26 2019 at 11:07)</a>:</h4>
<p>Right.</p>



<a name="169018603"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169018603" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169018603">(Jun 26 2019 at 11:07)</a>:</h4>
<p>and then you have some inequalities to check</p>



<a name="169018623"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169018623" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169018623">(Jun 26 2019 at 11:07)</a>:</h4>
<p>I mean</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">foo</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span>
    <span class="bp">∃</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">a</span><span class="bp">*</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">y</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">let</span> <span class="n">u</span> <span class="o">:=</span> <span class="n">gcd_a</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">v</span> <span class="o">:=</span> <span class="n">gcd_b</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">k</span> <span class="o">:=</span> <span class="n">max</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">),</span>
  <span class="k">have</span> <span class="n">hk</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">k</span> <span class="o">:=</span> <span class="n">le_trans</span> <span class="o">(</span><span class="n">abs_nonneg</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">le_max_left</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">),</span>
  <span class="n">use</span> <span class="o">[</span><span class="bp">-</span><span class="n">u</span><span class="bp">+</span><span class="n">b</span><span class="bp">*</span><span class="n">k</span><span class="o">,</span> <span class="n">v</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">k</span><span class="o">],</span>
  <span class="n">repeat</span> <span class="o">{</span> <span class="n">split</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="k">show</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">*</span><span class="n">u</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">v</span><span class="o">,</span> <span class="k">from</span> <span class="n">h</span> <span class="bp">▸</span> <span class="n">gcd_eq_gcd_ab</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
    <span class="n">ring</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">suffices</span> <span class="o">:</span> <span class="n">u</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">max</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">),</span> <span class="k">by</span> <span class="n">linarith</span><span class="o">,</span>
    <span class="k">calc</span> <span class="n">u</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="n">u</span> <span class="o">:</span> <span class="n">le_abs_self</span> <span class="n">u</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="n">max</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">)</span> <span class="o">:</span> <span class="n">le_max_left</span> <span class="bp">_</span> <span class="bp">_</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span><span class="bp">*</span><span class="n">max</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="n">b</span><span class="bp">*</span><span class="n">max</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">)</span> <span class="o">:</span> <span class="n">mul_le_mul_of_nonneg_right</span> <span class="n">hb</span> <span class="n">hk</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">suffices</span> <span class="o">:</span> <span class="bp">-</span><span class="n">v</span> <span class="bp">≤</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">max</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">),</span> <span class="k">by</span> <span class="n">linarith</span><span class="o">,</span>
    <span class="k">calc</span> <span class="bp">-</span><span class="n">v</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="n">v</span> <span class="o">:</span> <span class="n">neg_le_abs_self</span> <span class="bp">_</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="n">max</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">)</span> <span class="o">:</span> <span class="n">le_max_right</span> <span class="bp">_</span> <span class="bp">_</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span><span class="bp">*</span><span class="n">max</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">le_max_right</span> <span class="o">]</span>
    <span class="bp">...</span> <span class="bp">≤</span> <span class="n">a</span><span class="bp">*</span><span class="n">max</span> <span class="o">(</span><span class="n">abs</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">abs</span> <span class="n">v</span><span class="o">)</span> <span class="o">:</span> <span class="n">mul_le_mul_of_nonneg_right</span> <span class="n">ha</span> <span class="n">hk</span> <span class="o">}</span>
<span class="kn">end</span>
</pre></div>



<a name="169018666"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169018666" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169018666">(Jun 26 2019 at 11:08)</a>:</h4>
<p>I think our views on the meaning of the phrase "completely different" might have diverged a bit but I do take your point that more needs to be said.</p>



<a name="169018686"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169018686" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169018686">(Jun 26 2019 at 11:08)</a>:</h4>
<p>Ah, you linarith'd</p>



<a name="169018701"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169018701" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169018701">(Jun 26 2019 at 11:08)</a>:</h4>
<p>And then, modulo relating different versions of <code>gcd</code>, the proof of the <code>nat</code> version is:</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">baz</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span>
    <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">a</span><span class="bp">*</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rcases</span> <span class="n">foo</span> <span class="n">a</span> <span class="n">b</span> <span class="o">(</span><span class="k">by</span> <span class="n">exact_mod_cast</span> <span class="n">ha</span><span class="o">)</span> <span class="o">(</span><span class="k">by</span> <span class="n">exact_mod_cast</span> <span class="n">hb</span><span class="o">)</span> <span class="n">sorry</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">h</span><span class="o">,</span> <span class="n">hx</span><span class="o">,</span> <span class="n">hy</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="n">use</span> <span class="o">[</span><span class="n">x</span><span class="bp">.</span><span class="n">to_nat</span><span class="o">,</span> <span class="n">y</span><span class="bp">.</span><span class="n">to_nat</span><span class="o">],</span>
  <span class="n">rw</span> <span class="o">[</span><span class="k">show</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x</span><span class="bp">.</span><span class="n">to_nat</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">),</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hx</span><span class="o">],</span>
      <span class="k">show</span> <span class="n">y</span> <span class="bp">=</span> <span class="o">(</span><span class="n">y</span><span class="bp">.</span><span class="n">to_nat</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">),</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hy</span><span class="o">]]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">exact_mod_cast</span> <span class="n">h</span>
<span class="kn">end</span>
</pre></div>



<a name="169018705"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169018705" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169018705">(Jun 26 2019 at 11:08)</a>:</h4>
<p>and he rung.</p>



<a name="169018815"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169018815" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169018815">(Jun 26 2019 at 11:10)</a>:</h4>
<p>Of course I linarith, I ring, and norm_cast. I very strongly believe all this is essential for the future of proof assistants for mathematicians</p>



<a name="169019121"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169019121" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169019121">(Jun 26 2019 at 11:15)</a>:</h4>
<p>million thanks. i am building up the framework of the proof of mythm currently.</p>



<a name="169019829"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169019829" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169019829">(Jun 26 2019 at 11:27)</a>:</h4>
<blockquote>
<p>It's quite possible that norm_cast can be used in a few places, but it's mostly about dealing with max and simple algebra</p>
</blockquote>
<p>This is just the metamath-mario trying to get out. You can see a proof from very low-level principles and so figure that this is a good way to do it. The mathematicians see the theorem for <code>int</code> and figure that the boring work is already done, and that we should just use that.</p>



<a name="169019979"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169019979" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169019979">(Jun 26 2019 at 11:29)</a>:</h4>
<p>I don't use a high level tactic until I understand very well how effective it is and in what circumstances it can be used. AKA "no magic"</p>



<a name="169020048"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169020048" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169020048">(Jun 26 2019 at 11:30)</a>:</h4>
<p>That's exactly what I'm saying. You were brought up on metamath and this has formed the way you think about how to solve goals.</p>



<a name="169020049"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169020049" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169020049">(Jun 26 2019 at 11:30)</a>:</h4>
<p>That said there are also a few proof tricks in Patrick's proof that I missed</p>



<a name="169020062"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169020062" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169020062">(Jun 26 2019 at 11:30)</a>:</h4>
<p>We need both. We need Mario on one side, and we need Rob and Paul-Nicolas (and hopefully many more) on the other side</p>



<a name="169020089"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169020089" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169020089">(Jun 26 2019 at 11:31)</a>:</h4>
<p>Yes absolutely. I'm just saying that it's interesting.</p>



<a name="169020136"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169020136" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169020136">(Jun 26 2019 at 11:32)</a>:</h4>
<p>I think Mario wrote <code>ring</code> ;-)</p>



<a name="169020231"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169020231" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169020231">(Jun 26 2019 at 11:33)</a>:</h4>
<p>The difference between us is I feel the pressure of the actual proof term at all times</p>



<a name="169020262"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169020262" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169020262">(Jun 26 2019 at 11:33)</a>:</h4>
<p>If I use a complicated tactic that spews some gigantic... <em>thing</em>... in for my proof, I think it's a long and ugly proof</p>



<a name="169020277"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169020277" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169020277">(Jun 26 2019 at 11:33)</a>:</h4>
<p>That's an interesting comment. I have no concept of what proof terms look like.</p>



<a name="169020285"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169020285" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169020285">(Jun 26 2019 at 11:33)</a>:</h4>
<p>even if the proof script is just <code>by magic</code></p>



<a name="169020355"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169020355" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169020355">(Jun 26 2019 at 11:34)</a>:</h4>
<p>When I use <code>refine</code> and <code>apply</code> and <code>rw</code>, I know exactly what proof term is getting generated and how heavy that's going to be for the kernel</p>



<a name="169020373"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169020373" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169020373">(Jun 26 2019 at 11:35)</a>:</h4>
<p>With Olympiad training as a kid I was taught the importance of getting the solution out as quickly as possible, who cares about other stuff like elegance.</p>



<a name="169020404"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169020404" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169020404">(Jun 26 2019 at 11:35)</a>:</h4>
<p>I'm hoping that <code>refine</code> and <code>apply</code> don't add too much weight to the proof term! I know how to do them in term mode :-)</p>



<a name="169020413"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169020413" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169020413">(Jun 26 2019 at 11:35)</a>:</h4>
<p>that's exactly the point</p>



<a name="169020468"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169020468" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169020468">(Jun 26 2019 at 11:36)</a>:</h4>
<p>Then we need more CS people working on the magic tactics, so that they produce nicer terms</p>



<a name="169020473"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169020473" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169020473">(Jun 26 2019 at 11:36)</a>:</h4>
<p>You don't really need them - you could do them in term mode. They are just slight shorthands for building that proof term</p>



<a name="169020493"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169020493" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169020493">(Jun 26 2019 at 11:37)</a>:</h4>
<p>why do I care about the size of a proof term? It's immediately forgotten.</p>



<a name="169020494"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169020494" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169020494">(Jun 26 2019 at 11:37)</a>:</h4>
<p>I wish that was a bigger concern in lean-land. I care about it very much, but lean fights me when it comes to proof optimization</p>



<a name="169020507"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169020507" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169020507">(Jun 26 2019 at 11:37)</a>:</h4>
<p>It's not forgotten, it's stored and passed around and checked hundreds of time on travis and burns many CPU hours around the world</p>



<a name="169020950"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169020950" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169020950">(Jun 26 2019 at 11:45)</a>:</h4>
<p>I'm seriously thinking about buying a bigger CPU tonight</p>



<a name="169020993"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169020993" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169020993">(Jun 26 2019 at 11:46)</a>:</h4>
<p>I think I want more cores and more RAM, right?</p>



<a name="169021005"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169021005" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169021005">(Jun 26 2019 at 11:46)</a>:</h4>
<p>gone are the days of more pixels. I remember wanting more colours once!</p>



<a name="169021016"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169021016" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169021016">(Jun 26 2019 at 11:46)</a>:</h4>
<p>I upgraded from 2 to 8</p>



<a name="169021058"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169021058" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169021058">(Jun 26 2019 at 11:47)</a>:</h4>
<p>But some of the 8 colors were different on every other pixel so it was really more like... 12</p>



<a name="169021059"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169021059" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169021059">(Jun 26 2019 at 11:47)</a>:</h4>
<p>I think VScode doesn't use much more than 8 colors, so you should be fine now. Let's go for CPU cores instead</p>



<a name="169021066"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169021066" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169021066">(Jun 26 2019 at 11:47)</a>:</h4>
<p>Is a GPU of any use?</p>



<a name="169021072"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169021072" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169021072">(Jun 26 2019 at 11:47)</a>:</h4>
<p>Unfortunately no</p>



<a name="169021131"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169021131" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169021131">(Jun 26 2019 at 11:48)</a>:</h4>
<p>But wait until <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> starts working on Lean 4 on GPU</p>



<a name="169021291"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169021291" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169021291">(Jun 26 2019 at 11:51)</a>:</h4>
<p>This isn't really a noob question and probably deserves its own thread. My laptop has something like 4 cores and 16 gigs of ram and even if I compile mathlib I don't ever get close to those 16 gigs.</p>



<a name="169021323"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169021323" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169021323">(Jun 26 2019 at 11:51)</a>:</h4>
<p>I have RAM problems when I want to compile mathlib while using VScode on some other project</p>



<a name="169021366"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169021366" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169021366">(Jun 26 2019 at 11:52)</a>:</h4>
<p>In particular, I wonder whether somehow there's a theorem of the form "if you have x cores, then don't buy any more than c * x gigs of ram because Lean won't use that much" for some constant c.</p>



<a name="169021394"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169021394" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169021394">(Jun 26 2019 at 11:53)</a>:</h4>
<p>When I want to compile mathlib and do something else too, I see how much free ram I have and then compile from the command line with the -M flag. Occasionally the build just runs out of memory and stops, and then I just start it again.</p>



<a name="169021429"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169021429" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169021429">(Jun 26 2019 at 11:54)</a>:</h4>
<p>I haven't compile mathlib in the last 6 weeks. <code>cache-olean</code> is quite awesome.</p>



<a name="169021474"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169021474" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169021474">(Jun 26 2019 at 11:54)</a>:</h4>
<p>Using the M flag also stopped my desktop (which had no swap) from randomly crashing when Lean suddenly goes beserk and fills up all memory.</p>



<a name="169021525"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169021525" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169021525">(Jun 26 2019 at 11:55)</a>:</h4>
<p>IIRC it still didn't stop Lean going crazy when invoked via VS Code, so I added some swap anyway.</p>



<a name="169021560"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169021560" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169021560">(Jun 26 2019 at 11:55)</a>:</h4>
<p>compiling mathlib is still required when working on mathlib</p>



<a name="169026200"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169026200" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169026200">(Jun 26 2019 at 12:56)</a>:</h4>
<blockquote>
<p>It's not forgotten, it's stored and passed around and checked hundreds of time on travis and burns many CPU hours around the world</p>
</blockquote>
<p>You make it sound like I'm responsible for climate change!</p>



<a name="169026267"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169026267" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169026267">(Jun 26 2019 at 12:57)</a>:</h4>
<p>This is clearly what he means.</p>



<a name="169026312"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169026312" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169026312">(Jun 26 2019 at 12:57)</a>:</h4>
<p>And now you'll make it worse by flying to Portland</p>



<a name="169037916"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169037916" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169037916">(Jun 26 2019 at 14:49)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">euclidean_domain</span> <span class="n">data</span><span class="bp">.</span><span class="n">vector</span>
<span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">linarith</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">library_search</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">big_operators</span> <span class="n">data</span><span class="bp">.</span><span class="n">fintype</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">finset</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">open</span> <span class="n">euclidean_domain</span>

<span class="n">def</span> <span class="n">fin_n_to_list</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">x</span><span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">list</span> <span class="bp">ℕ</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="k">then</span> <span class="n">x</span> <span class="bp">⟨</span><span class="n">i</span><span class="o">,</span> <span class="n">h</span><span class="bp">⟩</span> <span class="k">else</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">def</span> <span class="n">n_lcm</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span>
  <span class="n">list</span><span class="bp">.</span><span class="n">foldl</span> <span class="n">nat</span><span class="bp">.</span><span class="n">lcm</span> <span class="mi">1</span> <span class="o">(</span><span class="n">fin_n_to_list</span> <span class="n">x</span><span class="o">)</span>

<span class="kn">lemma</span> <span class="n">sum_to_mul</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">):</span>  <span class="n">finset</span><span class="bp">.</span><span class="n">univ</span><span class="bp">.</span><span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">*</span><span class="n">b</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">finset</span><span class="bp">.</span><span class="n">sum_const</span><span class="o">,</span> <span class="n">finset</span><span class="bp">.</span><span class="n">card_univ</span><span class="o">,</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">card_fin</span><span class="o">]</span>

<span class="kn">lemma</span> <span class="n">n_lcm_coprime</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">coprime</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="o">(</span><span class="n">x</span> <span class="n">i</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="o">(</span><span class="n">n_lcm</span> <span class="n">x</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="n">sorry</span> <span class="c1">-- need to prove</span>

<span class="kn">lemma</span> <span class="n">bazout_int</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span>
    <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">,</span> <span class="n">a</span><span class="bp">*</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">y</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">y</span> <span class="o">:=</span>
<span class="n">sorry</span> <span class="c1">-- already proven</span>

<span class="kn">lemma</span> <span class="n">bazout_nat</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span>
  <span class="c1">-- this is Patrick&#39;s version, or we can use mario&#39;s version above</span>
    <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">a</span><span class="bp">*</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rcases</span> <span class="n">bazout_int</span> <span class="n">a</span> <span class="n">b</span> <span class="o">(</span><span class="k">by</span> <span class="n">exact_mod_cast</span> <span class="n">ha</span><span class="o">)</span> <span class="o">(</span><span class="k">by</span> <span class="n">exact_mod_cast</span> <span class="n">hb</span><span class="o">)</span> <span class="n">sorry</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">h</span><span class="o">,</span> <span class="n">hx</span><span class="o">,</span> <span class="n">hy</span><span class="bp">⟩</span><span class="o">,</span>
<span class="c1">-- need to prove</span>
  <span class="n">use</span> <span class="o">[</span><span class="n">x</span><span class="bp">.</span><span class="n">to_nat</span><span class="o">,</span> <span class="n">y</span><span class="bp">.</span><span class="n">to_nat</span><span class="o">],</span>
  <span class="n">rw</span> <span class="o">[</span><span class="k">show</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x</span><span class="bp">.</span><span class="n">to_nat</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">),</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hx</span><span class="o">],</span>
      <span class="k">show</span> <span class="n">y</span> <span class="bp">=</span> <span class="o">(</span><span class="n">y</span><span class="bp">.</span><span class="n">to_nat</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">),</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hy</span><span class="o">]]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">exact_mod_cast</span> <span class="n">h</span>
<span class="kn">end</span>

<span class="kn">theorem</span> <span class="n">mythm</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
    <span class="o">(</span><span class="n">hn</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">hr</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">r</span> <span class="n">i</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span>
    <span class="o">(</span><span class="n">coprime</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">gcd</span> <span class="o">(</span><span class="n">r</span> <span class="n">i</span><span class="o">)</span> <span class="n">s</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span>
    <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
    <span class="o">(</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">x</span> <span class="n">i</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">finset</span><span class="bp">.</span><span class="n">univ</span><span class="bp">.</span><span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="n">x</span> <span class="n">i</span><span class="o">)</span><span class="err">^</span><span class="o">(</span><span class="n">r</span> <span class="n">i</span><span class="o">))</span> <span class="bp">=</span> <span class="n">y</span><span class="err">^</span><span class="n">s</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="k">let</span> <span class="n">t</span> <span class="o">:=</span> <span class="n">n_lcm</span> <span class="n">r</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">t_geq_1</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>  <span class="c1">-- need to prove</span>
    <span class="k">have</span> <span class="n">ri_div_t</span> <span class="o">:</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span><span class="o">,</span> <span class="n">t</span> <span class="err">%</span> <span class="o">(</span><span class="n">r</span> <span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>  <span class="c1">-- need to prove</span>
    <span class="k">let</span> <span class="n">t_s_coprime</span> <span class="o">:=</span> <span class="n">n_lcm_coprime</span> <span class="n">r</span> <span class="n">s</span> <span class="n">coprime</span><span class="o">,</span>
    <span class="n">cases</span> <span class="o">(</span><span class="n">bazout_nat</span> <span class="n">t</span> <span class="n">s</span> <span class="n">t_geq_1</span> <span class="n">hs</span> <span class="n">t_s_coprime</span><span class="o">)</span> <span class="k">with</span> <span class="n">a</span> <span class="n">ha</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">ha</span> <span class="k">with</span> <span class="n">b</span> <span class="n">hab</span><span class="o">,</span>
    <span class="k">let</span> <span class="n">x</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span><span class="o">,</span> <span class="n">n</span><span class="err">^</span><span class="o">((</span><span class="n">a</span><span class="bp">*</span><span class="n">t</span><span class="o">)</span><span class="bp">/</span><span class="n">r</span> <span class="n">i</span><span class="o">),</span>
    <span class="k">let</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">n</span><span class="err">^</span><span class="n">b</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">trivial1</span> <span class="o">:</span> <span class="n">a</span><span class="bp">*</span><span class="n">t</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">t</span><span class="bp">*</span><span class="n">a</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">mul_comm</span><span class="o">],</span>
    <span class="n">fapply</span> <span class="n">exists</span><span class="bp">.</span><span class="n">intro</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">x</span><span class="o">,</span>
    <span class="n">fapply</span> <span class="n">exists</span><span class="bp">.</span><span class="n">intro</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">y</span><span class="o">,</span>
    <span class="n">repeat</span> <span class="o">{</span><span class="n">split</span><span class="o">},</span>
    <span class="o">{</span><span class="n">intro</span> <span class="n">i</span><span class="o">,</span> <span class="n">sorry</span><span class="o">},</span> <span class="c1">-- for all i xi ≥ 1</span>
    <span class="k">calc</span> <span class="n">finset</span><span class="bp">.</span><span class="n">univ</span><span class="bp">.</span><span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="n">n</span><span class="err">^</span><span class="o">((</span><span class="n">a</span><span class="bp">*</span><span class="n">t</span><span class="o">)</span><span class="bp">/</span><span class="n">r</span> <span class="n">i</span><span class="o">))</span><span class="err">^</span><span class="o">(</span><span class="n">r</span> <span class="n">i</span><span class="o">))</span>
    <span class="bp">=</span> <span class="n">finset</span><span class="bp">.</span><span class="n">univ</span><span class="bp">.</span><span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="n">n</span><span class="err">^</span><span class="o">(((</span><span class="n">a</span><span class="bp">*</span><span class="n">t</span><span class="o">)</span><span class="bp">/</span><span class="n">r</span> <span class="n">i</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">r</span> <span class="n">i</span><span class="o">))))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">sorry</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">finset</span><span class="bp">.</span><span class="n">univ</span><span class="bp">.</span><span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">:</span> <span class="n">fin</span> <span class="n">n</span><span class="o">,</span> <span class="n">n</span><span class="err">^</span><span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">t</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">sorry</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">n</span><span class="bp">*</span><span class="o">(</span><span class="n">n</span><span class="err">^</span><span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">t</span><span class="o">))</span> <span class="o">:</span> <span class="n">sum_to_mul</span> <span class="n">n</span> <span class="o">(</span><span class="n">n</span><span class="err">^</span><span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">t</span><span class="o">))</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">n</span><span class="err">^</span><span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">t</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">):</span> <span class="k">by</span> <span class="n">exact</span> <span class="n">mul_comm</span> <span class="n">n</span> <span class="o">(</span><span class="n">n</span><span class="err">^</span><span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">t</span><span class="o">))</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">n</span><span class="err">^</span><span class="o">(</span><span class="n">t</span><span class="bp">*</span><span class="n">a</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">exact</span> <span class="n">congr_arg</span> <span class="o">(</span><span class="n">pow</span> <span class="n">n</span><span class="o">)</span> <span class="n">trivial1</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">n</span><span class="err">^</span><span class="o">(</span><span class="n">s</span><span class="bp">*</span><span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">exact</span> <span class="n">congr_arg</span> <span class="o">(</span><span class="n">pow</span> <span class="n">n</span><span class="o">)</span> <span class="n">hab</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">n</span><span class="err">^</span><span class="o">(</span><span class="n">b</span><span class="bp">*</span><span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">exact</span> <span class="n">congr_arg</span> <span class="o">(</span><span class="n">pow</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">mul_comm</span> <span class="n">s</span> <span class="n">b</span><span class="o">)</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">n</span><span class="err">^</span><span class="n">b</span><span class="o">)</span><span class="err">^</span><span class="n">s</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">pow_mul</span> <span class="n">b</span> <span class="n">s</span> <span class="n">n</span>
<span class="kn">end</span>
</pre></div>



<a name="169038049"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169038049" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrian Chu <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169038049">(Jun 26 2019 at 14:50)</a>:</h4>
<p>this is a record of my (our) progress, i am (we are) getting closer! but for me it's time to rest</p>



<a name="169038421"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169038421" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169038421">(Jun 26 2019 at 14:54)</a>:</h4>
<p>I know Lean doesn't care, but the name is <code>bezout</code> (or even better, Bézout)</p>



<a name="169038517"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169038517" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169038517">(Jun 26 2019 at 14:55)</a>:</h4>
<p>I'm inclined to say <em>baz…</em> (oh, well, never mind…)</p>



<a name="169041288"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169041288" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169041288">(Jun 26 2019 at 15:25)</a>:</h4>
<p>I assumed all along this was an intentional reference to the foo, bar, baz sequence, being a variation on Bézout</p>



<a name="169041398"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169041398" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169041398">(Jun 26 2019 at 15:26)</a>:</h4>
<p>but maybe I was wrong and Adrian wants to also credit <a href="https://en.wikipedia.org/wiki/Claude_Gaspard_Bachet_de_M%C3%A9ziriac" target="_blank" title="https://en.wikipedia.org/wiki/Claude_Gaspard_Bachet_de_M%C3%A9ziriac">Bachet</a></p>



<a name="169070964"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169070964" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169070964">(Jun 26 2019 at 19:14)</a>:</h4>
<p>When using <code>induction t : e</code>, I get a weird inductive hypothesis. For example,</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">n</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="n">induction</span> <span class="n">n_eq</span> <span class="o">:</span> <span class="n">n</span> <span class="k">with</span> <span class="n">m</span> <span class="n">IH</span><span class="o">,</span>
<span class="o">{</span> <span class="n">simp</span> <span class="o">},</span>
<span class="o">{</span> <span class="n">sorry</span> <span class="o">}</span> <span class="c1">-- ill-formed IH here</span>
<span class="kn">end</span>
</pre></div>


<p>will create a goal </p>
<div class="codehilite"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">n</span> <span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">m</span> <span class="bp">≤</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">m</span><span class="o">,</span>
<span class="n">n_eq</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">m</span>
<span class="err">⊢</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">m</span> <span class="bp">≤</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">m</span>
</pre></div>


<p>but clearly, <code>n ≠ m</code> so I cannot use the IH for my proof. Am I doing something wrong? Note: I need <code>n_eq</code> in the theorem I am actually proving, so just dropping <code>n_eq :</code> is not an option.</p>



<a name="169071507"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169071507" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169071507">(Jun 26 2019 at 19:20)</a>:</h4>
<p>What does "I need <code>n_eq</code> in the theorem I am actually proving" mean? What's wrong with just <code>induction n with m IH</code>?</p>



<a name="169071577"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169071577" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169071577">(Jun 26 2019 at 19:21)</a>:</h4>
<p><del>Wrong thread?</del></p>



<a name="169071596"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169071596" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169071596">(Jun 26 2019 at 19:21)</a>:</h4>
<p>(deleted)</p>



<a name="169071709"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169071709" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169071709">(Jun 26 2019 at 19:22)</a>:</h4>
<blockquote>
<p>What does "I need <code>n_eq</code> in the theorem I am actually proving" mean? What's wrong with just <code>induction n with m IH</code>?</p>
</blockquote>
<p>I mean, what hypothesis do you actually want, if it's not what you got?</p>



<a name="169072061"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169072061" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169072061">(Jun 26 2019 at 19:27)</a>:</h4>
<p>But yeah something is weird there. It's as if <code>induction n_eq : n</code> will always cause you trouble.</p>



<a name="169072066"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169072066" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169072066">(Jun 26 2019 at 19:27)</a>:</h4>
<p>That was ill-phrased, let me clarify. I did not want to say that I need <code>n_eq</code>, but rather, I still want to be able to refer to <code>n</code> in both cases. Basically, I want to do some work for both case nat.zero and nat.succ using <code>all_goals</code> and referring to <code>n</code> like this:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">n</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="n">induction</span> <span class="n">n_eq</span> <span class="o">:</span> <span class="n">n</span> <span class="k">with</span> <span class="n">m</span> <span class="n">IH</span><span class="o">,</span>
<span class="n">all_goals</span> <span class="o">{</span>
  <span class="k">have</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">n</span><span class="o">,</span> <span class="k">from</span> <span class="n">n</span><span class="bp">.</span><span class="n">zero_le</span>
<span class="o">},</span>
<span class="o">{</span> <span class="n">simp</span> <span class="o">},</span>
<span class="o">{</span> <span class="n">sorry</span> <span class="o">}</span>
<span class="kn">end</span>
</pre></div>



<a name="169072149"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169072149" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169072149">(Jun 26 2019 at 19:28)</a>:</h4>
<p>But when you do <code>induction n</code>, doesn't <code>n</code> literally disappear from the context?</p>



<a name="169072171"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169072171" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169072171">(Jun 26 2019 at 19:28)</a>:</h4>
<p>Yep, that's what I want to avoid!</p>



<a name="169072187"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169072187" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169072187">(Jun 26 2019 at 19:29)</a>:</h4>
<p>But isn't that how induction works?</p>



<a name="169072221"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169072221" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169072221">(Jun 26 2019 at 19:29)</a>:</h4>
<p>I see what you're trying to do.</p>



<a name="169072236"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169072236" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169072236">(Jun 26 2019 at 19:29)</a>:</h4>
<p>Why don't you just do what you want to do with n before you start on the induction?</p>



<a name="169072432"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169072432" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169072432">(Jun 26 2019 at 19:32)</a>:</h4>
<p>Because then it introduces these statements as premises in my IH as well. Cf:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">n</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="k">have</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">n</span><span class="o">,</span> <span class="k">from</span> <span class="n">n</span><span class="bp">.</span><span class="n">zero_le</span><span class="o">,</span>
<span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">m</span> <span class="n">IH</span><span class="o">,</span>
<span class="o">{</span> <span class="n">simp</span> <span class="o">},</span>
<span class="o">{</span> <span class="n">sorry</span> <span class="o">}</span> <span class="c1">-- check IH here</span>
<span class="kn">end</span>
</pre></div>



<a name="169072485"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169072485" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169072485">(Jun 26 2019 at 19:32)</a>:</h4>
<p>Yes you're right.</p>



<a name="169072656"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169072656" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169072656">(Jun 26 2019 at 19:34)</a>:</h4>
<p>It's just <code>revert</code>ing all hypotheses with an <code>n</code> in before starting the induction.</p>



<a name="169072703"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169072703" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169072703">(Jun 26 2019 at 19:35)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">n</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="k">have</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">n</span><span class="o">,</span> <span class="k">from</span> <span class="n">n</span><span class="bp">.</span><span class="n">zero_le</span><span class="o">,</span>
<span class="n">apply</span> <span class="n">nat</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">n</span><span class="o">,</span>
</pre></div>



<a name="169072715"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169072715" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169072715">(Jun 26 2019 at 19:35)</a>:</h4>
<p>It must just be what the tactic does.</p>



<a name="169072718"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169072718" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169072718">(Jun 26 2019 at 19:35)</a>:</h4>
<p>I think you can use <code>set</code> to rename <code>succ m</code> to <code>n</code> if you like</p>



<a name="169072734"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169072734" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169072734">(Jun 26 2019 at 19:35)</a>:</h4>
<p>You can get round it by just applying the recursor directly like in the above.</p>



<a name="169072825"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169072825" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169072825">(Jun 26 2019 at 19:36)</a>:</h4>
<p>I think you want to prove something like forall t &gt; 0, n \le n * t</p>



<a name="169072836"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169072836" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169072836">(Jun 26 2019 at 19:36)</a>:</h4>
<p>No, my idea doesn't work either.</p>



<a name="169072858"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169072858" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169072858">(Jun 26 2019 at 19:36)</a>:</h4>
<p>And then apply it to n, and prove the case n =0 separately</p>



<a name="169072884"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169072884" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169072884">(Jun 26 2019 at 19:37)</a>:</h4>
<p>Chris the question is how to get <code>induction</code> not to revert facts about n which you want left alone.</p>



<a name="169072918"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169072918" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169072918">(Jun 26 2019 at 19:37)</a>:</h4>
<p><code>clear</code> first</p>



<a name="169072986"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169072986" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169072986">(Jun 26 2019 at 19:38)</a>:</h4>
<p>Oh I guess I didn't really understand what you are trying to do</p>



<a name="169072987"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169072987" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169072987">(Jun 26 2019 at 19:38)</a>:</h4>
<p>The question is how to get from</p>
<div class="codehilite"><pre><span></span>1 goal
n : ℕ,
this : 0 ≤ n
⊢ n ≤ n * n
</pre></div>


<p>to</p>
<div class="codehilite"><pre><span></span>2 goals
case nat.zero
this : 0 ≤ 0
⊢ 0 ≤ 0 * 0

case nat.succ
m : ℕ,
IH : m ≤ m * m,
this : 0 ≤ nat.succ m
⊢ nat.succ m ≤ nat.succ m * nat.succ m
</pre></div>



<a name="169073022"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169073022" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169073022">(Jun 26 2019 at 19:39)</a>:</h4>
<p>i.e. "do cases on <code>this</code> but do induction on the goal"</p>



<a name="169073198"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169073198" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169073198">(Jun 26 2019 at 19:41)</a>:</h4>
<p>In general that's impossible, because if it didn't put the hypothesis at the start you could prove contradictions right. Unless I misunderstand.</p>



<a name="169073203"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169073203" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169073203">(Jun 26 2019 at 19:41)</a>:</h4>
<p><code>induction n with m IH</code> gives</p>
<div class="codehilite"><pre><span></span>case nat.succ
m : ℕ,
IH : 0 ≤ m → m ≤ m * m,
this : 0 ≤ nat.succ m
⊢ nat.succ m ≤ nat.succ m * nat.succ m
</pre></div>


<p>and <code>induction h : n with m IH</code> gives</p>
<div class="codehilite"><pre><span></span>case nat.succ
n : ℕ,
this : 0 ≤ n,
m : ℕ,
IH : n = m → m ≤ m * m,
h : n = nat.succ m
⊢ nat.succ m ≤ nat.succ m * nat.succ m
</pre></div>


<p>In both cases the inductive hypothesis is rendered useless because the assumption is false.</p>



<a name="169073226"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169073226" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169073226">(Jun 26 2019 at 19:41)</a>:</h4>
<p>You might be right that it's impossible.</p>



<a name="169073345"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169073345" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169073345">(Jun 26 2019 at 19:43)</a>:</h4>
<p><span class="user-mention" data-user-id="198376">@Kevin Kappelmann</span> That <code>n</code> really does not exist any more. This is the problem. If you have a statement which is true for all all nats, then don't prove it for <code>n</code>, prove it for all nats before the induction starts and then apply it to whatever you want to apply it to afterwards.</p>



<a name="169073386"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169073386" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169073386">(Jun 26 2019 at 19:43)</a>:</h4>
<p>I think it's misleading to think that the <code>n</code> has "become succ m" in the inductive step. The <code>n</code> is meaningfully attached to both <code>m</code> and <code>succ m</code> here.</p>



<a name="169074089"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169074089" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169074089">(Jun 26 2019 at 19:52)</a>:</h4>
<p>Here's a contradiction I can prove</p>
<div class="codehilite"><pre><span></span><span class="kn">open</span> <span class="n">nat</span>
<span class="kn">lemma</span> <span class="n">rubbish</span> <span class="o">(</span><span class="n">n</span> <span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">hm</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">≠</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="n">m</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">induction</span> <span class="n">n</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">left</span><span class="o">,</span> <span class="n">refl</span> <span class="o">},</span>
  <span class="o">{</span> <span class="c1">-- case nat.succ</span>
    <span class="c1">-- m : ℕ,</span>
    <span class="c1">-- hm : m ≠ 1,</span>
    <span class="c1">-- n_n : ℕ,</span>
    <span class="c1">-- n_ih : n_n = m → n_n = 0 ∨ n_n &gt; m,</span>
    <span class="c1">-- h : succ n_n = m</span>
    <span class="c1">-- ⊢ succ n_n = 0 ∨ succ n_n &gt; m</span>
    <span class="k">have</span> <span class="o">:</span> <span class="n">n_n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">n_n</span> <span class="bp">&gt;</span> <span class="n">m</span><span class="o">,</span> <span class="k">from</span> <span class="n">sorry</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">subst</span> <span class="n">this</span><span class="o">,</span> <span class="n">exfalso</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">hm</span> <span class="n">h</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span> <span class="o">(</span><span class="n">lt_succ_of_lt</span> <span class="n">this</span><span class="o">)</span> <span class="o">}</span>
<span class="kn">end</span>

<span class="kn">example</span> <span class="o">:</span> <span class="n">false</span> <span class="o">:=</span> <span class="n">absurd</span> <span class="o">(</span><span class="n">rubbish</span> <span class="mi">2</span> <span class="mi">2</span><span class="o">)</span> <span class="n">dec_trivial</span>
</pre></div>



<a name="169074364"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169074364" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169074364">(Jun 26 2019 at 19:54)</a>:</h4>
<p>Alright, thanks. Using induction with this pattern <code>induction t : e</code> is pretty useless then, isn't it?</p>



<a name="169074585"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169074585" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169074585">(Jun 26 2019 at 19:57)</a>:</h4>
<p>Maybe for naturals. There are definitely some uses, but I can't think of any right now.</p>



<a name="169074708"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169074708" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169074708">(Jun 26 2019 at 19:58)</a>:</h4>
<p><code>cases t : e</code> is surely useful.</p>



<a name="169074794"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169074794" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169074794">(Jun 26 2019 at 19:59)</a>:</h4>
<p>But when it really is an induction, won't the inductive hypothesis end up contradicting another hypothesis most of the time?</p>



<a name="169074938"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169074938" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169074938">(Jun 26 2019 at 20:00)</a>:</h4>
<p>I think all of the time, given the freely generated nature of inductive types.</p>



<a name="169074961"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169074961" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169074961">(Jun 26 2019 at 20:00)</a>:</h4>
<p>Yeah, I'm just trying to prove <code>list.rec</code> with <code>induction h : l</code> and I don't think it can be done.</p>



<a name="169075005"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169075005" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169075005">(Jun 26 2019 at 20:01)</a>:</h4>
<p>Maybe it would be useful for custom recursors when you do <code>induction ... using ...</code></p>



<a name="169075178"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169075178" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169075178">(Jun 26 2019 at 20:03)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="c1">-- attempt to prove list.rec</span>
<span class="kn">example</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">T</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="n">list</span> <span class="n">T</span> <span class="bp">→</span> <span class="kt">Type</span><span class="o">},</span>
    <span class="n">C</span> <span class="n">list</span><span class="bp">.</span><span class="n">nil</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">Π</span> <span class="o">(</span><span class="n">hd</span> <span class="o">:</span> <span class="n">T</span><span class="o">)</span> <span class="o">(</span><span class="n">tl</span> <span class="o">:</span> <span class="n">list</span> <span class="n">T</span><span class="o">),</span> <span class="n">C</span> <span class="n">tl</span> <span class="bp">→</span> <span class="n">C</span> <span class="o">(</span><span class="n">hd</span> <span class="bp">::</span> <span class="n">tl</span><span class="o">))</span> <span class="bp">→</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">list</span> <span class="n">T</span><span class="o">),</span> <span class="n">C</span> <span class="n">n</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">T</span> <span class="n">C</span> <span class="n">hnil</span> <span class="n">hcons</span> <span class="n">l</span><span class="o">,</span>
  <span class="n">induction</span> <span class="n">h</span> <span class="o">:</span> <span class="n">l</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">hnil</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">hcons</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">ih</span><span class="o">,</span>
  <span class="c1">-- dead</span>
  <span class="n">sorry</span>
<span class="kn">end</span>
</pre></div>



<a name="169075340"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169075340" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169075340">(Jun 26 2019 at 20:05)</a>:</h4>
<p>mathlib has a fair number of uses (<code>git grep '\binduction .*:'</code>) but I didn't check whether they could be replaced by <code>cases</code></p>



<a name="169076380"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169076380" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169076380">(Jun 26 2019 at 20:20)</a>:</h4>
<p>Or just search <code>\binduction .*:</code> in VS Code but switch on the <code>.*</code> option (use regular expression)</p>



<a name="169076591"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169076591" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169076591">(Jun 26 2019 at 20:23)</a>:</h4>
<p>All the ones I checked, could be replaced by <code>cases</code>. There are loads in <code>data/seq</code> and I didn't check any of them.</p>



<a name="169097926"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169097926" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169097926">(Jun 27 2019 at 02:12)</a>:</h4>
<p>Hello,<br>
Upon adding mathlib as a project dependency, searching for definitions with emacs helm errors out due to excessive memory consumption. I don't see any mentions of this in github lean-mode issues. Is this to be expected?<br>
Thanks,<br>
Scott</p>



<a name="169098105"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169098105" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169098105">(Jun 27 2019 at 02:16)</a>:</h4>
<p>Running <code>leanpkg build</code> in your project should help</p>



<a name="169098128"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169098128" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169098128">(Jun 27 2019 at 02:16)</a>:</h4>
<p>That will build whatever parts of mathlib your project currently imports, so that later lean won't have to compile them on the fly</p>



<a name="169098192"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169098192" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169098192">(Jun 27 2019 at 02:17)</a>:</h4>
<p>If you just want to build all of mathlib, I think <code>lean --make _target/deps/mathlib/src</code> should work</p>



<a name="169098366"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169098366" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169098366">(Jun 27 2019 at 02:20)</a>:</h4>
<p>I see -- I tried 'leanpkg build' and and still getting memory issues. I'll try building all of mathlib.</p>



<a name="169098394"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169098394" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169098394">(Jun 27 2019 at 02:21)</a>:</h4>
<p>You might need to restart the lean server after running <code>leanpkg build</code> as well</p>



<a name="169098442"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169098442" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169098442">(Jun 27 2019 at 02:22)</a>:</h4>
<p>My brain isn't in Lean mode so I forget the key</p>



<a name="169098446"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169098446" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169098446">(Jun 27 2019 at 02:22)</a>:</h4>
<p>Oh, that did it</p>



<a name="169098452"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169098452" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169098452">(Jun 27 2019 at 02:22)</a>:</h4>
<p>C-c C-r</p>



<a name="169098466"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169098466" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169098466">(Jun 27 2019 at 02:23)</a>:</h4>
<p>Wonderful, thank you</p>



<a name="169098524"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169098524" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169098524">(Jun 27 2019 at 02:24)</a>:</h4>
<blockquote>
<p>My brain isn't in Lean mode so I forget the key</p>
</blockquote>
<p>If only brains could context switch with a simple M-x ...</p>



<a name="169102918"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169102918" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169102918">(Jun 27 2019 at 04:25)</a>:</h4>
<p>Separate question -- is there a general rule of thumb of when to use the tactic mode for proofs?</p>



<a name="169102927"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169102927" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169102927">(Jun 27 2019 at 04:25)</a>:</h4>
<p>Or is it just a stylistic choice</p>



<a name="169102986"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169102986" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169102986">(Jun 27 2019 at 04:26)</a>:</h4>
<p>when it's easier</p>



<a name="169102990"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169102990" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169102990">(Jun 27 2019 at 04:27)</a>:</h4>
<p>or more compact</p>



<a name="169103001"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169103001" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169103001">(Jun 27 2019 at 04:27)</a>:</h4>
<p>The best approach is to use a combination of both and be comfortable going back and forth</p>



<a name="169103125"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169103125" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169103125">(Jun 27 2019 at 04:30)</a>:</h4>
<p>is going from regular to tactic mode using "by"?</p>



<a name="169103139"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169103139" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169103139">(Jun 27 2019 at 04:31)</a>:</h4>
<p>and is the opposite direction using exact?</p>



<a name="169103190"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169103190" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169103190">(Jun 27 2019 at 04:32)</a>:</h4>
<p>yes</p>



<a name="169103269"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169103269" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169103269">(Jun 27 2019 at 04:34)</a>:</h4>
<p>yes to both directions?</p>



<a name="169103344"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169103344" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169103344">(Jun 27 2019 at 04:36)</a>:</h4>
<p>Also I didn't realize a bit ago that you can use start begin end blocks in the middle of a proof</p>



<a name="169103509"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169103509" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169103509">(Jun 27 2019 at 04:40)</a>:</h4>
<p>I find that for "easy" stuff (i.e. proofs that you know ought to be easy, so you don't actually plan ahead of time what you're doing!), I always start in tactic mode, blunder about for a bit (often letting <code>tidy</code> do some of the work), then end up with a successful tactic script. Now you're only half done, and you convert all the parts of the proof that are more succinct in term mode back into term mode.</p>



<a name="169103636"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169103636" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169103636">(Jun 27 2019 at 04:45)</a>:</h4>
<p>What is tidy?</p>



<a name="169103682"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169103682" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169103682">(Jun 27 2019 at 04:46)</a>:</h4>
<p>I found it</p>



<a name="169103834"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169103834" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169103834">(Jun 27 2019 at 04:51)</a>:</h4>
<p>Is there a preference for more specificity in the proofs? Eg why not leave tidy in the proof</p>



<a name="169104004"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169104004" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169104004">(Jun 27 2019 at 04:56)</a>:</h4>
<p>Is there a Lean analog of crush?</p>



<a name="169104007"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169104007" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169104007">(Jun 27 2019 at 04:56)</a>:</h4>
<p>that's tidy</p>



<a name="169104025"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169104025" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169104025">(Jun 27 2019 at 04:57)</a>:</h4>
<p>You don't want to leave tidy in the proof because it's slow. It's basically a meta-tactic that finds a tactic script that you should use in place of tidy</p>



<a name="169104408"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169104408" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169104408">(Jun 27 2019 at 05:06)</a>:</h4>
<p>makes sense</p>



<a name="169104468"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169104468" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169104468">(Jun 27 2019 at 05:08)</a>:</h4>
<p>It seems that in order to find tidy in emacs definition search I must first import it</p>



<a name="169104525"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169104525" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169104525">(Jun 27 2019 at 05:10)</a>:</h4>
<p>which I guess is fine, I could just grep through my mathlib directory if I'm looking for something</p>



<a name="169104550"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169104550" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169104550">(Jun 27 2019 at 05:11)</a>:</h4>
<p>but is this expected behavior</p>



<a name="169104756"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169104756" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169104756">(Jun 27 2019 at 05:17)</a>:</h4>
<p>yes, this is unfortunate but unavoidable</p>



<a name="169104762"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169104762" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169104762">(Jun 27 2019 at 05:17)</a>:</h4>
<p>You can try importing everything if you want the searches to have good results, but that can take a lot of memory</p>



<a name="169105034"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169105034" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169105034">(Jun 27 2019 at 05:24)</a>:</h4>
<p>ok</p>



<a name="169105368"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169105368" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169105368">(Jun 27 2019 at 05:33)</a>:</h4>
<p>Thanks for the help!</p>



<a name="169108348"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169108348" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169108348">(Jun 27 2019 at 06:47)</a>:</h4>
<p>Where can I find documentation for a tactic such as apply_assumption?</p>



<a name="169108453"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169108453" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169108453">(Jun 27 2019 at 06:49)</a>:</h4>
<p>Not at a computer right now but there's a big file in <code>docs</code> in mathlib which contains information about most tactics. Is it <code>docs/tactics.md</code> or something?</p>



<a name="169108546"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169108546" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169108546">(Jun 27 2019 at 06:51)</a>:</h4>
<p>This is useful for mathlib, thanks</p>



<a name="169108599"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169108599" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169108599">(Jun 27 2019 at 06:52)</a>:</h4>
<p>but apply_assumption is in core.lean</p>



<a name="169108603"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169108603" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169108603">(Jun 27 2019 at 06:52)</a>:</h4>
<p>You can also just type <code>apply_assumption</code> inside a <code>begin ... end</code> block, and hover the mouse over it. The tooltip that pops up should contain the doc-comment, which is usually just a slightly abbreviated version of the documentation in <code>docs/tactics.md</code>.</p>



<a name="169108617"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169108617" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169108617">(Jun 27 2019 at 06:52)</a>:</h4>
<p>Read the definition, then. :-)</p>



<a name="169108635"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169108635" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169108635">(Jun 27 2019 at 06:52)</a>:</h4>
<p>Put your cursor in <code>apply_assumption</code>, and hit F12 to jump to the definition.</p>



<a name="169108651"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169108651" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169108651">(Jun 27 2019 at 06:53)</a>:</h4>
<p>The community branch of Lean would probably accept PRs adding doc comments to any/all of these core tactics! :-)</p>



<a name="169108668"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169108668" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169108668">(Jun 27 2019 at 06:53)</a>:</h4>
<p>(Remember here that core Lean is frozen while development of Lean 4 takes place, so the community branch, which is only just getting off the ground now, is the only place we can improve the documentation of core stuff.)</p>



<a name="169108740"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169108740" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169108740">(Jun 27 2019 at 06:54)</a>:</h4>
<p>I take back what I said -- apply assumption is in mathlib/src/tactic/core.lean</p>



<a name="169108767"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169108767" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169108767">(Jun 27 2019 at 06:55)</a>:</h4>
<p>so why doesn't docs/tactics.md mention it?</p>



<a name="169108828"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169108828" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169108828">(Jun 27 2019 at 06:56)</a>:</h4>
<p>Sorry about the confusing naming. <code>src/tactic/core.lean</code> is really basic tooling stuff (mostly not used interactively). <code>src/tactic/basic.lean</code> is all the most common interactive tactics, and <code>src/tactic/default.lean</code> is the kitchen sink, importing nearly all the mathlib defined tactics.</p>



<a name="169108842"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169108842" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169108842">(Jun 27 2019 at 06:57)</a>:</h4>
<p>Probably because <code>apply_assumption</code> has been around a long time, perhaps predating <code>docs/tactics.md</code>? I'm not sure. Comment PR definitely accepted. :-)</p>



<a name="169108941"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169108941" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169108941">(Jun 27 2019 at 06:59)</a>:</h4>
<p>Where does the tooltip come from?</p>



<a name="169108992"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169108992" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169108992">(Jun 27 2019 at 07:00)</a>:</h4>
<p>Because I do get a short description this way</p>



<a name="169108995"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169108995" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169108995">(Jun 27 2019 at 07:00)</a>:</h4>
<p>The doc-comment.</p>



<a name="169108998"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169108998" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169108998">(Jun 27 2019 at 07:00)</a>:</h4>
<p>When you make a definition, you can put a comment before it</p>



<a name="169109008"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169109008" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169109008">(Jun 27 2019 at 07:00)</a>:</h4>
<p>using the <code>/-- ... -/</code> syntax (note the double hyphen at the open comment)</p>



<a name="169109015"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169109015" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169109015">(Jun 27 2019 at 07:00)</a>:</h4>
<p>But the definition of apply_assumption has no such comment above it</p>



<a name="169109016"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169109016" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169109016">(Jun 27 2019 at 07:00)</a>:</h4>
<p>Hmm.</p>



<a name="169109038"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169109038" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169109038">(Jun 27 2019 at 07:01)</a>:</h4>
<p>Mine does?</p>



<a name="169109040"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169109040" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169109040">(Jun 27 2019 at 07:01)</a>:</h4>
<p>There are two apply_assumption s</p>



<a name="169109046"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169109046" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169109046">(Jun 27 2019 at 07:01)</a>:</h4>
<p>The one in solve_by_elim.lean has the comment</p>



<a name="169109047"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169109047" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169109047">(Jun 27 2019 at 07:01)</a>:</h4>
<p>When I hit F12 on apply_assumption, I was taken to the one in <code>solve_by_elim.lean</code>.</p>



<a name="169109072"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169109072" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169109072">(Jun 27 2019 at 07:02)</a>:</h4>
<p>Ah!</p>



<a name="169109092"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169109092" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169109092">(Jun 27 2019 at 07:02)</a>:</h4>
<p>There are very often two versions of a given tactic.</p>



<a name="169109099"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169109099" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169109099">(Jun 27 2019 at 07:02)</a>:</h4>
<p>One in the <code>tactic.interactive</code> namespace, and one in the <code>tactic</code> namespace.</p>



<a name="169109108"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169109108" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169109108">(Jun 27 2019 at 07:02)</a>:</h4>
<p>Do you often have to be careful which version of a tactic you are importing?</p>



<a name="169109110"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169109110" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169109110">(Jun 27 2019 at 07:02)</a>:</h4>
<p>The interactive one is accessible in <code>begin ... end</code> blocks, and very often does some parsing tricks so you can conveniently control it</p>



<a name="169109118"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169109118" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169109118">(Jun 27 2019 at 07:03)</a>:</h4>
<p>and non-interactive one is usually not intended for use in <code>begin ... end</code> blocks, but instead by other people writing tactics.</p>



<a name="169109121"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169109121" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169109121">(Jun 27 2019 at 07:03)</a>:</h4>
<p>ok</p>



<a name="169109122"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169109122" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169109122">(Jun 27 2019 at 07:03)</a>:</h4>
<p>Unless you know what you're doing, typically always use the interactive version.</p>



<a name="169109300"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169109300" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169109300">(Jun 27 2019 at 07:07)</a>:</h4>
<p>This did solve my original question though -- the documentation is (besides the tactics.md) in the comment above the definition. I just didn't see this because I was looking at the wrong version of the definition</p>



<a name="169109602"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169109602" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169109602">(Jun 27 2019 at 07:13)</a>:</h4>
<p>is leanprover-community/lean much different from the original?</p>



<a name="169109866"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169109866" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169109866">(Jun 27 2019 at 07:18)</a>:</h4>
<p>I don't think so. Simon Hudon is the one to ask.</p>



<a name="169109930"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169109930" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169109930">(Jun 27 2019 at 07:20)</a>:</h4>
<p>ok</p>



<a name="169109962"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169109962" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169109962">(Jun 27 2019 at 07:21)</a>:</h4>
<p>It's not different enough from the original Lean to have ever made me contemplate switching.</p>



<a name="169110798"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169110798" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169110798">(Jun 27 2019 at 07:37)</a>:</h4>
<p>right now it's just accumulating bugfixes and little things</p>



<a name="169110806"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169110806" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169110806">(Jun 27 2019 at 07:37)</a>:</h4>
<p>we'll let you know when it's ready for prime time</p>



<a name="169115569"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169115569" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169115569">(Jun 27 2019 at 08:54)</a>:</h4>
<p><code>helm</code> often gives me the same error. i find it usually works again after <code>C-c C-r</code></p>



<a name="169221322"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169221322" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169221322">(Jun 28 2019 at 12:45)</a>:</h4>
<p>What's the recommended way to use zeta-reduction at a hypothesis? E.g. going from <code>hyp : let n : ℕ := 2 in 1 + 1 = n</code> to <code>hyp : 1 + 1 = 2</code>? I know that <code>delta at hyp</code> works, but isn't this strictly speaking a zeta-reduction I am performing?<br>
edit: fix typo</p>



<a name="169221405"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169221405" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169221405">(Jun 28 2019 at 12:46)</a>:</h4>
<p>These are definitionally equal I guess, so you can just use <code>change</code>.</p>



<a name="169221483"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169221483" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169221483">(Jun 28 2019 at 12:48)</a>:</h4>
<p>yep, sorry for the typo. I do not want to re-state the unfolded hypothesis though.</p>



<a name="169227770"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169227770" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169227770">(Jun 28 2019 at 14:11)</a>:</h4>
<p>Why do additive monoids have scalar multiplication defined in terms of exponentiation? I found this really surprising:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">add_monoid</span><span class="bp">.</span><span class="n">smul</span> <span class="o">[</span><span class="n">add_monoid</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">α</span> <span class="o">:=</span>
<span class="bp">@</span><span class="n">monoid</span><span class="bp">.</span><span class="n">pow</span> <span class="o">(</span><span class="n">multiplicative</span> <span class="n">α</span><span class="o">)</span> <span class="bp">_</span> <span class="n">a</span> <span class="n">n</span>
</pre></div>



<a name="169228296"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169228296" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169228296">(Jun 28 2019 at 14:17)</a>:</h4>
<p><code>multiplicative alpha</code> means "I know it's addition, but pretend it's multiplication". It's some sort of attempt to not duplicate effort.</p>



<a name="169228427"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169228427" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169228427">(Jun 28 2019 at 14:18)</a>:</h4>
<p>a monoid and an additive monoid are the same, but Lean is less good than mathematicans at dealing with things like this. At least in this situation we have some automation to use.</p>



<a name="169228647"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/169228647" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#169228647">(Jun 28 2019 at 14:20)</a>:</h4>
<p>That makes sense, but even when the monoid operation is interpreted as multiplication, is it conventional to call <code>pow</code> scalar multiplication? To me, <code>smul</code> seems to only make sense with vector spaces/modules.</p>



<a name="170529869"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170529869" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170529869">(Jul 10 2019 at 10:33)</a>:</h4>
<p>Does anyone know why the strictness of when names are resolved is kind of flipped between quoted names and expressions (assuming I understand it correctly)? By this I mean that using <code> `my.name</code> the name is not resolved when parsing the tactic, while with <code> ``my.name</code> it is, so more backticks =&gt; resolve sooner. But with expressions, it's the opposite - with <code> `(expr)</code>, symbols are resolved at parse time, with <code> ``(expr)</code> partially so, and with <code> ```(expr)</code> resolving symbols is deferred to tactic runtime. EDIT: fixed backticks, thanks Johan!</p>



<a name="170530201"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170530201" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170530201">(Jul 10 2019 at 10:39)</a>:</h4>
<p>On Zulip formatting: Use <code> more ```backticks ``to `surround ```the code</code> then the number of <code> `adjacent </code> backticks in the code.</p>



<a name="170536732"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170536732" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170536732">(Jul 10 2019 at 12:30)</a>:</h4>
<p>And use the "quote and reply" option to see exactly what Johan did :-)</p>



<a name="170555769"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170555769" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170555769">(Jul 10 2019 at 16:21)</a>:</h4>
<p>Does the syntax</p>
<div class="codehilite"><pre><span></span>theorem perm_sort : forall l, sort l ~ l
| [] := refl
| (a::l) := ...
</pre></div>


<p>not give inductive hypotheses?</p>



<a name="170555863"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170555863" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170555863">(Jul 10 2019 at 16:22)</a>:</h4>
<p>Right now in the second block I have proven<br>
<code>sort l ~ l</code>, and could really use a forall</p>



<a name="170556168"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170556168" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170556168">(Jul 10 2019 at 16:26)</a>:</h4>
<p>use <code>perm_sort l</code> in the second block to access the IH</p>



<a name="170556269"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170556269" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170556269">(Jul 10 2019 at 16:27)</a>:</h4>
<p>oh ok</p>



<a name="170556294"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170556294" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170556294">(Jul 10 2019 at 16:28)</a>:</h4>
<p>Thanks</p>



<a name="170559007"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170559007" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170559007">(Jul 10 2019 at 17:00)</a>:</h4>
<p>How do I specify which instance of a definition rw unfolds?</p>



<a name="170559042"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170559042" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170559042">(Jul 10 2019 at 17:01)</a>:</h4>
<p>suppose I have the goal <code>rev (rev (h :: t)) = h :: t</code></p>



<a name="170559131"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170559131" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170559131">(Jul 10 2019 at 17:02)</a>:</h4>
<p><code>rw rev</code> results in <code>rev_aux (rev (h :: t)) nil = h :: t</code></p>



<a name="170559181"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170559181" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170559181">(Jul 10 2019 at 17:02)</a>:</h4>
<p>But I want rw to act on the inner instance of rev</p>



<a name="170559510"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170559510" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170559510">(Jul 10 2019 at 17:06)</a>:</h4>
<p>I just found change, which seems to do the trick</p>



<a name="170561134"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170561134" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170561134">(Jul 10 2019 at 17:25)</a>:</h4>
<p><code>change</code> will work if the rewrite is definitional, otherwise you can try <code>convert_to</code> which will let you supply the equality proof obligation after</p>
<p><code>conv {}</code> will let you navigate inside an expression and surgically rewrite</p>



<a name="170588333"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170588333" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Huisinga <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170588333">(Jul 10 2019 at 23:16)</a>:</h4>
<p>is there a neat way to only generalize a specific variable?</p>



<a name="170588672"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170588672" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170588672">(Jul 10 2019 at 23:22)</a>:</h4>
<p>Hi, what is the meaning of <code>@@</code>?</p>



<a name="170589627"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170589627" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170589627">(Jul 10 2019 at 23:39)</a>:</h4>
<blockquote>
<p>is there a neat way to only generalize a specific variable?</p>
</blockquote>
<p>Does the dosctring for <code>generalize</code> answer your question?</p>



<a name="170589832"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170589832" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170589832">(Jul 10 2019 at 23:42)</a>:</h4>
<blockquote>
<p>Hi, what is the meaning of <code>@@</code>?</p>
</blockquote>
<p>It's explained <a href="https://leanprover.github.io/theorem_proving_in_lean/interacting_with_lean.html#using-the-library" target="_blank" title="https://leanprover.github.io/theorem_proving_in_lean/interacting_with_lean.html#using-the-library">just above here</a> in TPIL. Searching for @@ didn't work for me but I knew it was in there.</p>



<a name="170589849"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170589849" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Huisinga <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170589849">(Jul 10 2019 at 23:43)</a>:</h4>
<p>i don't think so - i should have been more clear, sorry! i'm looking for a neat way to generalize a specific occurence of a variable, not all of them</p>



<a name="170591589"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170591589" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Huisinga <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170591589">(Jul 11 2019 at 00:17)</a>:</h4>
<p>oh, i guess something along the lines of</p>
<div class="codehilite"><pre><span></span>lemma foo {α : Type*} (P : α → α → Prop) (a : α) : P a a :=
begin
  have h : ∀ b : α, P b a, sorry,
  exact h a
end
</pre></div>


<p>will do</p>



<a name="170591804"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170591804" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170591804">(Jul 11 2019 at 00:20)</a>:</h4>
<p>Is it possible to redefine the "default constructor"? I mean, the one used by <code>⟨⟩</code> notation.</p>



<a name="170592009"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170592009" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Huisinga <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170592009">(Jul 11 2019 at 00:25)</a>:</h4>
<p>afaik you can only use that notation if there is only one constructor</p>



<a name="170594239"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170594239" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170594239">(Jul 11 2019 at 01:18)</a>:</h4>
<p>You can make a second structure with the constructor you like and then define a map to the first structure. If they were classes you could do this with type class inference I guess (on a good day with a following wind)</p>



<a name="170594314"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170594314" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170594314">(Jul 11 2019 at 01:20)</a>:</h4>
<p>You want more than</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">foo</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">P</span> <span class="n">a</span> <span class="n">a</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">suffices</span> <span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">P</span> <span class="n">b</span> <span class="n">a</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">h</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">sorry</span>
<span class="kn">end</span>
</pre></div>


<p>?</p>



<a name="170594353"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170594353" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170594353">(Jul 11 2019 at 01:21)</a>:</h4>
<p>I am struggling a bit to imagine the syntax of what some super-precise <code>generalize</code> tactic would look like but I understand your question now (and don't know the answer)</p>



<a name="170613330"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170613330" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Huisinga <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170613330">(Jul 11 2019 at 08:36)</a>:</h4>
<p>ah, suffices is a neat syntax, i forgot about that one.<br>
it turns out that for my specific use case, simply a precise generalize wouldn't do. i also needed additional assumptions about <code>b</code> (in my use-case, <code>α</code> was <code>list foo</code> and i additionally needed <code>b ⊆ a</code> to prove my lemma).<br>
it probably isn't a good idea to have tactics for use cases this concrete, and "suffices" is certainly readable enough.</p>



<a name="170631545"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170631545" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170631545">(Jul 11 2019 at 13:17)</a>:</h4>
<p>What's the convention for defining stuff on structures that can be both mul-based and add-based, e.g. <code>semigroup</code>/<code>add_semigroup</code>? Should I define it on <code>semigroup</code> and then somehow transport to <code>add_semigroup</code> using <code>additive</code>, the other way around, or something else?</p>



<a name="170631945"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170631945" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170631945">(Jul 11 2019 at 13:22)</a>:</h4>
<p>Define it on semigroup and transfer with <code>to_additive</code>.</p>



<a name="170632152"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170632152" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170632152">(Jul 11 2019 at 13:25)</a>:</h4>
<p>Thanks Chris!</p>



<a name="170636720"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170636720" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170636720">(Jul 11 2019 at 14:15)</a>:</h4>
<p>See <code>group_theory/quotient_group.lean</code> for an example of how this looks.</p>



<a name="170791958"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170791958" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170791958">(Jul 13 2019 at 14:29)</a>:</h4>
<p>Can the equational lemmas for a function do something more than definitional/beta-reduction? I have a goal of the form (simplified) <code>fn1 (fn2 some_expr) = fn1 (fn2 other_expr)</code>, s.t. <code>fn1 \comp fn2</code> takes both <code>expr</code>s to the same value (and the <code>expr</code>s contain some more calls to <code>fn1/2</code>). So, this should follow from <code>refl</code>, but it doesn't. If however I do <code>repeat { rw [fn1] }, repeat { rw [fn2] }</code> first, <code>refl</code> works.</p>



<a name="170793953"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170793953" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170793953">(Jul 13 2019 at 15:26)</a>:</h4>
<p>A related question - is there a tactic equivalent of <code>#reduce</code>?</p>



<a name="170796103"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170796103" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170796103">(Jul 13 2019 at 16:23)</a>:</h4>
<p>The equation lemmas for a function are not always definitionally true</p>



<a name="170796153"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170796153" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170796153">(Jul 13 2019 at 16:24)</a>:</h4>
<p>They're simp lemmas though so <code>simp</code> might work</p>



<a name="170798201"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170798201" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170798201">(Jul 13 2019 at 17:23)</a>:</h4>
<p>Huh okay, that is kind of surprising - I thought they were all <code>refl</code>.  Thanks!</p>



<a name="170801612"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170801612" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170801612">(Jul 13 2019 at 19:06)</a>:</h4>
<p>The main time when they are not <code>rfl</code> is when well founded recursion is used. This has to do with why definitional equality is undecidable and lean's defeq is an underapproximation of the real thing</p>



<a name="170802186"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170802186" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170802186">(Jul 13 2019 at 19:23)</a>:</h4>
<p>Oooh yeah it is recursive - it's transitivity that's missing, right? It seemed to me like it should still reduce but is what you're saying that the <code>has_well_founded</code>s prevent it from reducing?</p>



<a name="170802295"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170802295" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170802295">(Jul 13 2019 at 19:26)</a>:</h4>
<p>I came across this while trying to write some reflection tactics a la <code>ring2</code>, where in <code>correctness</code> you have <code>(H : horner_expr.of_csexpr r₁ = horner_expr.of_csexpr r₂)</code> by <code>rfl</code>. <code>of_csexpr</code> is defined recursively but it seems to reduce just fine, however I have something more like <code>(of_csexpr r1).eval = (of_csexpr r2).eval</code>, where <code>eval</code> is also recursive and this breaks (needs <code>simp; refl</code>).</p>



<a name="170802304"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170802304" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170802304">(Jul 13 2019 at 19:26)</a>:</h4>
<p>I can get rid of the <code>eval</code>s so this isn't really a problem, just confusing.</p>



<a name="170802428"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170802428" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170802428">(Jul 13 2019 at 19:30)</a>:</h4>
<p>Structural recursion is fine, it's just when you use well founded recursion, i.e. recursion on <code>acc</code> that it gets flaky</p>



<a name="170802625"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170802625" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170802625">(Jul 13 2019 at 19:37)</a>:</h4>
<p>I see, I'm doing some reassociation which I think has to rely on <code>sizeof</code>:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">reassoc</span><span class="o">:</span> <span class="n">Expr</span> <span class="bp">-&gt;</span> <span class="n">Expr</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">Mul</span> <span class="o">(</span><span class="n">Mul</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span> <span class="n">Mul</span> <span class="o">(</span><span class="n">reassoc</span> <span class="n">a</span><span class="o">)</span> <span class="err">$</span> <span class="n">reassoc</span> <span class="o">(</span><span class="n">Mul</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">e</span> <span class="o">:=</span> <span class="n">e</span>
</pre></div>



<a name="170802986"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170802986" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170802986">(Jul 13 2019 at 19:49)</a>:</h4>
<p>Right, that's not a structural recursion, but you can rewrite it to be one</p>



<a name="170803351"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/170803351" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#170803351">(Jul 13 2019 at 20:00)</a>:</h4>
<p>Yup, <code>refl</code>s now, thanks!</p>



<a name="171300969"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/171300969" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#171300969">(Jul 19 2019 at 23:32)</a>:</h4>
<p>Is this assumption correct: "after compiling <code>somefile.lean</code> with <code>lean --make</code>, forall theorems in <code>somefile</code>, the resulting <code>somefile.olean</code> contains the theorems' names and types, but because they are in <code>Prop</code> and have already been typechecked, the proof terms are discarded and Lean trusts previously built modules to have correctly-typechecked definitions"?</p>



<a name="171301875"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/171301875" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#171301875">(Jul 19 2019 at 23:54)</a>:</h4>
<p>Okay, it's partly correct and partly not. Lean keeps the proof terms (i.e. the "values" of <code>theorem</code> definitions) in <code>.olean</code> files, but they're stored with a high "trust level" value, and I <em>think</em> that when a such a high-trust definition is imported, its value is <a href="https://github.com/leanprover-community/lean/blob/master/src/kernel/inductive/inductive.h#L93" target="_blank" title="https://github.com/leanprover-community/lean/blob/master/src/kernel/inductive/inductive.h#L93">not typechecked again</a> and the type is trusted.</p>



<a name="171354736"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/171354736" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#171354736">(Jul 21 2019 at 04:08)</a>:</h4>
<p>From <code>lean --help</code>:</p>
<div class="codehilite"><pre><span></span>  --trust=num -t     trust level (default: max) 0 means do not trust any macro,
                     and type check all imported modules
</pre></div>



<a name="171354746"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/171354746" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#171354746">(Jul 21 2019 at 04:09)</a>:</h4>
<p>I think, by default Lean trusts that all <code>import</code>ed <code>.olean</code> files are correct but you can tell it to double-check them.</p>



<a name="171445739"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/171445739" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lennard Henze <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#171445739">(Jul 22 2019 at 16:32)</a>:</h4>
<p>Trying one of the excercises I am stuck with deriving A \or \not A:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">A</span> <span class="bp">↔</span> <span class="bp">¬</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">have</span> <span class="n">h₂</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">∨</span> <span class="bp">¬</span> <span class="n">A</span><span class="o">,</span> <span class="k">from</span> <span class="n">sorry</span><span class="o">,</span>
<span class="k">assume</span> <span class="n">h₁</span> <span class="o">:</span> <span class="o">(</span><span class="n">A</span> <span class="bp">↔</span> <span class="bp">¬</span> <span class="n">A</span><span class="o">),</span>
<span class="k">show</span> <span class="n">false</span><span class="o">,</span> <span class="k">from</span> <span class="n">or</span><span class="bp">.</span><span class="n">elim</span> <span class="n">h₂</span>
        <span class="o">(</span><span class="k">assume</span> <span class="o">:</span> <span class="n">A</span><span class="o">,</span>
           <span class="k">have</span> <span class="n">h₃</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">A</span><span class="o">,</span> <span class="k">from</span> <span class="n">iff</span><span class="bp">.</span><span class="n">mp</span> <span class="n">h₁</span> <span class="n">this</span><span class="o">,</span>
            <span class="k">show</span> <span class="n">false</span><span class="o">,</span> <span class="k">from</span> <span class="n">h₃</span> <span class="n">this</span><span class="o">)</span>
        <span class="o">(</span><span class="k">assume</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">A</span><span class="o">,</span>
            <span class="k">have</span> <span class="n">h₃</span> <span class="o">:</span> <span class="n">A</span><span class="o">,</span> <span class="k">from</span> <span class="n">iff</span><span class="bp">.</span><span class="n">mpr</span> <span class="n">h₁</span> <span class="n">this</span><span class="o">,</span>
            <span class="k">show</span> <span class="n">false</span><span class="o">,</span> <span class="k">from</span> <span class="n">this</span> <span class="n">h₃</span><span class="o">)</span>
</pre></div>


<p>Can someone point me in the right direction?</p>



<a name="171446160"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/171446160" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#171446160">(Jul 22 2019 at 16:38)</a>:</h4>
<p>This is just the law of the excluded middle, which is not true in constructive logic</p>



<a name="171446179"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/171446179" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#171446179">(Jul 22 2019 at 16:38)</a>:</h4>
<p>Are you allowed to use classical logic?</p>



<a name="171446189"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/171446189" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#171446189">(Jul 22 2019 at 16:38)</a>:</h4>
<p>(See also <a href="https://leanprover.github.io/theorem_proving_in_lean/axioms_and_computation.html#the-law-of-the-excluded-middle" target="_blank" title="https://leanprover.github.io/theorem_proving_in_lean/axioms_and_computation.html#the-law-of-the-excluded-middle">TPIL 11.6</a>)</p>



<a name="171446223"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/171446223" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#171446223">(Jul 22 2019 at 16:39)</a>:</h4>
<p>It can be done constructively I believe (but don't trust me, I am a classical guy)</p>



<a name="171446301"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/171446301" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#171446301">(Jul 22 2019 at 16:40)</a>:</h4>
<p>It's something like <code>classical.em</code>, what you want</p>



<a name="171446380"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/171446380" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lennard Henze <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#171446380">(Jul 22 2019 at 16:41)</a>:</h4>
<p>its just a task from <a href="https://leanprover.github.io/logic_and_proof/propositional_logic_in_lean.html" target="_blank" title="https://leanprover.github.io/logic_and_proof/propositional_logic_in_lean.html">https://leanprover.github.io/logic_and_proof/propositional_logic_in_lean.html</a>, i have not read anything about classical logic being forbidden</p>



<a name="171446438"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/171446438" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#171446438">(Jul 22 2019 at 16:42)</a>:</h4>
<p>lol</p>



<a name="171446510"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/171446510" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lennard Henze <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#171446510">(Jul 22 2019 at 16:43)</a>:</h4>
<p>i think it is meant to be done without imports</p>



<a name="171447029"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/171447029" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#171447029">(Jul 22 2019 at 16:49)</a>:</h4>
<p>Here is a constructive proof, adapted from <code>iff_not_self</code>:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">A</span> <span class="bp">↔</span> <span class="bp">¬</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">assume</span> <span class="n">h</span><span class="o">:</span> <span class="n">A</span> <span class="bp">↔</span> <span class="bp">¬</span> <span class="n">A</span><span class="o">,</span>
<span class="k">have</span> <span class="n">hna</span><span class="o">:</span> <span class="bp">¬</span><span class="n">A</span><span class="o">,</span> <span class="k">from</span> <span class="o">(</span>
  <span class="k">assume</span> <span class="n">ha</span><span class="o">:</span> <span class="n">A</span><span class="o">,</span>
  <span class="k">show</span> <span class="n">false</span><span class="o">,</span> <span class="k">from</span> <span class="o">(</span><span class="n">h</span><span class="bp">.</span><span class="n">mp</span> <span class="n">ha</span><span class="o">)</span> <span class="n">ha</span><span class="o">),</span>
<span class="k">show</span> <span class="n">false</span><span class="o">,</span> <span class="k">from</span> <span class="n">hna</span> <span class="o">(</span><span class="n">h</span><span class="bp">.</span><span class="n">mpr</span> <span class="n">hna</span><span class="o">)</span>
</pre></div>



<a name="171447327"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/171447327" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lennard Henze <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#171447327">(Jul 22 2019 at 16:53)</a>:</h4>
<p>nice thanks!!</p>



<a name="172516901"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172516901" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172516901">(Aug 05 2019 at 16:19)</a>:</h4>
<p>Is there an escape sequence for producing french quotes in the web editor / VS Code? More generally, is there a comprehensive list of escape sequences? Ta.</p>



<a name="172516943"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172516943" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172516943">(Aug 05 2019 at 16:19)</a>:</h4>
<p>Hey Gihan!</p>



<a name="172516955"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172516955" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172516955">(Aug 05 2019 at 16:19)</a>:</h4>
<p>It's in some translations.json file somewhere, hang on...</p>



<a name="172517073"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172517073" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172517073">(Aug 05 2019 at 16:20)</a>:</h4>
<p><a href="https://github.com/leanprover/vscode-lean/blob/master/translations.json" target="_blank" title="https://github.com/leanprover/vscode-lean/blob/master/translations.json">https://github.com/leanprover/vscode-lean/blob/master/translations.json</a></p>



<a name="172517113"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172517113" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172517113">(Aug 05 2019 at 16:21)</a>:</h4>
<p>Thanks very much Kevin!</p>
<p>I see you're teaching M1F to a virtual tutee. Have you had success teaching Lean to corporeal M1F students?</p>



<a name="172517185"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172517185" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172517185">(Aug 05 2019 at 16:22)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> and <span class="user-mention" data-user-id="110044">@Chris Hughes</span> are both Imperial undergraduates who have contributed far more than me to Lean's maths library.</p>



<a name="172517252"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172517252" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172517252">(Aug 05 2019 at 16:23)</a>:</h4>
<p><code>\f&lt;</code> and <code>\f&gt;</code> apparently</p>



<a name="172517261"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172517261" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172517261">(Aug 05 2019 at 16:23)</a>:</h4>
<p>I don't usually use them</p>



<a name="172517315"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172517315" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172517315">(Aug 05 2019 at 16:24)</a>:</h4>
<p>Amazing! I'm tempted to try this at Exeter, but I'm worried that formal proof may put off the bulk of students.</p>



<a name="172517402"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172517402" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172517402">(Aug 05 2019 at 16:25)</a>:</h4>
<p>I have a lot of tips. If you do it naively then definitely you can put a lot of people off. One initial tip is not to teach people new maths and Lean at the same time.</p>



<a name="172517410"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172517410" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172517410">(Aug 05 2019 at 16:25)</a>:</h4>
<p>by "people" I mean "UG mathematicians"</p>



<a name="172517475"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172517475" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172517475">(Aug 05 2019 at 16:26)</a>:</h4>
<p>so if it's your job to teach them new maths then it can get quite tricky finding the balance.</p>



<a name="172517542"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172517542" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172517542">(Aug 05 2019 at 16:27)</a>:</h4>
<p>I'm speaking in Exeter at the end of Nov, we can maybe talk then. Unfortunately I'm giving the number theory seminar rather than a general colloquium.</p>



<a name="172517890"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172517890" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172517890">(Aug 05 2019 at 16:32)</a>:</h4>
<p>OK, that would be great. I look forward to it.</p>
<p>My main issue really is how to teach proof tout court. Most written arguments I see from new students are full of non sequiturs. I thought Lean might be a way for students to determine whether their arguments were valid.</p>



<a name="172517919"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172517919" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172517919">(Aug 05 2019 at 16:32)</a>:</h4>
<p>This was one of the reasons I got interested in Lean too.</p>



<a name="172517949"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172517949" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172517949">(Aug 05 2019 at 16:33)</a>:</h4>
<p>I'm sure this sort of software has got a lot of potential to change the way undergraduate mathematics is taught.</p>



<a name="172517975"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172517975" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172517975">(Aug 05 2019 at 16:33)</a>:</h4>
<p>But I'm still very much experimenting with how to do it. Patrick Massot also tried</p>



<a name="172518027"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172518027" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172518027">(Aug 05 2019 at 16:34)</a>:</h4>
<p>using Lean with a bunch of UGs at Orsay in their introduction to proof course</p>



<a name="172518197"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172518197" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172518197">(Aug 05 2019 at 16:36)</a>:</h4>
<p>Thanks. I've also seen Jeremy Avigad's 'Logic and Proof' notes.</p>



<a name="172518228"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172518228" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172518228">(Aug 05 2019 at 16:37)</a>:</h4>
<p>Yeah, we're all trying to change the world.</p>



<a name="172518255"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172518255" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172518255">(Aug 05 2019 at 16:37)</a>:</h4>
<p>An education specialist is writing a paper about my intervention, should be ready next month apparently.</p>



<a name="172518317"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172518317" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172518317">(Aug 05 2019 at 16:38)</a>:</h4>
<p>She interviewed lots of M1F students</p>



<a name="172518479"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172518479" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172518479">(Aug 05 2019 at 16:40)</a>:</h4>
<p>I'd be interested in reading the article. Where will it be published?</p>



<a name="172518511"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172518511" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172518511">(Aug 05 2019 at 16:40)</a>:</h4>
<p>Don't know, I guess they will have some education journal ecosystem but I don't know anything about it.</p>



<a name="172518666"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172518666" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172518666">(Aug 05 2019 at 16:43)</a>:</h4>
<p>Well, maybe I'll find out in November. See you then and thanks for the information.</p>



<a name="172532018"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172532018" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172532018">(Aug 05 2019 at 19:44)</a>:</h4>
<p><span class="user-mention" data-user-id="233737">@Gihan Marasingha</span>: If you see a character in VSCode, and you are wondering how to input it, you can also hover your mouse over the character, and in a pop-up it will tell you how to type it.</p>



<a name="172541913"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/172541913" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#172541913">(Aug 05 2019 at 21:56)</a>:</h4>
<p>Thanks!</p>



<a name="173242232"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/173242232" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#173242232">(Aug 14 2019 at 21:02)</a>:</h4>
<p>Question related to proof irrelevance: I was wondering what Lean is doing in this example:</p>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">test</span> <span class="o">:=</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">pos</span><span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">n</span><span class="o">)</span>

<span class="kn">example</span> <span class="o">{</span><span class="n">t1</span> <span class="n">t2</span> <span class="o">:</span> <span class="n">test</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">t1</span><span class="bp">.</span><span class="n">n</span> <span class="bp">=</span> <span class="n">t2</span><span class="bp">.</span><span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">t1</span> <span class="bp">=</span> <span class="n">t2</span>  <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">cases</span> <span class="n">t1</span> <span class="k">with</span> <span class="n">n1</span> <span class="n">pos1</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">t2</span> <span class="k">with</span> <span class="n">n2</span> <span class="n">pos2</span><span class="o">,</span> <span class="c1">-- current goal : {n := n1, pos := pos1} = {n := n2, pos := pos2}</span>
  <span class="n">suffices</span> <span class="o">:</span> <span class="n">n1</span> <span class="bp">=</span> <span class="n">n2</span><span class="o">,</span> <span class="k">by</span> <span class="n">simpa</span> <span class="n">only</span> <span class="o">[],</span> <span class="c1">-- current goal : n1 = n2, but why?</span>
  <span class="n">exact</span> <span class="n">h</span>
<span class="kn">end</span>
</pre></div>


<p>Is simp matching the parts of the structure that live in Prop and decides that we need <code>n1 = n2</code>? How is it deciding that? Just by unification? (PS. I know that Lean auto-generates <code>test.mk.inj_eq</code>)</p>



<a name="173244750"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/173244750" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#173244750">(Aug 14 2019 at 21:37)</a>:</h4>
<p>Yeah, probably these <code>mk.inj_eq</code> lemmas are hard-coded to be simp lemmas, even when doing <code>simp only</code>.</p>



<a name="173245868"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/173245868" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#173245868">(Aug 14 2019 at 21:53)</a>:</h4>
<p>The simp option <code>constructor_eq := ff</code> disables this behavior.</p>



<a name="174794053"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/174794053" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#174794053">(Sep 03 2019 at 14:32)</a>:</h4>
<p>Given a function <code>f</code> taking arguments from a set <code>S : set ℕ</code>, a number <code>n : ℕ</code>, and the knowledge that <code>n ∈ S</code>, how can I apply <code>f</code> on <code>n</code>, that is, how do I make this work:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">example</span> <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">S</span> <span class="bp">→</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">hyp</span> <span class="o">:</span> <span class="n">n</span> <span class="err">∈</span> <span class="n">S</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="n">f</span> <span class="n">n</span> <span class="c1">-- type mismatch</span>
</pre></div>



<a name="174794427"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/174794427" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#174794427">(Sep 03 2019 at 14:36)</a>:</h4>
<p><code>f ⟨n, hyp⟩</code></p>



<a name="174794552"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/174794552" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#174794552">(Sep 03 2019 at 14:37)</a>:</h4>
<p>Ahh, right! Thanks - you're the best!</p>



<a name="174794976"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/174794976" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#174794976">(Sep 03 2019 at 14:42)</a>:</h4>
<p>Maybe the piece you missed is that Lean can make sense of <code>(f : S → ℕ)</code> only because it inserts a coercion of <code>S</code> to the subtype <code>{n : ℕ // n ∈ S}</code></p>



<a name="174796117"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/174796117" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Kappelmann <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#174796117">(Sep 03 2019 at 14:53)</a>:</h4>
<blockquote>
<p>Maybe the piece you missed is that Lean can make sense of <code>(f : S → ℕ)</code> only because it inserts a coercion of <code>S</code> to the subtype <code>{n : ℕ // n ∈ S}</code></p>
</blockquote>
<p>That was indeed the case :)</p>



<a name="175177305"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/175177305" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#175177305">(Sep 08 2019 at 09:17)</a>:</h4>
<p>I tried proving a very simple result, the formula <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>6</mn><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></msubsup><msup><mi>i</mi><mn>2</mn></msup><mo>=</mo><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mn>2</mn><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">6\sum_{i=0}^n i^2 = n(n+1)(2n+1)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.113818em;vertical-align:-0.29971000000000003em;"></span><span class="mord">6</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.804292em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord">2</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>. My Lean proof, using equational reasoning, is much longer than I anticipated (30 lines). Could someone suggest a way to shorten the proof?</p>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">ssquares_formula</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="mi">6</span><span class="bp">*</span><span class="o">(</span><span class="n">ssquares</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="n">n</span><span class="bp">*</span><span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">nat</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">n</span>
<span class="n">rfl</span> <span class="c1">-- trivial base case</span>
<span class="o">(</span>
<span class="k">assume</span> <span class="n">k</span><span class="o">,</span>
<span class="k">assume</span> <span class="n">h</span> <span class="o">:</span>  <span class="mi">6</span><span class="bp">*</span><span class="o">(</span><span class="n">ssquares</span> <span class="n">k</span><span class="o">)</span> <span class="bp">=</span> <span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">),</span>
<span class="k">show</span> <span class="mi">6</span><span class="bp">*</span><span class="o">(</span><span class="n">ssquares</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">((</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">+</span><span class="mi">1</span><span class="o">),</span> <span class="k">from</span>
<span class="k">calc</span>
<span class="mi">6</span><span class="bp">*</span><span class="o">(</span><span class="n">ssquares</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="bp">=</span> <span class="mi">6</span><span class="bp">*</span><span class="o">((</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">ssquares</span> <span class="n">k</span><span class="o">))</span> <span class="o">:</span> <span class="n">rfl</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="mi">6</span><span class="bp">*</span><span class="o">((</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">left_distrib</span><span class="o">,</span> <span class="n">h</span><span class="o">]</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="mi">6</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="err">←</span><span class="n">mul_assoc</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="mi">6</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_comm</span> <span class="mi">6</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="mi">6</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_comm</span> <span class="n">k</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">6</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_assoc</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">]</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">6</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">+</span><span class="o">(</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="err">←</span><span class="n">left_distrib</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">6</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">6</span><span class="bp">+</span><span class="o">(</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">left_distrib</span> <span class="mi">6</span> <span class="n">k</span> <span class="mi">1</span><span class="o">,</span> <span class="n">mul_one</span><span class="o">]</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">6</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">6</span><span class="bp">+</span><span class="o">(</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="n">k</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">left_distrib</span> <span class="n">k</span> <span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span> <span class="mi">1</span><span class="o">,</span> <span class="n">mul_one</span><span class="o">]</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">((</span><span class="mi">3</span><span class="bp">+</span><span class="mi">3</span><span class="o">)</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">6</span><span class="bp">+</span><span class="o">(</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="n">k</span><span class="o">))</span> <span class="o">:</span> <span class="n">rfl</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">6</span><span class="bp">+</span><span class="o">(</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="n">k</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">right_distrib</span> <span class="mi">3</span> <span class="mi">3</span> <span class="n">k</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="o">(</span><span class="mi">6</span><span class="bp">+</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">))</span><span class="bp">+</span><span class="n">k</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span><span class="n">add_assoc</span><span class="o">,</span><span class="err">←</span><span class="n">add_assoc</span><span class="o">]</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="o">(</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="mi">6</span><span class="o">)</span><span class="bp">+</span><span class="n">k</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">add_comm</span> <span class="mi">6</span> <span class="o">(</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">))</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="o">(</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">))</span><span class="bp">+</span><span class="mi">6</span><span class="bp">+</span><span class="n">k</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span><span class="n">add_assoc</span><span class="o">,</span><span class="err">←</span><span class="n">add_assoc</span><span class="o">]</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="o">(</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="mi">6</span><span class="bp">+</span><span class="n">k</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">add_comm</span> <span class="o">(</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span> <span class="o">(</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">))</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">((</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">))</span><span class="bp">+</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">6</span><span class="bp">+</span><span class="n">k</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span><span class="n">add_assoc</span><span class="o">,</span><span class="n">add_assoc</span><span class="o">]</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">((</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">6</span><span class="bp">+</span><span class="n">k</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">add_comm</span> <span class="o">(</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span> <span class="o">(</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">))</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="o">(</span><span class="mi">6</span><span class="bp">+</span><span class="n">k</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">add_assoc</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">6</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">add_comm</span> <span class="mi">6</span> <span class="n">k</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="o">(</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="mi">6</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span><span class="n">add_assoc</span><span class="o">,</span><span class="err">←</span><span class="n">add_assoc</span><span class="o">]</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="o">(</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="n">k</span><span class="bp">*</span><span class="mi">1</span><span class="o">)</span><span class="bp">+</span><span class="mi">6</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_one</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="o">(</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="mi">6</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_comm</span> <span class="n">k</span> <span class="mi">1</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="o">((</span><span class="mi">3</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="mi">6</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">right_distrib</span> <span class="mi">3</span> <span class="mi">1</span> <span class="n">k</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="o">((</span><span class="mi">2</span><span class="bp">*</span><span class="mi">2</span><span class="o">)</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="mi">6</span><span class="o">)</span> <span class="o">:</span> <span class="n">rfl</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">))</span><span class="bp">+</span><span class="mi">6</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_assoc</span> <span class="mi">2</span> <span class="mi">2</span> <span class="n">k</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="mi">3</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="mi">2</span><span class="bp">*</span><span class="mi">3</span><span class="o">))</span> <span class="o">:</span> <span class="n">rfl</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="n">k</span><span class="bp">*</span><span class="mi">3</span><span class="bp">+</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="mi">2</span><span class="bp">*</span><span class="mi">3</span><span class="o">))</span>  <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_comm</span> <span class="mi">3</span> <span class="n">k</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="n">k</span><span class="bp">*</span><span class="mi">3</span><span class="bp">+</span><span class="mi">2</span><span class="bp">*</span><span class="o">((</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span><span class="bp">+</span><span class="mi">3</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="err">←</span><span class="n">left_distrib</span> <span class="mi">2</span> <span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span> <span class="mi">3</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">3</span><span class="o">)</span><span class="bp">+</span><span class="mi">2</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">3</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">left_distrib</span> <span class="n">k</span> <span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">)</span> <span class="mi">3</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">((</span><span class="n">k</span><span class="bp">+</span><span class="mi">2</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">3</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="err">←</span><span class="n">right_distrib</span> <span class="n">k</span> <span class="mi">2</span> <span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">3</span><span class="o">)</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">((</span><span class="n">k</span><span class="bp">+</span><span class="mi">2</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">2</span><span class="bp">*</span><span class="mi">1</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="o">:</span> <span class="n">rfl</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">((</span><span class="n">k</span><span class="bp">+</span><span class="mi">2</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="err">←</span><span class="n">left_distrib</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">2</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_assoc</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">((</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">rfl</span>
<span class="o">)</span>
</pre></div>



<a name="175177408"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/175177408" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keeley Hoek <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#175177408">(Sep 08 2019 at 09:20)</a>:</h4>
<p>What is your definition of <code>ssquares</code>?</p>



<a name="175177420"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/175177420" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#175177420">(Sep 08 2019 at 09:21)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">ssquares</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span>
<span class="bp">|</span> <span class="mi">0</span>     <span class="o">:=</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">ssquares</span> <span class="n">n</span><span class="o">)</span>
</pre></div>



<a name="175177487"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/175177487" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keeley Hoek <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#175177487">(Sep 08 2019 at 09:23)</a>:</h4>
<p>Let me introduce you to the <code>ring</code> tactic of <code>mathlib</code>:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">tactic</span>

<span class="n">def</span> <span class="n">ssquares</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span>
<span class="bp">|</span> <span class="mi">0</span>     <span class="o">:=</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">ssquares</span> <span class="n">n</span><span class="o">)</span>

<span class="kn">theorem</span> <span class="n">ssquares_formula</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="mi">6</span><span class="bp">*</span><span class="o">(</span><span class="n">ssquares</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="n">n</span><span class="bp">*</span><span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">nat</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">n</span>
<span class="n">rfl</span> <span class="c1">-- trivial base case</span>
<span class="err">$</span>
<span class="k">assume</span> <span class="n">k</span><span class="o">,</span>
<span class="k">assume</span> <span class="n">h</span> <span class="o">:</span>  <span class="mi">6</span><span class="bp">*</span><span class="o">(</span><span class="n">ssquares</span> <span class="n">k</span><span class="o">)</span> <span class="bp">=</span> <span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">),</span>
<span class="k">show</span> <span class="mi">6</span><span class="bp">*</span><span class="o">(</span><span class="n">ssquares</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">((</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">+</span><span class="mi">1</span><span class="o">),</span> <span class="k">from</span>
<span class="k">calc</span>
<span class="mi">6</span><span class="bp">*</span><span class="o">(</span><span class="n">ssquares</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="bp">=</span> <span class="mi">6</span><span class="bp">*</span><span class="o">((</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">ssquares</span> <span class="n">k</span><span class="o">))</span> <span class="o">:</span> <span class="n">rfl</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="mi">6</span><span class="bp">*</span><span class="o">((</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">left_distrib</span><span class="o">,</span> <span class="n">h</span><span class="o">]</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">((</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">ring</span>
</pre></div>



<a name="175177531"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/175177531" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keeley Hoek <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#175177531">(Sep 08 2019 at 09:24)</a>:</h4>
<p>But really, <code>mathlib</code> has machinery for doing finite sums already, without starting from the beginning e.g. with your definition of <code>ssquares</code>. A place to start to look is in <code>data.finset</code>, for <code>finset.sum</code>.</p>



<a name="175177544"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/175177544" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#175177544">(Sep 08 2019 at 09:25)</a>:</h4>
<p><span class="user-mention" data-user-id="110111">@Keeley Hoek</span> thanks so much.</p>



<a name="175177813"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/175177813" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keeley Hoek <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#175177813">(Sep 08 2019 at 09:34)</a>:</h4>
<p><span class="user-mention" data-user-id="233737">@Gihan Marasingha</span> , here is also a way it could be done in tactic mode</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">tactic</span>

<span class="n">def</span> <span class="n">ssquares</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span>
<span class="bp">|</span> <span class="mi">0</span>     <span class="o">:=</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">ssquares</span> <span class="n">n</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>

<span class="kn">theorem</span> <span class="n">ssquares_formula</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="mi">6</span> <span class="bp">*</span> <span class="o">(</span><span class="n">ssquares</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">k</span> <span class="n">h</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">refl</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">dsimp</span> <span class="o">[</span><span class="n">ssquares</span><span class="o">],</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">left_distrib</span><span class="o">,</span> <span class="n">h</span><span class="o">],</span>
    <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">k</span> <span class="bp">=</span> <span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span> <span class="k">from</span> <span class="n">rfl</span><span class="o">),</span> <span class="c1">-- It is sad that this line is needed</span>
    <span class="n">ring</span><span class="o">,</span> <span class="o">}</span>
<span class="kn">end</span>
</pre></div>



<a name="175177814"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/175177814" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keeley Hoek <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#175177814">(Sep 08 2019 at 09:34)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span>, why is the commented line needed there? Is this a bug?</p>



<a name="175177865"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/175177865" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#175177865">(Sep 08 2019 at 09:37)</a>:</h4>
<p>Ring doesn't know about succ</p>



<a name="175177870"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/175177870" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keeley Hoek <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#175177870">(Sep 08 2019 at 09:37)</a>:</h4>
<p>How do we make it</p>



<a name="175177873"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/175177873" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#175177873">(Sep 08 2019 at 09:37)</a>:</h4>
<p>I guess it is one more case in the recursion</p>



<a name="175177930"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/175177930" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keeley Hoek <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#175177930">(Sep 08 2019 at 09:39)</a>:</h4>
<p>Is there any appetite for some tactic-ish thing <code>normalize</code> which does all these common rewrites? Kevin could make his <code>induction'</code> just (essentially) <code>induction &gt;&gt; normalize</code></p>



<a name="175178077"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/175178077" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#175178077">(Sep 08 2019 at 09:45)</a>:</h4>
<p>I think the normalization is domain specific</p>



<a name="175273971"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/175273971" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#175273971">(Sep 09 2019 at 19:19)</a>:</h4>
<p>Lean works fine on my Windows machine, but I have a couple of issues on the Mac.</p>
<p>My main problems is that VS Code doesn't seem to access the added dependencies.</p>
<p>From the Mac command line, If I move into the directory of the Lean project I've already created on Windows (and synced via OneDrive) to which I have already added mathlib as a dependency, I can execute .lean files perfectly, but I get import resolution errors when attempting the same through VS Code.</p>
<p>For example, if the file <code>tsum.lean</code> has the contents</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">big_operators</span>

<span class="kn">open</span> <span class="n">finset</span>

<span class="n">def</span> <span class="n">tsum</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span>
    <span class="n">sum</span> <span class="o">(</span><span class="n">range</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">i</span><span class="o">)</span>

<span class="bp">#</span><span class="kn">eval</span> <span class="n">tsum</span> <span class="mi">10</span>
</pre></div>


<p>then executing, at the terminal, <code>lean tsum.lean</code> produces the expected output <code>55</code>. </p>
<p>But VS Code presents me with the error messages:</p>
<div class="codehilite"><pre><span></span>file &#39;algebra/big_operators&#39; not found in the LEAN_PATH

invalid import: algebra.big_operators
could not resolve import: algebra.big_operators
</pre></div>



<a name="175275887"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/175275887" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#175275887">(Sep 09 2019 at 19:45)</a>:</h4>
<p>Did you open the Lean package directory in VS Code or just the file <code>tsum.lean</code>? The vscode-lean extension won't work properly unless you do the former.</p>



<a name="175279344"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/175279344" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#175279344">(Sep 09 2019 at 20:22)</a>:</h4>
<p>Thanks so much <span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span> ! It wasn't a Mac problem after all. Just me not understanding how to use VS Code.</p>



<a name="175279423"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/175279423" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#175279423">(Sep 09 2019 at 20:23)</a>:</h4>
<p>We could probably have the extension pop up a warning if it can't find a <code>leanpkg.toml</code> file.</p>



<a name="175284034"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/175284034" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#175284034">(Sep 09 2019 at 21:19)</a>:</h4>
<p><span class="user-mention" data-user-id="233737">@Gihan Marasingha</span> very early on in my Lean career I wrote a blog post about proving mathematical stuff by induction: <a href="https://xenaproject.wordpress.com/2018/03/30/proofs-by-induction/" target="_blank" title="https://xenaproject.wordpress.com/2018/03/30/proofs-by-induction/">https://xenaproject.wordpress.com/2018/03/30/proofs-by-induction/</a> . The first response in the comments is by a 1st year undergraduate giving lots of examples of how one can do various things in Lean, maybe it's helpful for you? He includes a link to his code.</p>



<a name="176148260"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/176148260" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sayantan Majumdar <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#176148260">(Sep 19 2019 at 22:32)</a>:</h4>
<p>is there something wrong in the documentation in "prepositions and proof" in the "3.6 Examples of Prepositional Validities" when they write <br>
p \and false \iff false</p>



<a name="176148416"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/176148416" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#176148416">(Sep 19 2019 at 22:35)</a>:</h4>
<p>...that <code>example : ¬(p ↔ ¬p) := sorry</code> can be done constructively? That's what people usually ask about this section ;-) Yes, it can be done constructively.</p>



<a name="176148508"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/176148508" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sayantan Majumdar <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#176148508">(Sep 19 2019 at 22:36)</a>:</h4>
<p>no is there something wrong with p \and false \iff false</p>



<a name="176148514"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/176148514" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#176148514">(Sep 19 2019 at 22:36)</a>:</h4>
<p>I think that one is OK.</p>



<a name="176148541"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/176148541" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sayantan Majumdar <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#176148541">(Sep 19 2019 at 22:38)</a>:</h4>
<p>how does false implies p is false?</p>



<a name="176148588"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/176148588" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#176148588">(Sep 19 2019 at 22:38)</a>:</h4>
<p><code>false</code> implies anything ;-)</p>



<a name="176148591"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/176148591" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#176148591">(Sep 19 2019 at 22:38)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">∧</span> <span class="n">false</span> <span class="bp">↔</span> <span class="n">false</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">assumption</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="o">{</span>
    <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">h</span><span class="o">,</span>
  <span class="o">}</span>
<span class="kn">end</span>
</pre></div>



<a name="176148603"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/176148603" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#176148603">(Sep 19 2019 at 22:38)</a>:</h4>
<p><code>false</code> is an inductive type with no constructors, so the induction principle for <code>false</code>, namely <code>false.elim</code> is just <code>false -&gt; X</code> for any X.</p>



<a name="176148628"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/176148628" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#176148628">(Sep 19 2019 at 22:39)</a>:</h4>
<p>It might be easier to think of things in terms of classical logic. Then P is either true or false, and in either case we see both sides are false.</p>



<a name="176148709"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/176148709" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#176148709">(Sep 19 2019 at 22:40)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">∧</span> <span class="n">false</span> <span class="bp">↔</span> <span class="n">false</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="n">and</span><span class="bp">.</span><span class="n">right</span><span class="o">,</span> <span class="n">false</span><span class="bp">.</span><span class="n">elim</span><span class="bp">⟩</span>
</pre></div>



<a name="176148996"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/176148996" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sayantan Majumdar <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#176148996">(Sep 19 2019 at 22:44)</a>:</h4>
<p>thanks</p>



<a name="177114367"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/177114367" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yufan Lou <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#177114367">(Oct 02 2019 at 01:35)</a>:</h4>
<p>How do I fix this?</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">modeq</span>
<span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">library_search</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="err">^</span><span class="mi">2</span> <span class="bp">≡</span> <span class="n">b</span><span class="err">^</span><span class="mi">2</span> <span class="o">[</span><span class="n">MOD</span> <span class="mi">2</span><span class="o">]</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">≡</span> <span class="n">b</span> <span class="o">[</span><span class="n">MOD</span> <span class="mi">2</span><span class="o">]</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">assume</span> <span class="n">hyp</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="mi">2</span> <span class="err">∣</span> <span class="n">b</span><span class="err">^</span><span class="mi">2</span> <span class="bp">-</span> <span class="n">a</span><span class="err">^</span><span class="mi">2</span><span class="o">,</span> <span class="k">from</span> <span class="n">nat</span><span class="bp">.</span><span class="n">modeq</span><span class="bp">.</span><span class="n">dvd_of_modeq</span> <span class="n">hyp</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>


<div class="codehilite"><pre><span></span>7:29 error:
invalid type ascription, term has type
  ↑2 ∣ ↑(b ^ 2) - ↑(a ^ 2)
but is expected to have type
  2 ∣ b ^ 2 - a ^ 2
state:
2 goals
a b : ℕ,
hyp : a ^ 2 ≡ b ^ 2 [MOD 2]
⊢ 2 ∣ b ^ 2 - a ^ 2

a b : ℕ,
hyp : a ^ 2 ≡ b ^ 2 [MOD 2],
this : 2 ∣ b ^ 2 - a ^ 2
⊢ a ≡ b [MOD 2]
</pre></div>



<a name="177115336"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/177115336" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#177115336">(Oct 02 2019 at 02:01)</a>:</h4>
<p>Your <code>have : 2 ∣ b^2 - a^2</code> statement is probably not what you want here. The <code>b^2</code> and <code>a^2</code> are natural numbers, so <code>-</code> is subtraction between natural numbers. To make the output a natural number, so we define it as 0 when <code>a^2 &gt; b^2</code>. This "truncated" subtraction is very often not what you want to use.</p>



<a name="177115343"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/177115343" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#177115343">(Oct 02 2019 at 02:01)</a>:</h4>
<p>So you want to give Lean a hint that you want to use integer subtraction:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">modeq</span> <span class="n">data</span><span class="bp">.</span><span class="n">int</span><span class="bp">.</span><span class="n">all</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="err">^</span><span class="mi">2</span> <span class="bp">≡</span> <span class="n">b</span><span class="err">^</span><span class="mi">2</span> <span class="o">[</span><span class="n">MOD</span> <span class="mi">2</span><span class="o">]</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">≡</span> <span class="n">b</span> <span class="o">[</span><span class="n">MOD</span> <span class="mi">2</span><span class="o">]</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">assume</span> <span class="n">hyp</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="mi">2</span> <span class="err">∣</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span><span class="err">^</span><span class="mi">2</span> <span class="bp">-</span> <span class="n">a</span><span class="err">^</span><span class="mi">2</span><span class="o">,</span> <span class="n">exact_mod_cast</span> <span class="n">nat</span><span class="bp">.</span><span class="n">modeq</span><span class="bp">.</span><span class="n">dvd_of_modeq</span> <span class="n">hyp</span><span class="o">,</span>
  <span class="c1">-- rw [nat.modeq.modeq_iff_dvd] at hyp, norm_cast at hyp,</span>
<span class="kn">end</span>
</pre></div>



<a name="177115389"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/177115389" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#177115389">(Oct 02 2019 at 02:02)</a>:</h4>
<p>I added an import, so that Lean knows about exponentiation of integers. You can alternatively also rewrite with <code>nat.modeq.modeq_iff_dvd</code> (see commented out code)</p>



<a name="177115408"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/177115408" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#177115408">(Oct 02 2019 at 02:03)</a>:</h4>
<p><code>norm_cast</code> and <code>exact_mod_cast</code> are useful tactics which will automatically deal with the cast from <code>nat</code> to <code>int</code>.</p>



<a name="177115411"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/177115411" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#177115411">(Oct 02 2019 at 02:03)</a>:</h4>
<p>See <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/tactics.md#norm_cast" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/docs/tactics.md#norm_cast">https://github.com/leanprover-community/mathlib/blob/master/docs/tactics.md#norm_cast</a></p>



<a name="177125131"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/177125131" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#177125131">(Oct 02 2019 at 06:30)</a>:</h4>
<p>One very confusing point for beginners is that the natural number 2 and the integer 2 are not "equal" in Lean -- indeed it doesn't even make sense to ask that they are equal, because they don't have the same type. I would suggest that you work with integers all the way through rather than natural numbers, because what you want is true for integers. Of course then you have to change all the functions you use to the integer version :-/ Yes, this isn't like the way mathematicians treat it -- I know :-/</p>



<a name="177199648"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/177199648" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yufan Lou <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#177199648">(Oct 02 2019 at 22:44)</a>:</h4>
<p>LOL I really overlooked that, thanks a lot</p>



<a name="177199790"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/177199790" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yufan Lou <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#177199790">(Oct 02 2019 at 22:47)</a>:</h4>
<p>I guess it's just better to work under integer most of the time</p>



<a name="177209347"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/177209347" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#177209347">(Oct 03 2019 at 02:14)</a>:</h4>
<p>Clearly the natural numbers weren't meant to be formalized</p>



<a name="177209529"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/177209529" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yufan Lou <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#177209529">(Oct 03 2019 at 02:19)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="err">^</span><span class="mi">2</span> <span class="bp">≡</span> <span class="n">b</span><span class="err">^</span><span class="mi">2</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">2</span><span class="o">]</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">≡</span> <span class="n">b</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">2</span><span class="o">]</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">assume</span> <span class="n">hyp</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="mi">2</span> <span class="err">∣</span> <span class="n">b</span><span class="err">^</span><span class="mi">2</span> <span class="bp">-</span> <span class="n">a</span><span class="err">^</span><span class="mi">2</span><span class="o">,</span> <span class="k">from</span> <span class="n">int</span><span class="bp">.</span><span class="n">modeq</span><span class="bp">.</span><span class="n">modeq_iff_dvd</span><span class="bp">.</span><span class="n">mp</span> <span class="n">hyp</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="mi">2</span> <span class="err">∣</span> <span class="o">(</span><span class="n">b</span> <span class="bp">-</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">a</span><span class="o">),</span> <span class="k">by</span> <span class="n">library_search</span><span class="o">,</span>
  <span class="n">library_search</span>
<span class="kn">end</span>
</pre></div>


<p>back at it but this gives me fail, meanwhile I found this with library_search</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="err">^</span><span class="mi">2</span> <span class="bp">-</span> <span class="n">b</span><span class="err">^</span><span class="mi">2</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">-</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sq_sub_sq</span> <span class="n">a</span> <span class="n">b</span>
</pre></div>


<p>How do I apply it?</p>



<a name="177209933"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/177209933" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yufan Lou <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#177209933">(Oct 03 2019 at 02:29)</a>:</h4>
<p>nvm I was dumb XD forgot to specify <code>at</code> with <code>rw</code></p>



<a name="177210549"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/177210549" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yufan Lou <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#177210549">(Oct 03 2019 at 02:47)</a>:</h4>
<p>ahhhh... now I have to apply the fundamental theorem of arithmetic but don't know how</p>



<a name="177212960"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/177212960" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#177212960">(Oct 03 2019 at 03:57)</a>:</h4>
<p>you can do it by case exhaustion on <code>a</code> and <code>b</code>:</p>
<div class="codehilite"><pre><span></span><span class="c1">-- requires import data.zmod.basic</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="err">^</span><span class="mi">2</span> <span class="bp">≡</span> <span class="n">b</span><span class="err">^</span><span class="mi">2</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">2</span><span class="o">]</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">≡</span> <span class="n">b</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">2</span><span class="o">]</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">assume</span> <span class="n">hyp</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">int</span><span class="bp">.</span><span class="n">mod_two_eq_zero_or_one</span> <span class="n">a</span> <span class="k">with</span> <span class="n">H₁</span> <span class="n">H₁</span><span class="bp">;</span>
  <span class="n">cases</span> <span class="n">int</span><span class="bp">.</span><span class="n">mod_two_eq_zero_or_one</span> <span class="n">b</span> <span class="k">with</span> <span class="n">H₂</span> <span class="n">H₂</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">change</span> <span class="bp">_</span> <span class="bp">≡</span> <span class="mi">0</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">2</span><span class="o">]</span> <span class="n">at</span> <span class="n">H₁</span><span class="o">,</span> <span class="n">change</span> <span class="bp">_</span> <span class="bp">≡</span> <span class="mi">0</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">2</span><span class="o">]</span> <span class="n">at</span> <span class="n">H₂</span><span class="o">,</span>
      <span class="k">have</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">zmod</span><span class="bp">.</span><span class="n">eq_iff_modeq_int</span> <span class="mi">2</span><span class="o">,</span> <span class="n">simp</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
      <span class="n">rw</span> <span class="err">←</span><span class="n">this</span> <span class="n">at</span> <span class="err">⊢</span> <span class="n">H₁</span> <span class="n">H₂</span> <span class="n">hyp</span><span class="o">,</span> <span class="n">cc</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">change</span> <span class="bp">_</span> <span class="bp">≡</span> <span class="mi">0</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">2</span><span class="o">]</span> <span class="n">at</span> <span class="n">H₁</span><span class="o">,</span> <span class="n">change</span> <span class="bp">_</span> <span class="bp">≡</span> <span class="mi">1</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">2</span><span class="o">]</span> <span class="n">at</span> <span class="n">H₂</span><span class="o">,</span>
      <span class="k">have</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">zmod</span><span class="bp">.</span><span class="n">eq_iff_modeq_int</span> <span class="mi">2</span><span class="o">,</span> <span class="n">simp</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
      <span class="n">rw</span> <span class="err">←</span><span class="n">this</span> <span class="n">at</span> <span class="err">⊢</span> <span class="n">H₁</span> <span class="n">H₂</span> <span class="n">hyp</span><span class="o">,</span>
      <span class="n">suffices</span> <span class="o">:</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">2</span><span class="o">),</span>
        <span class="k">by</span> <span class="n">simp</span><span class="bp">*</span><span class="o">,</span>
      <span class="n">simp</span> <span class="n">at</span> <span class="n">H₁</span> <span class="n">H₂</span><span class="o">,</span> <span class="n">simp</span><span class="o">[</span><span class="bp">*</span><span class="o">,</span> <span class="bp">-</span><span class="n">hyp</span><span class="o">]</span> <span class="n">at</span> <span class="n">hyp</span><span class="o">,</span> <span class="n">simpa</span> <span class="kn">using</span> <span class="n">hyp</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">change</span> <span class="bp">_</span> <span class="bp">≡</span> <span class="mi">1</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">2</span><span class="o">]</span> <span class="n">at</span> <span class="n">H₁</span><span class="o">,</span> <span class="n">change</span> <span class="bp">_</span> <span class="bp">≡</span> <span class="mi">0</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">2</span><span class="o">]</span> <span class="n">at</span> <span class="n">H₂</span><span class="o">,</span>
      <span class="k">have</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">zmod</span><span class="bp">.</span><span class="n">eq_iff_modeq_int</span> <span class="mi">2</span><span class="o">,</span> <span class="n">simp</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
      <span class="n">rw</span> <span class="err">←</span><span class="n">this</span> <span class="n">at</span> <span class="err">⊢</span> <span class="n">H₁</span> <span class="n">H₂</span> <span class="n">hyp</span><span class="o">,</span>
      <span class="n">suffices</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">2</span><span class="o">),</span>
        <span class="k">by</span> <span class="n">simp</span><span class="bp">*</span><span class="o">,</span>
      <span class="n">simp</span> <span class="n">at</span> <span class="n">H₁</span> <span class="n">H₂</span><span class="o">,</span> <span class="n">simp</span><span class="o">[</span><span class="bp">*</span><span class="o">,</span> <span class="bp">-</span><span class="n">hyp</span><span class="o">]</span> <span class="n">at</span> <span class="n">hyp</span><span class="o">,</span> <span class="n">simpa</span> <span class="kn">using</span> <span class="n">hyp</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">change</span> <span class="bp">_</span> <span class="bp">≡</span> <span class="mi">1</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">2</span><span class="o">]</span> <span class="n">at</span> <span class="n">H₁</span><span class="o">,</span> <span class="n">change</span> <span class="bp">_</span> <span class="bp">≡</span> <span class="mi">1</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">2</span><span class="o">]</span> <span class="n">at</span> <span class="n">H₂</span><span class="o">,</span>
      <span class="k">have</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">zmod</span><span class="bp">.</span><span class="n">eq_iff_modeq_int</span> <span class="mi">2</span><span class="o">,</span> <span class="n">simp</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
      <span class="n">rw</span> <span class="err">←</span><span class="n">this</span> <span class="n">at</span> <span class="err">⊢</span> <span class="n">H₁</span> <span class="n">H₂</span> <span class="n">hyp</span><span class="o">,</span> <span class="n">cc</span> <span class="o">}</span>
<span class="kn">end</span>
</pre></div>


<p>there's also fermat's little theorem for <code>zmod</code>, which might give a cleaner proof</p>



<a name="177214111"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/177214111" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#177214111">(Oct 03 2019 at 04:28)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">zmod</span><span class="bp">.</span><span class="n">quadratic_reciprocity</span>

<span class="kn">theorem</span> <span class="n">frob</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">prime</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">zmodp</span> <span class="n">p</span> <span class="n">hp</span><span class="o">}</span> <span class="o">:</span> <span class="n">a</span> <span class="err">^</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span>
<span class="n">decidable</span><span class="bp">.</span><span class="n">by_cases</span>
  <span class="o">(</span><span class="k">assume</span> <span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">ha</span><span class="o">,</span> <span class="n">zero_pow</span> <span class="n">hp</span><span class="bp">.</span><span class="n">pos</span><span class="o">])</span>
  <span class="o">(</span><span class="k">assume</span> <span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">,</span> <span class="k">by</span> <span class="n">conv_lhs</span> <span class="o">{</span> <span class="n">congr</span><span class="o">,</span> <span class="n">skip</span><span class="o">,</span> <span class="n">rw</span> <span class="err">←</span> <span class="n">nat</span><span class="bp">.</span><span class="n">sub_add_cancel</span> <span class="o">(</span><span class="k">show</span> <span class="n">p</span> <span class="bp">≥</span> <span class="mi">1</span><span class="o">,</span> <span class="k">from</span> <span class="n">le_of_lt</span> <span class="n">hp</span><span class="bp">.</span><span class="n">one_lt</span><span class="o">)</span> <span class="o">}</span><span class="bp">;</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">pow_add</span><span class="o">,</span> <span class="n">zmodp</span><span class="bp">.</span><span class="n">fermat_little</span> <span class="n">hp</span> <span class="n">ha</span><span class="o">,</span> <span class="n">pow_one</span><span class="o">,</span> <span class="n">one_mul</span><span class="o">])</span>

<span class="kn">theorem</span> <span class="n">frob&#39;</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">prime</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">}</span> <span class="o">:</span> <span class="n">a</span> <span class="err">^</span> <span class="n">p</span> <span class="bp">≡</span> <span class="n">a</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="n">p</span><span class="o">]</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">zmodp</span><span class="bp">.</span><span class="n">eq_iff_modeq_int</span> <span class="n">hp</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">cast_pow</span><span class="o">,</span> <span class="n">frob</span><span class="o">]</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span><span class="err">^</span><span class="mi">2</span> <span class="bp">≡</span> <span class="n">b</span><span class="err">^</span><span class="mi">2</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">2</span><span class="o">])</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≡</span> <span class="n">b</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">2</span><span class="o">]</span> <span class="o">:=</span>
<span class="k">calc</span>  <span class="n">a</span> <span class="bp">≡</span> <span class="n">a</span><span class="err">^</span><span class="mi">2</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">2</span><span class="o">]</span> <span class="o">:</span> <span class="o">(</span><span class="n">frob&#39;</span> <span class="n">nat</span><span class="bp">.</span><span class="n">prime_two</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span>
    <span class="bp">...</span> <span class="bp">≡</span> <span class="n">b</span><span class="err">^</span><span class="mi">2</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">2</span><span class="o">]</span> <span class="o">:</span> <span class="n">h</span>
    <span class="bp">...</span> <span class="bp">≡</span> <span class="n">b</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">2</span><span class="o">]</span> <span class="o">:</span> <span class="n">frob&#39;</span> <span class="n">nat</span><span class="bp">.</span><span class="n">prime_two</span>
</pre></div>



<a name="177224238"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/177224238" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yufan Lou <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#177224238">(Oct 03 2019 at 08:30)</a>:</h4>
<p>Thank you both! I am understanding the proofs by tracing them step by step. I see that the key is to understand <code>zmod n</code> itself as a number type and either turning the mod congruence in <code>nat</code> into equality in <code>zmod n</code> and prove it there, or turning equality in <code>zmod n</code> into mod congruence in <code>nat</code> and apply them here. Hmm... I have a vague intuition about this from my Haskell experience, but I need to think hard about how to explain this to my maths colleagues...</p>
<p>I still don't get many intricacies in there either, like why I need to show <code>0 = 1</code> and why <code>-hyp</code> is necessary in <code>simp[*, -hyp]</code>. <code>conv_lhs</code> has not yet been documented. The first two steps <code>congr, skip</code> seems very arbitrary. Although I understand the proofs now, I can hardly imagine writing them.</p>



<a name="178501319"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/178501319" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#178501319">(Oct 18 2019 at 18:57)</a>:</h4>
<p>Is there a nicer way of doing this?</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">always_less</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="k">if</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="mi">5</span> <span class="k">then</span> <span class="n">a</span> <span class="k">else</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="mi">6</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="n">decidable</span><span class="bp">.</span><span class="n">cases_on</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">decidable_lt</span> <span class="n">a</span> <span class="mi">5</span><span class="o">)</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="n">hnc</span><span class="o">,</span> <span class="n">dec_trivial</span><span class="o">)</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="n">hc</span><span class="o">,</span> <span class="k">show</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="mi">6</span><span class="o">,</span> <span class="k">from</span> <span class="n">lt</span><span class="bp">.</span><span class="n">step</span> <span class="n">hc</span><span class="o">)</span>
</pre></div>



<a name="178506622"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/178506622" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#178506622">(Oct 18 2019 at 20:06)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">split_ifs</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">omega</span>

<span class="kn">lemma</span> <span class="n">always_less</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="k">if</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="mi">5</span> <span class="k">then</span> <span class="n">a</span> <span class="k">else</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="mi">6</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">split_ifs</span><span class="bp">;</span> <span class="n">omega</span>
</pre></div>



<a name="178510296"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/178510296" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#178510296">(Oct 18 2019 at 20:58)</a>:</h4>
<p>Rad, thanks. I didn't know about split_ifs.</p>



<a name="178510400"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/178510400" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#178510400">(Oct 18 2019 at 21:00)</a>:</h4>
<p>I'm Kenny, but you're welcome</p>



<a name="178548786"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/178548786" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#178548786">(Oct 19 2019 at 14:31)</a>:</h4>
<p>How do I prove <code>∀ x : ℤ, 0 ≤ x → x ≤ 1 → x ∈ ({0, 1} : set ℤ)</code>?</p>



<a name="178548989"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/178548989" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#178548989">(Oct 19 2019 at 14:36)</a>:</h4>
<p>Do we have something like <code>fintype {m : ℤ | a ≤ m /\ m &lt; b}</code>?</p>



<a name="178551312"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/178551312" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#178551312">(Oct 19 2019 at 15:42)</a>:</h4>
<p>There was a thread about this only recently</p>



<a name="178551324"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/178551324" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#178551324">(Oct 19 2019 at 15:43)</a>:</h4>
<p>I mean the fintype</p>



<a name="178551619"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/178551619" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#178551619">(Oct 19 2019 at 15:50)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">interactive</span>

<span class="kn">example</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">,</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">≤</span> <span class="mi">1</span> <span class="bp">→</span> <span class="n">x</span> <span class="err">∈</span> <span class="o">({</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">h0</span> <span class="n">h1</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">le_iff_lt_or_eq</span> <span class="n">at</span> <span class="n">h0</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h0</span><span class="o">,</span> <span class="n">swap</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span><span class="n">h0</span><span class="o">,</span> <span class="n">right</span><span class="o">,</span> <span class="n">left</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">lt_iff_add_one_le</span><span class="o">,</span> <span class="n">zero_add</span><span class="o">,</span> <span class="n">le_iff_lt_or_eq</span><span class="o">]</span> <span class="n">at</span> <span class="n">h0</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h0</span><span class="o">,</span>
    <span class="n">exfalso</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">lt_iff_not_ge</span> <span class="n">at</span> <span class="n">h0</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">h0</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">h1</span><span class="o">,</span>
  <span class="n">left</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h0</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>



<a name="178551711"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/178551711" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#178551711">(Oct 19 2019 at 15:52)</a>:</h4>
<p><a href="#narrow/stream/116395-maths/topic/Some.20numerology" title="#narrow/stream/116395-maths/topic/Some.20numerology">https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Some.20numerology</a> That's more than you need for the fintype. As you can see, I partially PR'ed it (some nat lemmas) and then teaching started at my university and I never finished the job. Feel absolutely free to PR that stuff! I'm still snowed under until November.</p>



<a name="178551726"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/178551726" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#178551726">(Oct 19 2019 at 15:53)</a>:</h4>
<p>Thank you for the link. I'll possibly PR it next week.</p>



<a name="178563223"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/178563223" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#178563223">(Oct 19 2019 at 21:00)</a>:</h4>
<p>The correct thing to do is probably to resume work on <a href="https://github.com/leanprover-community/mathlib/tree/nat_cases" target="_blank" title="https://github.com/leanprover-community/mathlib/tree/nat_cases">https://github.com/leanprover-community/mathlib/tree/nat_cases</a></p>



<a name="178601399"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/178601399" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#178601399">(Oct 20 2019 at 17:10)</a>:</h4>
<p>If anyone has opinions about when to prefer a decidable prop over a boolean valued function as a predicate  I'd like to read them if you get a moment. In a general context like lists, core doesn't seem to take a hard line stance either way IE <code>list.filter</code> and <code>list.partition</code> use decidable predicates whereas <code>list.all</code> and <code>list.any</code> use a boolean valued function. Mathlib often defines a function for both.</p>



<a name="178602494"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/178602494" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#178602494">(Oct 20 2019 at 17:39)</a>:</h4>
<p>If you're going to still use Lean next year, I would use a bool-valued function</p>



<a name="178602525"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/178602525" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#178602525">(Oct 20 2019 at 17:40)</a>:</h4>
<p>Lean 4's core library is moving towards explicit usage of boolean-valued predicates</p>



<a name="178604665"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/178604665" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#178604665">(Oct 20 2019 at 18:37)</a>:</h4>
<p>Thanks, that definitely simplifies things, bool it is then.</p>



<a name="179048341"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179048341" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179048341">(Oct 25 2019 at 13:19)</a>:</h4>
<p>Hi, is it possible to express <code>∃ b &gt; a, p b</code> using <code>&lt;</code> only? I understand that I can write <code>∃ b  (H : a &lt; b),  p b</code> but this is less readable.</p>



<a name="179048499"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179048499" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179048499">(Oct 25 2019 at 13:21)</a>:</h4>
<p>I think what you suggest (the less readable thing) is what we're supposed to be writing nowadays.</p>



<a name="179051404"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179051404" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Seewoo Lee <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179051404">(Oct 25 2019 at 13:56)</a>:</h4>
<p>Hi, here's a noob question: I'm trying to prove currying &amp; uncurrying, i.e. (p -&gt; q -&gt; r) &lt;-&gt; ((p \and q) -&gt; r). Here's my try:</p>
<div class="codehilite"><pre><span></span>theorem t3 : ((p ∧ q) → r) → (p → q → r) :=
    assume h₁ : (p ∧ q) → r,
    assume hp : p,
    assume hq : q,
    have h₂ : p ∧ q, from and.intro hp hq,
    h₁ h₂

theorem t4 : (p → q → r) → ((p ∧ q) → r) :=
    assume h₁ : p → q → r,
    assume h₂ : p ∧ q,
    have hp : p, from and.left h₂,
    have hq : q, from and.right h₂,
    have h₃ : q → r, from h₁ hp,
    have hr : r, from h₃ hq
    hr
</pre></div>


<p>t3 seems to have no problem, but t4 has. It gives an error like</p>
<div class="codehilite"><pre><span></span>function expected at
  h₃ hq
term has type
  r
</pre></div>


<p>and</p>
<div class="codehilite"><pre><span></span>unknown identifier &#39;hr&#39;
</pre></div>


<p>but I can't find the reason. Any helps?</p>



<a name="179051601"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179051601" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Seewoo Lee <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179051601">(Oct 25 2019 at 13:58)</a>:</h4>
<p>I forgot one: I put <code>variables p q r : Prop</code> before t3 and t4, of course.</p>



<a name="179051680"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179051680" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179051680">(Oct 25 2019 at 13:59)</a>:</h4>
<p>because you forgot a comma</p>



<a name="179051735"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179051735" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179051735">(Oct 25 2019 at 14:00)</a>:</h4>
<p>these proofs are so hard to debug because they're not in tactic mode :-/</p>



<a name="179051752"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179051752" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Seewoo Lee <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179051752">(Oct 25 2019 at 14:00)</a>:</h4>
<p>Oh you're right, thanks!</p>



<a name="179051794"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179051794" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Seewoo Lee <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179051794">(Oct 25 2019 at 14:00)</a>:</h4>
<p>Is there any efficient way to do these? I'm still not familiar with lean's grammar.</p>



<a name="179051801"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179051801" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179051801">(Oct 25 2019 at 14:01)</a>:</h4>
<p>"Don't forget the comma" occurs at least once in about the first six levels of <a href="http://wwwf.imperial.ac.uk/~buzzard/xena/natural_number_game/" target="_blank" title="http://wwwf.imperial.ac.uk/~buzzard/xena/natural_number_game/">http://wwwf.imperial.ac.uk/~buzzard/xena/natural_number_game/</a></p>



<a name="179051829"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179051829" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179051829">(Oct 25 2019 at 14:01)</a>:</h4>
<p>because extensive testing showed that it was by far the most common error which newcomers made.</p>



<a name="179051834"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179051834" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179051834">(Oct 25 2019 at 14:01)</a>:</h4>
<p>often in bold face</p>



<a name="179051984"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179051984" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179051984">(Oct 25 2019 at 14:02)</a>:</h4>
<blockquote>
<p>Is there any efficient way to do these? I'm still not familiar with lean's grammar.</p>
</blockquote>
<div class="codehilite"><pre><span></span><span class="kn">variables</span> <span class="n">p</span> <span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="kt">Prop</span>

<span class="kn">theorem</span> <span class="n">t3</span> <span class="o">:</span> <span class="o">((</span><span class="n">p</span> <span class="bp">∧</span> <span class="n">q</span><span class="o">)</span> <span class="bp">→</span> <span class="n">r</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">p</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">→</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">h₁</span> <span class="n">hp</span> <span class="n">hq</span><span class="o">,</span> <span class="n">h₁</span> <span class="bp">⟨</span><span class="n">hp</span><span class="o">,</span> <span class="n">hq</span><span class="bp">⟩</span>

<span class="kn">theorem</span> <span class="n">t4</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">→</span> <span class="n">r</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="n">p</span> <span class="bp">∧</span> <span class="n">q</span><span class="o">)</span> <span class="bp">→</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">h₁</span> <span class="n">h₂</span><span class="o">,</span> <span class="n">h₁</span> <span class="n">h₂</span><span class="bp">.</span><span class="mi">1</span> <span class="n">h₂</span><span class="bp">.</span><span class="mi">2</span>
</pre></div>



<a name="179052082"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179052082" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Seewoo Lee <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179052082">(Oct 25 2019 at 14:03)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span>  This is much better, thanks!</p>



<a name="179052123"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179052123" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179052123">(Oct 25 2019 at 14:04)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">t4</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">→</span> <span class="n">r</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="n">p</span> <span class="bp">∧</span> <span class="n">q</span><span class="o">)</span> <span class="bp">→</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">h₁</span><span class="o">,</span> <span class="c1">-- I can see what is happening</span>
  <span class="n">intro</span> <span class="n">h₂</span><span class="o">,</span> <span class="c1">-- I can still see what is happening</span>
  <span class="k">have</span> <span class="n">hp</span> <span class="o">:</span> <span class="n">p</span><span class="o">,</span> <span class="c1">-- oh wow now I can see I have two goals</span>
    <span class="n">exact</span> <span class="n">and</span><span class="bp">.</span><span class="n">left</span> <span class="n">h₂</span><span class="o">,</span> <span class="c1">-- now back down to one</span>
  <span class="k">have</span> <span class="n">hq</span> <span class="o">:</span> <span class="n">q</span><span class="o">,</span> <span class="c1">-- this is so much better than what TPIL chapter 3 says</span>
    <span class="n">exact</span> <span class="n">and</span><span class="bp">.</span><span class="n">right</span> <span class="n">h₂</span><span class="o">,</span> <span class="c1">-- I wish I had read chapter 5 much earlier</span>
  <span class="k">have</span> <span class="n">h₃</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">→</span> <span class="n">r</span><span class="o">,</span> <span class="c1">-- :D</span>
    <span class="n">exact</span> <span class="n">h₁</span> <span class="n">hp</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hr</span> <span class="o">:</span> <span class="n">r</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">h₃</span> <span class="n">hq</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">hr</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>



<a name="179052155"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179052155" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179052155">(Oct 25 2019 at 14:04)</a>:</h4>
<p>Kenny's method is a pure term mode proof. To write these you need to know the trick with <code>_</code></p>



<a name="179052221"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179052221" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179052221">(Oct 25 2019 at 14:05)</a>:</h4>
<p>This one was particularly easy, but in a longer one you can write something like</p>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">t4</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">→</span> <span class="n">r</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="n">p</span> <span class="bp">∧</span> <span class="n">q</span><span class="o">)</span> <span class="bp">→</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">h₁</span> <span class="n">h₂</span><span class="o">,</span> <span class="n">h₁</span> <span class="bp">_</span> <span class="bp">_</span>
</pre></div>


<p>and hover over the <code>_</code>s to see what needs to go there.</p>



<a name="179052317"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179052317" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179052317">(Oct 25 2019 at 14:06)</a>:</h4>
<p>In tactic mode you can see everything at all times, so it's better for mathematician beginners. What Kenny is saying is perhaps more appealing for CS beginners, as long as you know the <code>_</code> trick. You are just making the terms explicitly there.</p>



<a name="179052544"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179052544" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Seewoo Lee <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179052544">(Oct 25 2019 at 14:09)</a>:</h4>
<p>Yes I agree with you, and I just know what tactic mode is! Both seems great for me but tactic thing seems more intuitive.</p>



<a name="179401068"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179401068" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179401068">(Oct 30 2019 at 04:08)</a>:</h4>
<p>Question: does <code>simp</code> / <code>rewrite</code> work under binders?</p>



<a name="179401227"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179401227" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179401227">(Oct 30 2019 at 04:13)</a>:</h4>
<p>not very well. Suggestions: (1) <code>erw</code> "extended rewrite" sometimes gets to places standard <code>rw</code> doesn't get to. (2) learn about conv mode: <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/conv.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/conv.md">https://github.com/leanprover-community/mathlib/blob/master/docs/extras/conv.md</a></p>



<a name="179403776"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179403776" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179403776">(Oct 30 2019 at 05:27)</a>:</h4>
<p>Actually <code>simp</code> usually does quite well, I think. But <code>rw</code> is really bad at this.</p>



<a name="179406739"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179406739" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179406739">(Oct 30 2019 at 06:47)</a>:</h4>
<p>Thanks</p>



<a name="179406742"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179406742" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179406742">(Oct 30 2019 at 06:47)</a>:</h4>
<p>Another question: Does <code>pp.max_depth</code> do anything?  I have it set to <code>1000000000</code> and still see <code>…</code> in my goal</p>



<a name="179429580"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179429580" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179429580">(Oct 30 2019 at 13:14)</a>:</h4>
<p>The <code>_</code> in your goal is likely a proof. Use <code>pp.proofs</code></p>



<a name="179468497"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179468497" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179468497">(Oct 30 2019 at 19:31)</a>:</h4>
<p><span class="user-mention" data-user-id="111080">@Floris van Doorn</span> It's not <code>_</code>, it's <code>…</code>, and my term has ~no proofs.  I see things like <code>[…, …, …, …, (… * 2 ^256, …),</code> (and then more), I don't see how these could possibly be proofs</p>



<a name="179469214"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179469214" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179469214">(Oct 30 2019 at 19:41)</a>:</h4>
<p>There's another pp option that does it. I don't remember what it's called.</p>



<a name="179469250"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179469250" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179469250">(Oct 30 2019 at 19:41)</a>:</h4>
<p>Oh, I have never encountered that. Does setting <code>pp.max_steps</code> help?</p>



<a name="179471045"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179471045" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179471045">(Oct 30 2019 at 20:00)</a>:</h4>
<p>That does seem to help, but not interactively.  I get <code>11:1: excessive memory consumption detected at 'replace' (potential solution: increase memory consumption threshold)</code>  And it takes something like 15 GB on the command line.  Here's an example:</p>
<div class="codehilite"><pre><span></span><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span>
<span class="n">def</span> <span class="n">big</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span>
<span class="bp">|</span> <span class="n">v</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">v</span>
<span class="bp">|</span> <span class="n">v</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span> <span class="n">big</span> <span class="o">(</span><span class="n">v</span> <span class="bp">+</span> <span class="n">v</span><span class="o">)</span> <span class="n">c</span>

<span class="kn">set_option</span> <span class="n">pp</span><span class="bp">.</span><span class="n">max_depth</span> <span class="mi">1000000000</span>
<span class="kn">set_option</span> <span class="n">pp</span><span class="bp">.</span><span class="n">max_steps</span> <span class="mi">1000000000</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">big</span> <span class="n">v</span> <span class="mi">20</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">big</span><span class="o">]</span>
<span class="kn">end</span>
</pre></div>



<a name="179474306"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179474306" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179474306">(Oct 30 2019 at 20:36)</a>:</h4>
<p>If I get <code>kernel failed to type check declaration 'int.pow_of_nat' this is usually due to a buggy tactic or a bug in the builtin elaborator</code> on a definition I'm giving by <code>rfl</code>, is that a bug in lean?</p>



<a name="179474906"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179474906" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179474906">(Oct 30 2019 at 20:42)</a>:</h4>
<p>Probably not... :-) Can you minimise your example enough to post here?</p>



<a name="179476449"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179476449" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179476449">(Oct 30 2019 at 20:58)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">int</span><span class="bp">.</span><span class="n">pow_nat</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="bp">→</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℤ</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="n">b</span><span class="o">)</span> <span class="n">e</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="o">(</span><span class="n">b</span> <span class="err">^</span> <span class="n">e</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">neg_succ_of_nat</span> <span class="n">b</span><span class="o">)</span> <span class="mi">0</span> <span class="o">:=</span> <span class="mi">1</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">neg_succ_of_nat</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">neg_succ_of_nat</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="n">int</span><span class="bp">.</span><span class="n">pow_nat</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">neg_succ_of_nat</span> <span class="n">b</span><span class="o">)</span> <span class="n">k</span>

<span class="kn">instance</span> <span class="n">int_has_pow_nat</span> <span class="o">:</span> <span class="n">has_pow</span> <span class="n">int</span> <span class="n">nat</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="n">int</span><span class="bp">.</span><span class="n">pow_nat</span><span class="bp">⟩</span>

<span class="n">def</span> <span class="n">int</span><span class="bp">.</span><span class="n">pow</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="bp">→</span> <span class="bp">ℤ</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span> <span class="n">b</span> <span class="err">^</span> <span class="n">n</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">neg_succ_of_nat</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span> <span class="mi">0</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_pow</span> <span class="n">int</span> <span class="n">int</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="n">int</span><span class="bp">.</span><span class="n">pow</span><span class="bp">⟩</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span>
<span class="n">def</span> <span class="n">int</span><span class="bp">.</span><span class="n">pow_of_nat</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">int</span><span class="bp">.</span><span class="n">pow</span> <span class="n">b</span> <span class="n">e</span> <span class="bp">=</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="o">(</span><span class="n">b</span> <span class="err">^</span> <span class="n">e</span><span class="o">)</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="c1">-- 15:5: kernel failed to type check declaration &#39;int.pow_of_nat&#39; this is usually due to a buggy tactic or a bug in the builtin elaborator</span>
<span class="c1">-- elaborated type:</span>
<span class="c1">--   ∀ (b e : ℕ), int.pow ↑b ↑e = int.of_nat (b ^ e)</span>
<span class="c1">-- elaborated value:</span>
<span class="c1">--   λ (b e : ℕ), rfl</span>
<span class="c1">-- nested exception message:</span>
<span class="c1">-- type mismatch at definition &#39;int.pow_of_nat&#39;, has type</span>
<span class="c1">--   ∀ (b e : ℕ), int.pow ↑b ↑e = int.pow ↑b ↑e</span>
<span class="c1">-- but is expected to have type</span>
<span class="c1">--   ∀ (b e : ℕ), int.pow ↑b ↑e = int.of_nat (b ^ e)</span>
</pre></div>



<a name="179479393"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179479393" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179479393">(Oct 30 2019 at 21:27)</a>:</h4>
<p>Looks like a bug to me... Hopefully someone who knows better will chime in soon.</p>



<a name="179479522"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179479522" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179479522">(Oct 30 2019 at 21:28)</a>:</h4>
<p>reported as <a href="https://github.com/leanprover-community/lean/issues/76" target="_blank" title="https://github.com/leanprover-community/lean/issues/76">https://github.com/leanprover-community/lean/issues/76</a></p>



<a name="179482512"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179482512" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179482512">(Oct 30 2019 at 22:06)</a>:</h4>
<p>I don't think it is a bug. I wouldn't expect <code>rfl</code> to be able to prove that, you should have to induct on <code>e</code> first.</p>
<p>I don't think that's the usual error message, but I think that might be because it is a <code>def</code> rather than a lemma which would be more usual.</p>



<a name="179483174"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179483174" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179483174">(Oct 30 2019 at 22:15)</a>:</h4>
<p>If I do <code>def bad : true = false := rfl</code>, then I get a standard type error, without the extra words about it being possibly a bug</p>



<a name="179485582"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179485582" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179485582">(Oct 30 2019 at 22:52)</a>:</h4>
<p>It looks to me like the elaborator thought that <code>int.pow_nat (int.of_nat b) e</code> would reduce to <code>int.of_nat (b ^ e)</code>, but if you <code>#print int.pow_nat._main</code> you can see it actually won't.</p>



<a name="179485649"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179485649" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179485649">(Oct 30 2019 at 22:53)</a>:</h4>
<p>Surprisingly to me and the elaborator (but apparently not to Chris) the equation compiler generated an outermost match on the second argument, not the first.</p>



<a name="179488091"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179488091" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179488091">(Oct 30 2019 at 23:32)</a>:</h4>
<p>If I get <code>error: deep recursion was detected at 'expression equality test' (potential solution: increase stack space in your system)</code>, how do I increase stack space?</p>



<a name="179488142"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179488142" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179488142">(Oct 30 2019 at 23:34)</a>:</h4>
<p>It's a command line argument to lean</p>



<a name="179488243"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179488243" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179488243">(Oct 30 2019 at 23:35)</a>:</h4>
<p>but there is an adage that says that if you have to increase resource limits then you are probably doing something wrong</p>



<a name="179488271"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179488271" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179488271">(Oct 30 2019 at 23:35)</a>:</h4>
<p>I hope you don't actually expect that <code>big</code> example to work, it's a term 2^20 large</p>



<a name="179488381"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179488381" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179488381">(Oct 30 2019 at 23:37)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> No, I'm getting this error on a different example, the <code>big</code> example was just creating something to exhibit the <code>...</code>.  The thing I'm trying to do is in <a href="https://github.com/mit-plv/fiat-crypto/blob/6aaf03aed733d08ff124dffded9d8e2c7f4cc25a/src-lean/fiat_crypto.lean#L405" target="_blank" title="https://github.com/mit-plv/fiat-crypto/blob/6aaf03aed733d08ff124dffded9d8e2c7f4cc25a/src-lean/fiat_crypto.lean#L405">https://github.com/mit-plv/fiat-crypto/blob/6aaf03aed733d08ff124dffded9d8e2c7f4cc25a/src-lean/fiat_crypto.lean#L405</a>, trying to get the <code>norm_num</code> tactic to finish when I change <code>open ex</code> to <code>open ex2</code> (because <code>ex</code> was just a toy example; <code>ex2</code> is the actual code I'm trying to work on)</p>



<a name="179488473"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179488473" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179488473">(Oct 30 2019 at 23:39)</a>:</h4>
<p>For these kinds of big CS problems, my recommendation is to make sure you have clean inputs to the tactics</p>



<a name="179488488"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179488488" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179488488">(Oct 30 2019 at 23:39)</a>:</h4>
<p>What do you mean by "clean inputs"?</p>



<a name="179488500"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179488500" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179488500">(Oct 30 2019 at 23:39)</a>:</h4>
<p>If you can, use natural number equalities and known functions only to <code>norm_num</code></p>



<a name="179488564"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179488564" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179488564">(Oct 30 2019 at 23:40)</a>:</h4>
<p>give <code>norm_num</code> space to decide the problem and simplify the if statement afterward</p>



<a name="179488596"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179488596" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179488596">(Oct 30 2019 at 23:40)</a>:</h4>
<p>you may need to write a tactic to do this, the standard interactive mode chaining is probably not sufficient</p>



<a name="179488639"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179488639" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179488639">(Oct 30 2019 at 23:41)</a>:</h4>
<p>You can still use the existing tactics, but you are doing something specific by unfolding some functions, targeting a particular subterm for <code>norm_num</code> simplification, then going back to the simplifier and so on</p>



<a name="179488698"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179488698" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179488698">(Oct 30 2019 at 23:42)</a>:</h4>
<p>the <code>norm_num</code> front end handles this by just iterating <code>norm_num1, simp, norm_num1, simp</code> until stuff stops changing but that's only a heuristic</p>



<a name="179489088"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179489088" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179489088">(Oct 30 2019 at 23:48)</a>:</h4>
<p>I mean, iterating <code>norm_num1, simp, ...</code> seems not wrong, and in fact the call I have there produces the correct output for the smaller toy example.  (I can't see if it produces correct output on a slightly larger example because I get the recursion depth error)</p>



<a name="179490084"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179490084" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179490084">(Oct 31 2019 at 00:06)</a>:</h4>
<p>So I looked through that fiat-crypto file, and what I see are 300 lines of definitions without any theorems, where almost every definition is marked for unfolding. This will <em>explode</em> in lean</p>



<a name="179490140"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179490140" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179490140">(Oct 31 2019 at 00:07)</a>:</h4>
<p>What you want are rewrites that unfold what matters, in the cases that matter. If you have a recursive definition (defined with <code>*.rec</code>), it should <em>never</em> be directly unfolded; instead you should have a theorem for the various constructors of the inductive type that you are recursing on</p>



<a name="179490221"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179490221" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179490221">(Oct 31 2019 at 00:08)</a>:</h4>
<p>What is the point of the <code>let_in</code> definition? It seems plainly useless</p>



<a name="179490281"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179490281" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179490281">(Oct 31 2019 at 00:09)</a>:</h4>
<p>Note that lean actually has a <code>let</code> construct</p>



<a name="179490459"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179490459" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179490459">(Oct 31 2019 at 00:12)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> The <code>let_in</code> definition is one of the very few definitions that should never be unfolded</p>



<a name="179490554"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179490554" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179490554">(Oct 31 2019 at 00:14)</a>:</h4>
<p>After reduction/unfolding/rewriting, the only remaining definitions which are not unfolded should be <code>*</code>, <code>+</code>, <code>%</code>, <code>/</code>, and <code>let_in</code></p>



<a name="179490603"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179490603" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179490603">(Oct 31 2019 at 00:15)</a>:</h4>
<p>I can change my definitions to not be in terms of recursors and instead be recursive themselves, but I don't see how that will fix anything.  The times to unfold them are in fact when the underlying recursor is ready to be reduced</p>



<a name="179490868"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179490868" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179490868">(Oct 31 2019 at 00:21)</a>:</h4>
<p>The following definitions should not be simp: <code>list.flat_map</code> (aka <code>list.bind</code>), <code>list.combine</code> (aka <code>list.zip</code>), <code>int.to_nat_bit(0/1)</code> (the if statement should be a precondition), <code>associational.eval</code>, <code>mul</code>, definitely <code>square</code>, <code>negate_snd</code>, <code>split</code>, <code>reduce</code>, definitely <code>reduce_square</code>, <code>carryterm</code>, <code>positional.from_associational</code>, <code>from_associational_cons</code>, <code>chained_carries</code>, <code>chained_carries_no_reduce</code>.</p>



<a name="179490947"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179490947" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179490947">(Oct 31 2019 at 00:22)</a>:</h4>
<p>You don't necessarily need to change the definition (although using the equation compiler will do some of these things automatically for you), but you should add equational lemmas in the cases where you want the definition to unfold. Asking everything to unfold all at once is asking for trouble</p>



<a name="179491071"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179491071" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179491071">(Oct 31 2019 at 00:25)</a>:</h4>
<p>Wait, why should <code>list.combine</code> not be <code>simp</code>?  It's just there so that I could make code translation easier, it literally just unfolds to <code>list.zip</code> (which I don't touch the flags of).  <code>from_associational_cons</code> is telling <code>from_associational</code> to reduce in as close a match to the case where it should that I can get (in the case where it's applied to a concrete list)</p>



<a name="179491095"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179491095" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179491095">(Oct 31 2019 at 00:25)</a>:</h4>
<p>For example:</p>
<div class="codehilite"><pre><span></span><span class="kn">open</span> <span class="n">prod</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span>
<span class="n">def</span> <span class="n">associational</span><span class="bp">.</span><span class="kn">eval</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="bp">ℤ</span> <span class="bp">×</span> <span class="bp">ℤ</span><span class="o">))</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="o">:=</span>
  <span class="n">list</span><span class="bp">.</span><span class="n">foldr</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="mi">0</span> <span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">p</span><span class="o">,</span> <span class="n">fst</span> <span class="n">p</span> <span class="bp">*</span> <span class="n">snd</span> <span class="n">p</span><span class="o">)</span> <span class="n">p</span><span class="o">)</span>
</pre></div>


<p>should be</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">associational</span><span class="bp">.</span><span class="kn">eval</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="bp">ℤ</span> <span class="bp">×</span> <span class="bp">ℤ</span><span class="o">))</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="o">:=</span>
  <span class="n">list</span><span class="bp">.</span><span class="n">foldr</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="mi">0</span> <span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">p</span><span class="o">,</span> <span class="n">fst</span> <span class="n">p</span> <span class="bp">*</span> <span class="n">snd</span> <span class="n">p</span><span class="o">)</span> <span class="n">p</span><span class="o">)</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">associational</span><span class="bp">.</span><span class="n">eval_nil</span> <span class="o">:</span> <span class="n">associational</span><span class="bp">.</span><span class="kn">eval</span> <span class="o">[]</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">associational</span><span class="bp">.</span><span class="n">eval_cons</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">l</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">associational</span><span class="bp">.</span><span class="kn">eval</span> <span class="o">((</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="bp">::</span> <span class="n">l</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">associational</span><span class="bp">.</span><span class="kn">eval</span> <span class="n">l</span> <span class="o">:=</span> <span class="n">rfl</span>
</pre></div>



<a name="179491145"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179491145" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179491145">(Oct 31 2019 at 00:26)</a>:</h4>
<p>Sure.  Though I will note that I don't use <code>associational.eval</code> anywhere right now, so not unfolding it is not a high priority</p>



<a name="179491160"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179491160" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179491160">(Oct 31 2019 at 00:27)</a>:</h4>
<p>or</p>
<div class="codehilite"><pre><span></span><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">def</span> <span class="n">associational</span><span class="bp">.</span><span class="kn">eval</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="bp">ℤ</span> <span class="bp">×</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">→</span> <span class="bp">ℤ</span>
<span class="bp">|</span> <span class="o">[]</span> <span class="o">:=</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="o">((</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="bp">::</span> <span class="n">l</span><span class="o">)</span> <span class="o">:=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">associational</span><span class="bp">.</span><span class="kn">eval</span> <span class="n">l</span>
</pre></div>



<a name="179491184"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179491184" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179491184">(Oct 31 2019 at 00:27)</a>:</h4>
<p>It's an example; I can demonstrate on something else if you like</p>



<a name="179491195"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179491195" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179491195">(Oct 31 2019 at 00:27)</a>:</h4>
<p>Of the ones you listed, I use <code>list.flat_map</code>, <code>list.combine</code>, <code>mul</code>, <code>split</code>, <code>reduce</code>, <code>carryterm</code>, <code>positional.from_associational</code>, and <code>chained_carries</code></p>



<a name="179491349"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179491349" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179491349">(Oct 31 2019 at 00:30)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span>  Could you demonstrate on <code>reduce</code> (or <code>split</code>)?</p>



<a name="179491370"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179491370" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179491370">(Oct 31 2019 at 00:31)</a>:</h4>
<p>I'd also be interested in seeing <code>carryterm</code></p>



<a name="179491387"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179491387" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179491387">(Oct 31 2019 at 00:31)</a>:</h4>
<p><code>reduce</code> because I don't see how to write a simplification lemma for it; <code>carryterm</code> because the conditions under which it should reduce are complicated (namely, when <code>fst t</code> and <code>w</code> are numerals/closed terms)</p>



<a name="179491582"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179491582" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179491582">(Oct 31 2019 at 00:36)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">open</span> <span class="n">prod</span>
<span class="n">def</span> <span class="n">let_in</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span> <span class="o">:=</span> <span class="n">f</span> <span class="n">x</span>

<span class="n">def</span> <span class="n">associational</span><span class="bp">.</span><span class="n">mul</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="bp">ℤ</span> <span class="bp">×</span> <span class="bp">ℤ</span><span class="o">))</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="bp">ℤ</span> <span class="bp">×</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="n">def</span> <span class="n">associational</span><span class="bp">.</span><span class="n">split</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="bp">ℤ</span> <span class="bp">×</span> <span class="bp">ℤ</span><span class="o">))</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="bp">ℤ</span> <span class="bp">×</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">×</span> <span class="n">list</span> <span class="o">(</span><span class="bp">ℤ</span> <span class="bp">×</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">let</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span> <span class="n">list</span><span class="bp">.</span><span class="n">partition</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="o">(</span><span class="n">fst</span> <span class="n">t</span><span class="o">)</span> <span class="err">%</span> <span class="n">s</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="n">p</span> <span class="k">in</span>
<span class="o">(</span><span class="n">b</span><span class="o">,</span> <span class="n">list</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="o">(</span><span class="n">fst</span> <span class="n">t</span> <span class="bp">/</span> <span class="n">s</span><span class="o">,</span> <span class="n">snd</span> <span class="n">t</span><span class="o">))</span> <span class="n">a</span><span class="o">)</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">associational</span><span class="bp">.</span><span class="n">split_val</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">}</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="bp">ℤ</span> <span class="bp">×</span> <span class="bp">ℤ</span><span class="o">)}</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">list</span><span class="bp">.</span><span class="n">partition</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="o">(</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span> <span class="n">t</span><span class="o">)</span> <span class="err">%</span> <span class="n">s</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="n">p</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">associational</span><span class="bp">.</span><span class="n">split</span> <span class="n">s</span> <span class="n">p</span> <span class="bp">=</span> <span class="o">(</span><span class="n">b</span><span class="o">,</span> <span class="n">list</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="o">(</span><span class="n">fst</span> <span class="n">t</span> <span class="bp">/</span> <span class="n">s</span><span class="o">,</span> <span class="n">snd</span> <span class="n">t</span><span class="o">))</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">associational</span><span class="bp">.</span><span class="n">split</span><span class="o">,</span> <span class="n">h</span><span class="o">,</span> <span class="n">associational</span><span class="bp">.</span><span class="n">split</span><span class="o">]</span>

<span class="n">def</span> <span class="n">associational</span><span class="bp">.</span><span class="n">reduce</span> <span class="o">(</span><span class="n">s</span> <span class="n">c</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="bp">ℤ</span> <span class="bp">×</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">let</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span> <span class="n">associational</span><span class="bp">.</span><span class="n">split</span> <span class="n">s</span> <span class="n">p</span> <span class="k">in</span>
<span class="n">a</span> <span class="bp">++</span> <span class="n">associational</span><span class="bp">.</span><span class="n">mul</span> <span class="n">c</span> <span class="n">b</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">associational</span><span class="bp">.</span><span class="n">reduce_val</span> <span class="o">(</span><span class="n">s</span> <span class="n">c</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">associational</span><span class="bp">.</span><span class="n">split</span> <span class="n">s</span> <span class="n">p</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">associational</span><span class="bp">.</span><span class="n">reduce</span> <span class="n">s</span> <span class="n">c</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">++</span> <span class="n">associational</span><span class="bp">.</span><span class="n">mul</span> <span class="n">c</span> <span class="n">b</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">associational</span><span class="bp">.</span><span class="n">reduce</span><span class="o">,</span> <span class="n">h</span><span class="o">,</span> <span class="n">associational</span><span class="bp">.</span><span class="n">reduce</span><span class="o">]</span>
</pre></div>



<a name="179491684"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179491684" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179491684">(Oct 31 2019 at 00:39)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">associational</span><span class="bp">.</span><span class="n">carryterm</span> <span class="o">(</span><span class="n">w</span> <span class="n">fw</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">t</span><span class="o">:</span><span class="bp">ℤ</span> <span class="bp">×</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:=</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">fst</span> <span class="n">t</span> <span class="bp">=</span> <span class="n">w</span><span class="o">)</span>
  <span class="k">then</span> <span class="n">let_in</span> <span class="o">(</span><span class="n">snd</span> <span class="n">t</span><span class="o">)</span>         <span class="o">(</span><span class="bp">λ</span> <span class="n">t2</span><span class="o">,</span>
       <span class="n">let_in</span> <span class="o">(</span><span class="n">t2</span> <span class="bp">/</span> <span class="n">fw</span><span class="o">)</span>       <span class="o">(</span><span class="bp">λ</span> <span class="n">d2</span><span class="o">,</span>
       <span class="n">let_in</span> <span class="o">(</span><span class="n">t2</span> <span class="err">%</span> <span class="n">fw</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">m2</span><span class="o">,</span>
       <span class="o">[(</span><span class="n">w</span> <span class="bp">*</span> <span class="n">fw</span><span class="o">,</span> <span class="n">d2</span><span class="o">),</span> <span class="o">(</span><span class="n">w</span><span class="o">,</span><span class="n">m2</span><span class="o">)])))</span>
  <span class="k">else</span> <span class="o">[</span><span class="n">t</span><span class="o">]</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">associational</span><span class="bp">.</span><span class="n">carryterm_pos</span> <span class="o">(</span><span class="n">w</span> <span class="n">fw</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">associational</span><span class="bp">.</span><span class="n">carryterm</span> <span class="n">w</span> <span class="n">fw</span> <span class="o">(</span><span class="n">w</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span>
  <span class="n">let_in</span> <span class="n">b</span>               <span class="o">(</span><span class="bp">λ</span> <span class="n">t2</span><span class="o">,</span>
  <span class="n">let_in</span> <span class="o">(</span><span class="n">t2</span> <span class="bp">/</span> <span class="n">fw</span><span class="o">)</span>       <span class="o">(</span><span class="bp">λ</span> <span class="n">d2</span><span class="o">,</span>
  <span class="n">let_in</span> <span class="o">(</span><span class="n">t2</span> <span class="err">%</span> <span class="n">fw</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">m2</span><span class="o">,</span>
  <span class="o">[(</span><span class="n">w</span> <span class="bp">*</span> <span class="n">fw</span><span class="o">,</span> <span class="n">d2</span><span class="o">),</span> <span class="o">(</span><span class="n">w</span><span class="o">,</span><span class="n">m2</span><span class="o">)])))</span> <span class="o">:=</span> <span class="n">if_pos</span> <span class="n">rfl</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">associational</span><span class="bp">.</span><span class="n">carryterm_neg</span> <span class="o">{</span><span class="n">w</span> <span class="n">fw</span> <span class="n">a</span> <span class="n">b</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="n">w</span><span class="o">)</span> <span class="o">:</span> <span class="n">associational</span><span class="bp">.</span><span class="n">carryterm</span> <span class="n">w</span> <span class="n">fw</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="o">[(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)]</span> <span class="o">:=</span> <span class="n">if_neg</span> <span class="n">h</span>
</pre></div>



<a name="179491760"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179491760" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179491760">(Oct 31 2019 at 00:41)</a>:</h4>
<p>The basic idea is to have all arguments to the functions be in weak head normal form (i.e. for a <code>list (Z x Z)</code> it should be an empty list or a cons of a pair), and additionally when there are destructuring lets or other pattern matches inside the function the results of these should be hypotheses</p>



<a name="179491839"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179491839" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179491839">(Oct 31 2019 at 00:42)</a>:</h4>
<p>lean's equation compiler gives you something similar with an auxiliary function; if you print the definition of <code>associational.split</code> you will see that the destructuring let was done by creating an auxiliary that is defined by pattern matching</p>



<a name="179491868"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179491868" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179491868">(Oct 31 2019 at 00:43)</a>:</h4>
<p>And then how do I make use of these?  Do I interleave "prove side-conditions with <code>refl</code> with <code>simp</code> for <code>split_val</code>?  And it looks like rewriting with <code>associational.carryterm_pos</code> is incompatible with rewriting with <code>associational.carryterm_neg</code>; how do I get lean to pick the right one to rewrite with and prove the side-condition automatically?</p>



<a name="179491878"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179491878" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179491878">(Oct 31 2019 at 00:43)</a>:</h4>
<p><code>simp</code> will do this</p>



<a name="179491941"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179491941" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179491941">(Oct 31 2019 at 00:44)</a>:</h4>
<p>But I should admit that lean has for a long time needed a tactic like Coq's <code>cbv</code>, for just doing evaluations like this</p>



<a name="179492026"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179492026" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179492026">(Oct 31 2019 at 00:46)</a>:</h4>
<p><code>simp</code> uses an auxiliary side condition discharger (that is by default <code>simp</code> to true) for using conditional rewrite lemmas</p>



<a name="179492047"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179492047" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179492047">(Oct 31 2019 at 00:46)</a>:</h4>
<p>What does CBV stand for?</p>



<a name="179492052"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179492052" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179492052">(Oct 31 2019 at 00:47)</a>:</h4>
<p><code>norm_num</code> uses <code>norm_num</code> as the simp discharger, so it should be able to do the numeric part even inside if conditions and such</p>



<a name="179492061"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179492061" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179492061">(Oct 31 2019 at 00:47)</a>:</h4>
<p>call by value</p>



<a name="179492066"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179492066" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179492066">(Oct 31 2019 at 00:47)</a>:</h4>
<p>there is also <code>cbn</code> for call by name</p>



<a name="179492078"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179492078" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179492078">(Oct 31 2019 at 00:47)</a>:</h4>
<p>it refers to the order of evaluation. It's basically treating terms as a functional program and evaluating functions according to their definitions</p>



<a name="179492131"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179492131" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179492131">(Oct 31 2019 at 00:48)</a>:</h4>
<p>which is what <code>rfl</code> does already, but <code>rfl</code> has to go to completion while the hypothetical <code>cbv</code> tactic would just stop when it gets stuck</p>



<a name="179492146"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179492146" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179492146">(Oct 31 2019 at 00:48)</a>:</h4>
<p>right now people have to write mile-long simp invocations unfolding everything in sight</p>



<a name="179492173"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179492173" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179492173">(Oct 31 2019 at 00:49)</a>:</h4>
<p>or use carefully designed simp lemmas like the ones I've given above to guide the evaluation</p>



<a name="179493123"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179493123" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179493123">(Oct 31 2019 at 01:09)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> if I try that, <code>rw [associational.split_val]</code> gives <code>rewrite tactic failed, motive is not type correct</code> and <code>nested exception message: check failed, application type mismatch (use 'set_option trace.check true' for additional details)</code></p>



<a name="179493140"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179493140" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179493140">(Oct 31 2019 at 01:09)</a>:</h4>
<p>Are you rewriting in an if statement?</p>



<a name="179493194"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179493194" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179493194">(Oct 31 2019 at 01:10)</a>:</h4>
<p>Yes</p>



<a name="179493215"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179493215" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179493215">(Oct 31 2019 at 01:10)</a>:</h4>
<p>If you use the suggested approach, you should never have to see an if statement, but you can also use <code>simp</code> in these situations to rewrite and also fix the dependent decidability argument</p>



<a name="179493403"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179493403" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179493403">(Oct 31 2019 at 01:14)</a>:</h4>
<p>Also, <code>associational.carryterm_neg</code> doesn't seem to be triggering when the location to rewrite is under binders?</p>



<a name="179493963"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179493963" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179493963">(Oct 31 2019 at 01:26)</a>:</h4>
<p>I am not sure if this strategy is going to work; it seems that <code>norm_num [lem1 lems]</code> fails to handle cases where <code>rw [lem1], norm_num [lems], norm_num [lems]</code> works, and <code>rw</code> doesn't really work under binders.</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">norm_num</span>
<span class="kn">open</span> <span class="n">prod</span>

<span class="kn">universe</span> <span class="n">u</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span>
<span class="n">def</span> <span class="n">list</span><span class="bp">.</span><span class="n">nth_default</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">(</span><span class="n">default</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">ls</span> <span class="o">:</span> <span class="n">list</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="n">A</span>
<span class="bp">|</span> <span class="o">[]</span>        <span class="bp">_</span>             <span class="o">:=</span> <span class="n">default</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">x</span> <span class="bp">::</span> <span class="n">xs</span><span class="o">)</span> <span class="mi">0</span>             <span class="o">:=</span> <span class="n">x</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">x</span> <span class="bp">::</span> <span class="n">xs</span><span class="o">)</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">n&#39;</span><span class="o">)</span> <span class="o">:=</span> <span class="n">list</span><span class="bp">.</span><span class="n">nth_default</span> <span class="n">xs</span> <span class="n">n&#39;</span>


<span class="n">def</span> <span class="n">associational</span><span class="bp">.</span><span class="n">split</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="bp">ℤ</span> <span class="bp">×</span> <span class="bp">ℤ</span><span class="o">))</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="bp">ℤ</span> <span class="bp">×</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">×</span> <span class="n">list</span> <span class="o">(</span><span class="bp">ℤ</span> <span class="bp">×</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:=</span>
  <span class="k">let</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span> <span class="n">list</span><span class="bp">.</span><span class="n">partition</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="o">(</span><span class="n">fst</span> <span class="n">t</span><span class="o">)</span> <span class="err">%</span> <span class="n">s</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="n">p</span> <span class="k">in</span>
  <span class="o">(</span><span class="n">b</span><span class="o">,</span> <span class="n">list</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="o">(</span><span class="n">fst</span> <span class="n">t</span> <span class="bp">/</span> <span class="n">s</span><span class="o">,</span> <span class="n">snd</span> <span class="n">t</span><span class="o">))</span> <span class="n">a</span><span class="o">)</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">associational</span><span class="bp">.</span><span class="n">split_val</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">}</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="bp">ℤ</span> <span class="bp">×</span> <span class="bp">ℤ</span><span class="o">)}</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">list</span><span class="bp">.</span><span class="n">partition</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="o">(</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span> <span class="n">t</span><span class="o">)</span> <span class="err">%</span> <span class="n">s</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="n">p</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">associational</span><span class="bp">.</span><span class="n">split</span> <span class="n">s</span> <span class="n">p</span> <span class="bp">=</span> <span class="o">(</span><span class="n">b</span><span class="o">,</span> <span class="n">list</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="o">(</span><span class="n">fst</span> <span class="n">t</span> <span class="bp">/</span> <span class="n">s</span><span class="o">,</span> <span class="n">snd</span> <span class="n">t</span><span class="o">))</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">associational</span><span class="bp">.</span><span class="n">split</span><span class="o">,</span> <span class="n">h</span><span class="o">,</span> <span class="n">associational</span><span class="bp">.</span><span class="n">split</span><span class="o">]</span>


<span class="kn">example</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">list</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">associational</span><span class="bp">.</span><span class="n">split</span> <span class="mi">65536</span> <span class="o">[(</span><span class="mi">1</span><span class="o">,</span> <span class="n">list</span><span class="bp">.</span><span class="n">nth_default</span> <span class="mi">0</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">list</span><span class="bp">.</span><span class="n">nth_default</span> <span class="mi">0</span> <span class="n">g</span> <span class="mi">0</span><span class="o">)])</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">=</span> <span class="o">[]</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">associational</span><span class="bp">.</span><span class="n">split_val</span><span class="o">],</span> <span class="n">norm_num</span> <span class="o">[</span><span class="n">associational</span><span class="bp">.</span><span class="n">split_val</span><span class="o">,</span> <span class="o">(</span><span class="err">∘</span><span class="o">),</span> <span class="n">list</span><span class="bp">.</span><span class="n">filter</span><span class="o">],</span> <span class="n">norm_num</span> <span class="o">[</span><span class="n">associational</span><span class="bp">.</span><span class="n">split_val</span><span class="o">,</span> <span class="o">(</span><span class="err">∘</span><span class="o">),</span> <span class="n">list</span><span class="bp">.</span><span class="n">filter</span><span class="o">]</span>
<span class="kn">end</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">list</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">associational</span><span class="bp">.</span><span class="n">split</span> <span class="mi">65536</span> <span class="o">[(</span><span class="mi">1</span><span class="o">,</span> <span class="n">list</span><span class="bp">.</span><span class="n">nth_default</span> <span class="mi">0</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">list</span><span class="bp">.</span><span class="n">nth_default</span> <span class="mi">0</span> <span class="n">g</span> <span class="mi">0</span><span class="o">)])</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">=</span> <span class="o">[]</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">norm_num</span> <span class="o">[</span><span class="n">associational</span><span class="bp">.</span><span class="n">split_val</span><span class="o">,</span> <span class="o">(</span><span class="err">∘</span><span class="o">),</span> <span class="n">list</span><span class="bp">.</span><span class="n">filter</span><span class="o">]</span>
<span class="c1">-- 30:3: norm_num failed to simplify</span>
<span class="c1">-- state:</span>
<span class="c1">-- f g : list ℤ</span>
<span class="c1">-- ⊢ (associational.split 65536 [(1, list.nth_default 0 f 0 * list.nth_default 0 g 0)]).snd = list.nil</span>
<span class="kn">end</span>
</pre></div>


<p>What's going on here?</p>



<a name="179494619"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179494619" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179494619">(Oct 31 2019 at 01:41)</a>:</h4>
<p><code>rw</code> doesn't work under binders, <code>simp</code> does</p>



<a name="179495462"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179495462" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179495462">(Oct 31 2019 at 02:03)</a>:</h4>
<p><span class="user-mention" data-user-id="241007">@Jason Gross</span> hm, you may be right. This works:</p>
<div class="codehilite"><pre><span></span><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">def</span> <span class="n">associational</span><span class="bp">.</span><span class="n">split</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="bp">ℤ</span> <span class="bp">×</span> <span class="bp">ℤ</span><span class="o">))</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="bp">ℤ</span> <span class="bp">×</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">×</span> <span class="n">list</span> <span class="o">(</span><span class="bp">ℤ</span> <span class="bp">×</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:=</span>
  <span class="k">let</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span> <span class="n">list</span><span class="bp">.</span><span class="n">partition</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="o">(</span><span class="n">fst</span> <span class="n">t</span><span class="o">)</span> <span class="err">%</span> <span class="n">s</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="n">p</span> <span class="k">in</span>
  <span class="o">(</span><span class="n">b</span><span class="o">,</span> <span class="n">list</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="o">(</span><span class="n">fst</span> <span class="n">t</span> <span class="bp">/</span> <span class="n">s</span><span class="o">,</span> <span class="n">snd</span> <span class="n">t</span><span class="o">))</span> <span class="n">a</span><span class="o">)</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">list</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">associational</span><span class="bp">.</span><span class="n">split</span> <span class="mi">65536</span> <span class="o">[(</span><span class="mi">1</span><span class="o">,</span> <span class="n">list</span><span class="bp">.</span><span class="n">nth_default</span> <span class="mi">0</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">list</span><span class="bp">.</span><span class="n">nth_default</span> <span class="mi">0</span> <span class="n">g</span> <span class="mi">0</span><span class="o">)])</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">=</span> <span class="o">[]</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">associational</span><span class="bp">.</span><span class="n">split</span><span class="o">,</span> <span class="n">list</span><span class="bp">.</span><span class="n">filter</span><span class="o">],</span> <span class="n">norm_num1</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>


<p>I've gone back to simp directly with the definition, but keeping the destructuring let, which prevents the unfolding from getting out of hand.</p>
<p>I should more seriously consider writing some equivalent to <code>cbv</code> that will do all of these things in the right order</p>



<a name="179502618"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179502618" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179502618">(Oct 31 2019 at 05:24)</a>:</h4>
<p><span class="user-mention" data-user-id="241007">@Jason Gross</span>  I managed to get your original <code>ex2</code> problem to compute to a value with a few modifications: <a href="https://gist.github.com/digama0/7649577d7c8af881cdbad50f9e84d81f" target="_blank" title="https://gist.github.com/digama0/7649577d7c8af881cdbad50f9e84d81f">https://gist.github.com/digama0/7649577d7c8af881cdbad50f9e84d81f</a></p>



<a name="179502848"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179502848" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179502848">(Oct 31 2019 at 05:31)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Thanks! </p>
<div class="codehilite"><pre><span></span><span class="gd">-def let_in {A : Type u} {B : Type v} (x : A) (f : A → B) := f x</span>
<span class="gi">+@[simp] def let_in {A : Type u} {B : Type v} (x : A) (f : A → B) := f x</span>
</pre></div>


<p>Uh, it's pretty important to not make this change; it results in ~exponential blowup, and in some of the examples even larger than this one, it becomes even more of a problem.  Is it essential to your way of making things work?</p>



<a name="179502898"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179502898" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179502898">(Oct 31 2019 at 05:32)</a>:</h4>
<p>I don't think so, it was mostly to get it out of the way for the other changes. A suitable set of other simp lemmas about let_in should suffice</p>



<a name="179502902"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179502902" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179502902">(Oct 31 2019 at 05:32)</a>:</h4>
<p>Lean does internally deduplicate expressions though, so it shouldn't cause exponential blowup</p>



<a name="179502914"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179502914" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179502914">(Oct 31 2019 at 05:33)</a>:</h4>
<p>basically, your approach is interfering with lean's own approach to the same problem</p>



<a name="179502962"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179502962" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179502962">(Oct 31 2019 at 05:34)</a>:</h4>
<p>The issue is that the goal is to generate C code, eventually, and we don't want exponential blow-up in the C code output, so we need to not unfold let_in.  This is what all of the <code>let_in.lift*</code> lemmas at the bottom are about</p>



<a name="179502972"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179502972" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179502972">(Oct 31 2019 at 05:35)</a>:</h4>
<p>In that case, why is <code>let_in</code> not a constructor?</p>



<a name="179503023"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503023" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503023">(Oct 31 2019 at 05:36)</a>:</h4>
<p>Because I didn't want to re-write a bunch of code to be in a monad</p>



<a name="179503028"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503028" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503028">(Oct 31 2019 at 05:36)</a>:</h4>
<p>But, sure, you could make it a constructor, and sprinkle <code>bind</code> everywhere</p>



<a name="179503033"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503033" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503033">(Oct 31 2019 at 05:36)</a>:</h4>
<p>(But then you also need a way to do <code>list (M T) -&gt; M (list T)</code>, etc)</p>



<a name="179503048"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503048" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503048">(Oct 31 2019 at 05:37)</a>:</h4>
<p>The thing is that you are also trying to compute with this in lean, and in that context the let_in doesn't make any sense</p>



<a name="179503090"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503090" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503090">(Oct 31 2019 at 05:38)</a>:</h4>
<p>And you can't compute a C code expression this way because <code>let_in</code> would be reduced away</p>



<a name="179503100"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503100" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503100">(Oct 31 2019 at 05:38)</a>:</h4>
<p>The final step to get to C would be reifying or otherwise pretty-printing the code</p>



<a name="179503118"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503118" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503118">(Oct 31 2019 at 05:39)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="gd">-  def positional.to_associational (n:ℕ) (xs:list ℤ) : list (ℤ × ℤ)</span>
<span class="gd">-    := list.combine (list.map weight (list.seq 0 n)) xs</span>
<span class="gi">+  def positional.to_associational (n:ℕ) (xs:list ℤ) : list (ℕ × ℤ)</span>
<span class="gi">+    := list.enum xs</span>
</pre></div>


<p>This seems wrong.   Did you deliberately remove <code>weight</code> here, or was it an oversight?</p>



<a name="179503124"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503124" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503124">(Oct 31 2019 at 05:39)</a>:</h4>
<p>the removal of weight was an oversight</p>



<a name="179503126"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503126" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503126">(Oct 31 2019 at 05:39)</a>:</h4>
<p>I wasn't sure about whether the removal of <code>n</code> was correct either</p>



<a name="179503176"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503176" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503176">(Oct 31 2019 at 05:40)</a>:</h4>
<p>But if <code>n</code> is much larger than <code>xs</code> the original approach has a lot of unnecessary computation</p>



<a name="179503188"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503188" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503188">(Oct 31 2019 at 05:41)</a>:</h4>
<p><code>n</code> is always equal to the length of <code>xs</code></p>



<a name="179503198"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503198" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503198">(Oct 31 2019 at 05:41)</a>:</h4>
<p>In that case I would want to have just one loop instead of two here</p>



<a name="179503210"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503210" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503210">(Oct 31 2019 at 05:41)</a>:</h4>
<p>Sure, that seems fine</p>



<a name="179503263"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503263" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503263">(Oct 31 2019 at 05:42)</a>:</h4>
<p>Also, how long should I expect this to take?  The code you gave me has already been running for 14 minutes</p>



<a name="179503269"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503269" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503269">(Oct 31 2019 at 05:42)</a>:</h4>
<p>my test ran 7 minutes</p>



<a name="179503291"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503291" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503291">(Oct 31 2019 at 05:43)</a>:</h4>
<p>If I pass <code>--tstack=1000000</code>, does that make it slower?</p>



<a name="179503294"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503294" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503294">(Oct 31 2019 at 05:43)</a>:</h4>
<p>I doubt it</p>



<a name="179503304"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503304" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503304">(Oct 31 2019 at 05:43)</a>:</h4>
<p>Maybe your machine is more than 2x as fast as mine?</p>



<a name="179503354"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503354" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503354">(Oct 31 2019 at 05:44)</a>:</h4>
<p>let me fix the bugs and try again to make sure I posted the right file</p>



<a name="179503368"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503368" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503368">(Oct 31 2019 at 05:45)</a>:</h4>
<p>(Seems doubtful that you're twice as fast as me; my cpu is 3.6 GHz...)</p>



<a name="179503430"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503430" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503430">(Oct 31 2019 at 05:46)</a>:</h4>
<p>What does <code>by exact _match l</code> do in <code>| (a::l) := positional.carry_reduce n s c a (by exact _match l)</code>?  (What's <code>_match</code>, and why are you doing it this way?)</p>



<a name="179503680"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503680" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503680">(Oct 31 2019 at 05:53)</a>:</h4>
<p>Unfortunately lean does not have Coq's <code>fix</code> constructor for making a recursive definition in the middle of a term. It has <code>match</code> for invoking the equation compiler, but it doesn't expose the name of the recursive function so you can make a recursive call. However it is exposed in tactics with the name <code>_match</code></p>



<a name="179503752"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503752" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503752">(Oct 31 2019 at 05:54)</a>:</h4>
<p>An equivalent approach would be:</p>
<div class="codehilite"><pre><span></span>    <span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">def</span> <span class="n">positional</span><span class="bp">.</span><span class="n">chained_carries_aux</span> <span class="o">(</span><span class="n">n</span> <span class="n">s</span> <span class="n">c</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span> <span class="n">list</span> <span class="n">nat</span> <span class="bp">→</span> <span class="n">list</span> <span class="bp">ℤ</span>
    <span class="bp">|</span> <span class="o">[]</span> <span class="o">:=</span> <span class="n">p</span>
    <span class="bp">|</span> <span class="o">(</span><span class="n">a</span><span class="bp">::</span><span class="n">l</span><span class="o">)</span> <span class="o">:=</span> <span class="n">positional</span><span class="bp">.</span><span class="n">carry_reduce</span> <span class="n">n</span> <span class="n">s</span> <span class="n">c</span> <span class="n">a</span> <span class="o">(</span><span class="n">positional</span><span class="bp">.</span><span class="n">chained_carries_aux</span> <span class="n">l</span><span class="o">)</span>

    <span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">def</span> <span class="n">positional</span><span class="bp">.</span><span class="n">chained_carries</span> <span class="o">(</span><span class="n">n</span> <span class="n">s</span> <span class="n">c</span> <span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">idxs</span> <span class="o">:</span> <span class="n">list</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:=</span>
    <span class="n">positional</span><span class="bp">.</span><span class="n">chained_carries_aux</span> <span class="n">n</span> <span class="n">s</span> <span class="n">c</span> <span class="n">p</span> <span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">reverse</span> <span class="n">idxs</span><span class="o">)</span>
</pre></div>



<a name="179503837"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503837" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503837">(Oct 31 2019 at 05:56)</a>:</h4>
<p>It's really annoying too when <code>apply</code> notices that this funny <code>_match</code> thing has the same type as the goal (imagine that)</p>



<a name="179503848"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503848" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503848">(Oct 31 2019 at 05:56)</a>:</h4>
<p>Er, maybe not <code>apply</code> but things that try <code>assumption</code></p>



<a name="179503924"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179503924" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179503924">(Oct 31 2019 at 05:58)</a>:</h4>
<p>oh, I think I know what might be the difference: when I first tested it, I ran the <code>norm_num</code> invocation with <code>carry_mulmod ... = sorry</code>, and it finished after 7 minutes with the goal <code>[0, 0, 0, 0, 0] = sorry</code>. The version I put on the gist has the <code>[0,0,0,0,0]</code> edited in, which means that this also includes the kernel typechecking time</p>



<a name="179505704"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179505704" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179505704">(Oct 31 2019 at 06:41)</a>:</h4>
<p>If it finishes with <code>[0,0,0,0,0]</code>, that's a bug (perhaps the removal of <code>weight</code> that I mentioned?).  It's not supposed to reduce to a numeral, it's supposed to reduce to a bunch of <code>let_in</code>s expressing arithmetic about elements of <code>f</code> and <code>g</code>, followed by a list of bound variables</p>



<a name="179505779"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179505779" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179505779">(Oct 31 2019 at 06:42)</a>:</h4>
<p>When I take out the <code>let_in</code> simplification, it blocks on a function that takes a list, being passed a <code>let_in</code> applied to a list literal</p>



<a name="179506591"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179506591" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179506591">(Oct 31 2019 at 07:02)</a>:</h4>
<p>Also, for the record this looks to be a tad bit abusive of <code>simp</code> and regular functions. I have a better idea of what you are trying to do now, and I think that all of these functions should be tactics. They will run a lot faster, and you can still produce proofs along the way</p>



<a name="179565408"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179565408" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179565408">(Oct 31 2019 at 19:04)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Indeed, it blocks on a function taking a list, and that is what the lemmas like <code>let_in.lift_map</code> are for, to unblock reduction without inlining things</p>



<a name="179565457"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179565457" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179565457">(Oct 31 2019 at 19:05)</a>:</h4>
<p>Which functions should be tactics?  The definitions on lists, or the reduction and let-lifting?</p>



<a name="179597945"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179597945" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179597945">(Nov 01 2019 at 03:54)</a>:</h4>
<p><span class="user-mention" data-user-id="241007">@Jason Gross</span> It's not quite clear to me how many of the functions on lists should be converted to tactics, but the basic idea would be to have all the stuff you actually want in the output (notably the <code>let_in</code> constructs) as <code>expr</code>s, with most of the list functions being functions that manipulate lists of <code>expr</code>s and such, so that you can evaluate them in the VM instead of all the simping.</p>
<p>What isn't clear to me is what you want to assert about the resulting let lifted expression. As it is (assuming the <code>simp</code> stuff can be made to work), you end up with a proof that asserts something like <code>carry_mulmod ... = let_in (f 1 * g 1) (\lam x, let_in ...)</code>, but as a theorem this doesn't appear particularly valuable since <code>carry_mulmod</code> is just a function that computes the thing on the right. Presumably you have some semantics about mulmod that you actually care about, and this should be what you want to prove a relation to. Or maybe you don't want to prove it is anything in particular, you just want the expression on the right, in which case it can be done a lot faster in the VM.</p>



<a name="179598106"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179598106" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179598106">(Nov 01 2019 at 03:59)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> The theorem I want to prove is that <code>associational.eval (positional.to_associational (carry_mulmod f g)) = (eval f * eval g) % (s - associational.eval c)</code>.  (Where <code>def asociational.eval (p) := list.foldr (+) 0 (list.map (\lambda (w, v), w * v) p)</code>.)  Each of the list definitions has a corresponding lemma about what it does under <code>eval</code>, c.f. <a href="https://github.com/mit-plv/fiat-crypto/blob/master/src/Arithmetic/Core.v" target="_blank" title="https://github.com/mit-plv/fiat-crypto/blob/master/src/Arithmetic/Core.v">https://github.com/mit-plv/fiat-crypto/blob/master/src/Arithmetic/Core.v</a></p>



<a name="179598188"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179598188" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179598188">(Nov 01 2019 at 04:01)</a>:</h4>
<p>Then I can combine this theorem with the <code>carry_mulmod ... = let_in ...</code> theorem to get a theorem about the evaluation of the final expression</p>



<a name="179606785"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179606785" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179606785">(Nov 01 2019 at 08:05)</a>:</h4>
<p><span class="user-mention" data-user-id="241007">@Jason Gross</span> I don't think I can help you with this one. I've tried several methods, but I think lean's kernel evaluation just isn't up to the task - it's abysmally slow at just about every approach to this that doesn't involve a complete rewrite. (It doesn't help that the algorithm itself is not super efficient; I can see that this would probably evaluate well enough in Coq but the Coq kernel evaluator is more efficient than lean's.) The fact that it's not completely a refl proof but has embedded subproofs makes this evaluation significantly more elaborate than it otherwise would be, and the constant allocation of new variables and lifting the term is also a performance bottleneck. This is possibly a good test case for lean 4.</p>



<a name="179607861"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179607861" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179607861">(Nov 01 2019 at 08:31)</a>:</h4>
<p>I appreciate all the help you've provided; thank you.  And feel free to take it as a test case for lean 4.  I will note that Coq only performs adequately if I rewrite the entire thing in CPS (so no term lifting needs to be done to reduce), make all the things that don't get unfolded axioms, and then run it in the vm.  Coq's rewriting tactics perform more slowly than Lean's (by a factor of 6, in the one case I could test).  Getting reasonable performance on this benchmark has been my PhD project for the last year or two, sort-of, and required writing a reflective rewriter mixed with NbE to be run in vm compute, and I'm currently in the process of writing this up in a paper for PLDI</p>



<a name="179609507"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179609507" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179609507">(Nov 01 2019 at 09:05)</a>:</h4>
<p>I updated the gist with my latest version: <a href="https://gist.github.com/digama0/7649577d7c8af881cdbad50f9e84d81f" target="_blank" title="https://gist.github.com/digama0/7649577d7c8af881cdbad50f9e84d81f">https://gist.github.com/digama0/7649577d7c8af881cdbad50f9e84d81f</a></p>
<p>I put it in a monad after all:</p>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="n">let_bound</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">base</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">let_bound</span>
<span class="bp">|</span> <span class="n">dlet</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">ℤ</span> <span class="bp">→</span> <span class="n">let_bound</span><span class="o">)</span> <span class="bp">→</span> <span class="n">let_bound</span>
<span class="bp">|</span> <span class="n">mlet</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">→</span> <span class="o">(</span><span class="n">β</span> <span class="bp">→</span> <span class="n">let_bound</span><span class="o">)</span> <span class="bp">→</span> <span class="n">let_bound</span>
</pre></div>


<p>The meaning is that <code>dlet</code> is the constructor for <code>let_in</code>, and <code>mlet</code> is a subgoal that should be solved by <code>norm_num</code>. In theory, you should be able to take the <code>(carry_mulmod ...).eval</code> term, and then successively normalize it (by whnf) to <code>(mlet x f).eval</code> which rewrites to <code>(f y).eval</code> after figuring out <code>x ~&gt; y</code> by other tactics, and <code>(dlet x f).eval</code> which rewrites to <code>let_in x (\lam a, (f a).eval)</code>and work continues inside the lambda.</p>



<a name="179609606"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179609606" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179609606">(Nov 01 2019 at 09:07)</a>:</h4>
<p>In practice, it seems to take about 1 sec per let binding, plus my tactics for doing the reduction are super janky</p>



<a name="179684072"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179684072" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179684072">(Nov 02 2019 at 04:02)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Neat, thanks!  Is that 1 second per internal let-binder (including mlet), or 1 second per emitted dlet?  I will note that real examples range from a couple dozen dlets at the small end to about 3800 dlets (possibly more for some of the code we don't build routinely) at the large end.</p>



<a name="179684134"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179684134" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179684134">(Nov 02 2019 at 04:05)</a>:</h4>
<p>I think what I was seeing was mlets. In ex2 there are about a dozen of them (solving stupidly large goals like <code>to_bool (1 % &lt;big number&gt; = 0)</code>) before you get to the first dlet</p>



<a name="179684179"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179684179" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179684179">(Nov 02 2019 at 04:06)</a>:</h4>
<p>Ah, yes, there are a lot of those</p>



<a name="179684479"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179684479" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179684479">(Nov 02 2019 at 04:16)</a>:</h4>
<blockquote>
<p>solving stupidly large goals like <code>to_bool (1 % &lt;big number&gt; = 0)</code></p>
</blockquote>
<p>Shouldn't solving this be fast/easy, because <code>1 % &lt;big number&gt;</code> is always <code>1</code>, and the division computation should be relatively fast because the numerator is small?</p>



<a name="179684709"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179684709" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179684709">(Nov 02 2019 at 04:22)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I tried running your code, but it seems to fail with ~no progress after 77 seconds?</p>
<div class="codehilite"><pre><span></span>$ /usr/bin/time -f &quot;$@ (real: %e, user: %U, sys: %S, mem: %M ko)&quot; lean fiat-test.lean
to_bool (weight machine_wordsize 1 0 * weight machine_wordsize 1 0 % s = 0)
2 goals
f g : ℕ → ℤ,
a : ℤ
⊢ let_bound.eval
      (let_bound.bind (positional.carry_reduce (… 1) n s c 1)
         ((λ (x : ℤ), let_bound.bind (… s c 0) ((λ (x : ℤ), let_bound.map … (… …)) x)) a)) =
    ?m_1 a

f g : ℕ → ℤ
⊢ ℤ → list ℤ
to_bool (weight machine_wordsize 1 0 = weight machine_wordsize 1 0)
f g : ℕ → ℤ,
a a_1 : ℤ
⊢ let_bound.eval
      (let_bound.bind (positional.carry_reduce (… 1) n s c 1)
         ((λ (x : ℤ),
             let_bound.bind (λ (a : list ℤ), let x : list … := … a in … …)
               ((λ (x : ℤ), let_bound.bind … (… x)) x))
            a_1)) =
    ?m_1 a_1
f g : ℕ → ℤ,
a a_1 a_2 : ℤ
⊢ let_bound.eval
      (let_bound.bind (positional.carry_reduce (… 1) n s c 1)
         ((λ (x : ℤ),
             let_bound.bind (λ (a : list ℤ), let x : list … := … a in … …)
               ((λ (x : ℤ), let_bound.bind … (… x)) x))
            a_2)) =
    ?m_1 a_2
/home/jgross/Documents/repos/fiat-lean-test/fiat-test.lean:345:2: error: convert tactic failed, there are unsolved goals
state:
f g : ℕ → ℤ,
a a_1 a_2 : ℤ
⊢ let_bound.eval
      (let_bound.bind (positional.carry_reduce (… 1) n s c 1)
         ((λ (x : ℤ),
             let_bound.bind (λ (a : list ℤ), let x : list … := … a in … …)
               ((λ (x : ℤ), let_bound.bind … (… x)) x))
            a_2)) =
    ?m_1 a_2
Command exited with non-zero status 1
 (real: 76.88, user: 76.73, sys: 0.24, mem: 396720 ko)
</pre></div>



<a name="179684727"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179684727" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179684727">(Nov 02 2019 at 04:22)</a>:</h4>
<p>it probably doesn't work</p>



<a name="179684729"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179684729" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179684729">(Nov 02 2019 at 04:22)</a>:</h4>
<p>(Maybe I am misreading the output, though...)</p>



<a name="179684741"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179684741" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179684741">(Nov 02 2019 at 04:23)</a>:</h4>
<p>if you can find some use for the code, great, but it comes with no warranty</p>



<a name="179684787"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179684787" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179684787">(Nov 02 2019 at 04:24)</a>:</h4>
<p>the tactic itself is extremely experimental</p>



<a name="179684795"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179684795" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179684795">(Nov 02 2019 at 04:24)</a>:</h4>
<p>Okay.  I think I'm not yet sufficiently experienced with Lean to extract value from the tactic code, and I've satisfied my curiosity about how good Lean's features are out-of-the-box at solving this sort of goal.</p>



<a name="179684796"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179684796" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179684796">(Nov 02 2019 at 04:24)</a>:</h4>
<p>it got a bit hard to test because everything takes forever</p>



<a name="179684813"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179684813" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179684813">(Nov 02 2019 at 04:25)</a>:</h4>
<p>This is definitely not something anyone has attempted to do before in lean</p>



<a name="179684818"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179684818" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179684818">(Nov 02 2019 at 04:25)</a>:</h4>
<blockquote>
<p>it got a bit hard to test because everything takes forever</p>
</blockquote>
<p>That's the story of my PhD.  I've probably spent 80% of my time trying to figure out how to work around performance issues in Coq</p>



<a name="179684861"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179684861" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179684861">(Nov 02 2019 at 04:26)</a>:</h4>
<p>My instincts say "fix the algorithm"</p>



<a name="179684867"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179684867" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179684867">(Nov 02 2019 at 04:26)</a>:</h4>
<p>What do you mean "fix the algorithm"?</p>



<a name="179684877"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179684877" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179684877">(Nov 02 2019 at 04:26)</a>:</h4>
<p>There is a ton of list manipulation code in here that seems to be unnecessary</p>



<a name="179684893"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179684893" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179684893">(Nov 02 2019 at 04:27)</a>:</h4>
<p>I mean, if it's a benchmark then that's fine, but I think you can obtain equivalent results with another approach that doesn't involve all these let bindings</p>



<a name="179684951"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179684951" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179684951">(Nov 02 2019 at 04:28)</a>:</h4>
<p>and what's with all this back and forth between positional and associational representations?</p>



<a name="179684973"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179684973" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179684973">(Nov 02 2019 at 04:29)</a>:</h4>
<p>The ultimate goal is to produce code like this: <a href="https://github.com/mit-plv/fiat-crypto/blob/5a51b7a2f9fc8aad46963f0d9bbe64047de0704f/curve25519_64.c#L96-L154" target="_blank" title="https://github.com/mit-plv/fiat-crypto/blob/5a51b7a2f9fc8aad46963f0d9bbe64047de0704f/curve25519_64.c#L96-L154">https://github.com/mit-plv/fiat-crypto/blob/5a51b7a2f9fc8aad46963f0d9bbe64047de0704f/curve25519_64.c#L96-L154</a></p>



<a name="179685040"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685040" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685040">(Nov 02 2019 at 04:31)</a>:</h4>
<p>I would write a tactic that produces that, and a simultaneously proof of the semantics of it</p>



<a name="179685098"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685098" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685098">(Nov 02 2019 at 04:32)</a>:</h4>
<p>Z would never show up in the algorithm</p>



<a name="179685108"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685108" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685108">(Nov 02 2019 at 04:32)</a>:</h4>
<p>(except in the tactic code itself)</p>



<a name="179685174"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685174" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685174">(Nov 02 2019 at 04:34)</a>:</h4>
<p>The back-and-forth between positional and associational is because some algorithms are easy to express and prove in the associational representation (addition of numbers is just list concatenation, multiplication is just all the ways of combining pairs of elements of the lists with <code>*</code>), while positional is the format that is actually used to store the numbers in memory / transmit them on the wire.  But you're right, there's a lot of unnecessary back-and-forth in <code>chained_carries</code>, which could probably benefit from being moved to <code>associational</code>.</p>



<a name="179685253"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685253" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685253">(Nov 02 2019 at 04:36)</a>:</h4>
<p>The point is to separate the parts of the algorithm that actually need to be executed, and the parts that are actually the output (creating the list of let bindings)</p>



<a name="179685264"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685264" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685264">(Nov 02 2019 at 04:36)</a>:</h4>
<p>the part that gets executed can happen in the VM (fast and untrusted), and the part that is output is term creation with a proof of correctness</p>



<a name="179685276"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685276" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685276">(Nov 02 2019 at 04:37)</a>:</h4>
<p>Right now <em>everything</em> is happening as term manipulation, so it's all slow</p>



<a name="179685379"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685379" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685379">(Nov 02 2019 at 04:40)</a>:</h4>
<p>Maybe I don't understand what you mean by a tactic that produces both the term and the proof.  e.g., what would this look like for <code>associational.carryterm</code>, whose spec is <code>associational.eval (associational.carryterm w fw t) = associational.eval [t]</code> (Coq proof <a href="https://github.com/mit-plv/fiat-crypto/blob/5a51b7a2f9fc8aad46963f0d9bbe64047de0704f/src/Arithmetic/Core.v#L476-L483" target="_blank" title="https://github.com/mit-plv/fiat-crypto/blob/5a51b7a2f9fc8aad46963f0d9bbe64047de0704f/src/Arithmetic/Core.v#L476-L483">here</a>)</p>



<a name="179685462"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685462" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685462">(Nov 02 2019 at 04:41)</a>:</h4>
<p>(The proof is pretty simple: it's basically just the spec of div and mod, plus ring)</p>



<a name="179685528"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685528" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685528">(Nov 02 2019 at 04:43)</a>:</h4>
<p>Do you mean something like, a tactic that builds a sigma type <code>{ ct : list (Z * Z) | associational.eval ct = associational.eval [t] }</code>?</p>



<a name="179685532"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685532" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685532">(Nov 02 2019 at 04:43)</a>:</h4>
<p>or, er, maybe it is all inside the let monad</p>



<a name="179685581"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685581" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685581">(Nov 02 2019 at 04:44)</a>:</h4>
<p>You have a tactic called <code>carryterm (...) : tactic (term x expr)</code>, which is given some inputs and produces a pair of a term and a proof of <code>associational.eval t' = associational.eval [t]</code> (where <code>t'</code> is the reification of the returned term)</p>



<a name="179685657"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685657" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685657">(Nov 02 2019 at 04:46)</a>:</h4>
<p>yes, you could also view it as a sigma type, although you want <code>ct</code> here to be a concrete list, not an arbitrary term of type <code>list (Z * Z)</code></p>



<a name="179685667"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685667" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685667">(Nov 02 2019 at 04:46)</a>:</h4>
<p>Yes, a concrete list, but it's under let binders</p>



<a name="179685675"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685675" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685675">(Nov 02 2019 at 04:47)</a>:</h4>
<p>which is why it is returned as a <code>term</code> (which is some inductive type you define that specifies the valid constructions, in this case a list under let binders)</p>



<a name="179685702"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685702" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685702">(Nov 02 2019 at 04:47)</a>:</h4>
<p>I suspect that you actually should be keeping the let binders on the side though; that is, you have some growing context of let binders and your monad allows you to add to it</p>



<a name="179685755"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685755" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685755">(Nov 02 2019 at 04:48)</a>:</h4>
<p>Hm, but the proofs are invalid if you don't know the values of the binders.  I get the evaluation for the proofs looks things up from the binders on the side?</p>



<a name="179685761"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685761" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685761">(Nov 02 2019 at 04:49)</a>:</h4>
<p>Yes, you would be passing it as another argument to eval in that case</p>



<a name="179685781"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685781" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685781">(Nov 02 2019 at 04:49)</a>:</h4>
<p>Okay, so I see how I could produce the term, but I don't see how producing the proof on the fly every time I call carryterm is going to be any faster.  It seems like it can only possibly be slower, because now not only are you computing equality of list manipulation, you're also computing equality of <code>associational.eval</code></p>



<a name="179685868"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685868" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685868">(Nov 02 2019 at 04:51)</a>:</h4>
<p>Oh, I see, at least for carryterm, you don't need to worry about what the bool computes you, you just produce a proof of one side or the other</p>



<a name="179685877"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685877" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685877">(Nov 02 2019 at 04:52)</a>:</h4>
<p>(I still think the proof is going to be expensive here, because you're calling ring)</p>



<a name="179685917"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685917" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685917">(Nov 02 2019 at 04:52)</a>:</h4>
<p>Both parts are produced by application of theorems like those I mentioned earlier. You aren't "computing" anything in the DTT sense; you are applying theorems that build up eval equalities about these reified terms</p>



<a name="179685920"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685920" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685920">(Nov 02 2019 at 04:52)</a>:</h4>
<p>You actually don't need to call <code>ring</code> at all this way</p>



<a name="179685922"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685922" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685922">(Nov 02 2019 at 04:52)</a>:</h4>
<p>That's the main benefit</p>



<a name="179685939"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179685939" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179685939">(Nov 02 2019 at 04:53)</a>:</h4>
<p>If you have something like <code>if a % s = 0 then ... else ...</code> in the algorithm, that's fine, it runs in the VM and uses a bignum library</p>



<a name="179686014"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179686014" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179686014">(Nov 02 2019 at 04:55)</a>:</h4>
<p>The only reason you need to run <code>norm_num</code> is if you needed that fact <code>a % s = 0</code> in order to produce the correctness proof, but with this approach it's easy to run it and provide the input where it is needed</p>



<a name="179686076"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179686076" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179686076">(Nov 02 2019 at 04:57)</a>:</h4>
<p>Hm, this is interesting, I'll have to think more about this approach</p>



<a name="179686081"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179686081" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179686081">(Nov 02 2019 at 04:58)</a>:</h4>
<p>(And, indeed, in <code>associational.split</code>, we need a proof of <code>a % s = 0</code> for the <code>then</code> branch, but don't need to know anything in the <code>else</code> branch)</p>



<a name="179686143"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179686143" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179686143">(Nov 02 2019 at 04:59)</a>:</h4>
<p>Additionally, you can easily shortcut the computation by applying a theorem with the alternate hypothesis <code>a = 0</code>, or <code>a = s</code>, or <code>a = k * s</code> where you precompute what <code>k</code> should be</p>



<a name="179686349"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179686349" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179686349">(Nov 02 2019 at 05:04)</a>:</h4>
<p>Presumably I still need <code>norm_num</code> to prove <code>a = k * s</code>, though, right?  Because of <a href="https://webcache.googleusercontent.com/search?q=cache:tVeSAlPEQN4J:https://github.com/leanprover/lean/issues/1799+&amp;cd=2&amp;hl=en&amp;ct=clnk&amp;gl=us" target="_blank" title="https://webcache.googleusercontent.com/search?q=cache:tVeSAlPEQN4J:https://github.com/leanprover/lean/issues/1799+&amp;cd=2&amp;hl=en&amp;ct=clnk&amp;gl=us">https://webcache.googleusercontent.com/search?q=cache:tVeSAlPEQN4J:https://github.com/leanprover/lean/issues/1799+&amp;cd=2&amp;hl=en&amp;ct=clnk&amp;gl=us</a></p>



<a name="179686365"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179686365" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179686365">(Nov 02 2019 at 05:05)</a>:</h4>
<p>(Did someone delete all the issues on leanprover/lean?  There's no issue page anymore, and all the pre-existing issues give 404 now...)</p>



<a name="179686790"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179686790" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179686790">(Nov 02 2019 at 05:17)</a>:</h4>
<p>What the... It appears Leo <a href="https://github.com/leanprover/lean/commit/72a965986fa5aeae54062e98efb3140b2c4e79fd" target="_blank" title="https://github.com/leanprover/lean/commit/72a965986fa5aeae54062e98efb3140b2c4e79fd">simplified the readme</a> and <em>deleted</em> the entire issues page for leanprover/lean. I didn't even know that was possible, but I hope we can get the history migrated to the community version</p>



<a name="179686909"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179686909" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179686909">(Nov 02 2019 at 05:21)</a>:</h4>
<p>Yes, you would want to use <code>norm_num</code> to prove the <code>a = k * s</code> side goal.</p>



<a name="179686966"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179686966" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179686966">(Nov 02 2019 at 05:23)</a>:</h4>
<p>Indeed, the approach I am describing is basically what <code>norm_num</code> does itself, for arithmetic goals</p>



<a name="179687196"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179687196" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179687196">(Nov 02 2019 at 05:30)</a>:</h4>
<p>Is there any chance I can get Lean to manage the context for me, or do I have to do it myself and reason about, e.g., uniqueness of names and context-lookup, etc?</p>



<a name="179687268"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179687268" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179687268">(Nov 02 2019 at 05:32)</a>:</h4>
<p>There's a checkbox under "options" of a github repository to enable/disable issues.  I could believe that when you disable issues, github just makes them inaccessible to non-admins or something.  (I could also believe it deletes them)</p>



<a name="179687317"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179687317" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179687317">(Nov 02 2019 at 05:34)</a>:</h4>
<p>Yeah, when you uncheck the issues box, github makes all issues be 404s.  When you recheck it, they all come back</p>



<a name="179687321"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179687321" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179687321">(Nov 02 2019 at 05:34)</a>:</h4>
<p>Indeed, according to <a href="https://help.github.com/en/github/managing-your-work-on-github/disabling-issues" target="_blank" title="https://help.github.com/en/github/managing-your-work-on-github/disabling-issues">this page</a> re-enabling the issues would make the old ones accessible again. I could only find <a href="https://help.github.com/en/github/managing-your-work-on-github/transferring-an-issue-to-another-repository" target="_blank" title="https://help.github.com/en/github/managing-your-work-on-github/transferring-an-issue-to-another-repository">this page</a> on migrating single open issues, and it didn't look too promising. Maybe github support could work some magic though.</p>



<a name="179687335"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179687335" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179687335">(Nov 02 2019 at 05:35)</a>:</h4>
<p>It's definitely possible to mass-migrate issues, though you might need to write a tool to do it using the github api (and get Leo to re-enable issues temporarily)</p>



<a name="179687342"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179687342" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179687342">(Nov 02 2019 at 05:35)</a>:</h4>
<p>Coq migrated all of it's issues from bugzilla to github, mostly preserving issue numbers (but they all show as authored by coqbot, unfortunately)</p>



<a name="179687403"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179687403" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179687403">(Nov 02 2019 at 05:37)</a>:</h4>
<p><a href="https://github.com/IQAndreas/github-issues-import" target="_blank" title="https://github.com/IQAndreas/github-issues-import">https://github.com/IQAndreas/github-issues-import</a></p>



<a name="179687464"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179687464" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179687464">(Nov 02 2019 at 05:39)</a>:</h4>
<p>Also, <a href="http://www.alexhadik.com/blog/2016/5/26/migrating-github-repositories-with-gitmover" target="_blank" title="http://www.alexhadik.com/blog/2016/5/26/migrating-github-repositories-with-gitmover">http://www.alexhadik.com/blog/2016/5/26/migrating-github-repositories-with-gitmover</a></p>



<a name="179707726"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179707726" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179707726">(Nov 02 2019 at 16:03)</a>:</h4>
<p>you're going to want my fork: <a href="https://github.com/alashworth/github-issues-import" target="_blank" title="https://github.com/alashworth/github-issues-import">https://github.com/alashworth/github-issues-import</a></p>



<a name="179707736"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179707736" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179707736">(Nov 02 2019 at 16:03)</a>:</h4>
<p>also you will need to speak to github admin to whitelist your account, otherwise you'll get autobanned for spamming</p>



<a name="179707739"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/179707739" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#179707739">(Nov 02 2019 at 16:03)</a>:</h4>
<p>(went through this in march)</p>



<a name="180375447"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/180375447" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#180375447">(Nov 10 2019 at 19:11)</a>:</h4>
<p>(deleted)</p>



<a name="180375510"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/180375510" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#180375510">(Nov 10 2019 at 19:12)</a>:</h4>
<p>(deleted)</p>



<a name="180920850"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/180920850" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reuben Rowe <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#180920850">(Nov 16 2019 at 17:35)</a>:</h4>
<p>If I have an instance <code>denumerable α</code> and two values <code>x y : α</code>, is there a way to be able to write <code>if x = y then ...</code> rather than <code>if (encodable.encode x) = (encodable.encode y) then ...</code>. That is, how to I get Lean to infer <code>decidable (x = y)</code>?</p>



<a name="180920960"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/180920960" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#180920960">(Nov 16 2019 at 17:38)</a>:</h4>
<p>you want to assume <code>decidable_eq A</code> too</p>



<a name="180921040"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/180921040" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reuben Rowe <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#180921040">(Nov 16 2019 at 17:40)</a>:</h4>
<p>Great, thanks - but it seemed to me that this can be derived from denumerability. Why should I have to assume it separately?</p>



<a name="180921045"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/180921045" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#180921045">(Nov 16 2019 at 17:41)</a>:</h4>
<p>because the implementation might be different</p>



<a name="180921049"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/180921049" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reuben Rowe <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#180921049">(Nov 16 2019 at 17:41)</a>:</h4>
<p>Derived from denumerability, given that equality on \Nat is decidable</p>



<a name="180921067"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/180921067" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#180921067">(Nov 16 2019 at 17:41)</a>:</h4>
<p>it's not usually the best way to decide equality</p>



<a name="180921299"></a>
<h4><a href="https://leanprover.zulipchat.com#narrow/stream/113489-new%20members/topic/noob%20question%28s%29/near/180921299" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reuben Rowe <a href="http://127.0.0.1:4000/archive/113489newmembers/52075noobquestions#180921299">(Nov 16 2019 at 17:47)</a>:</h4>
<p>OK, sure. Thanks!</p>



{% endraw %}

<hr><p>Last updated: Dec 21 2019 at 16:56 UTC</p>